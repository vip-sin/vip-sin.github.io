"use strict";(self.webpackChunkvpn=self.webpackChunkvpn||[]).push([[356],{51427:function(e,n,t){t.d(n,{EL:function(){return p},cm:function(){return h},is:function(){return f},qi:function(){return c}});var a=t(74165),i=t(15861),r=t(31881),o=t.n(r),l=t(12613),u=t(97729),s=t(46417),d=JSON.parse(sessionStorage.getItem("logInUserData")),c=function(e){var n=e.user,t=e.token;return function(){var e=(0,i.Z)((0,a.Z)().mark((function e(i){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i({type:"GET_ALL_DOCS_LOADING",data:!0}),o().get("/backendapi/document/".concat(null===n||void 0===n?void 0:n._id),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){i({type:"GET_ALL_DOCS_LOADING",data:!1});for(var n=e.data,t=0;t<n.length;t+=1)n[t].desc=(0,u.Y)(n[t].desc),n[t].id=t+1,n[t].expiry=(0,u.Y)(n[t].expiry),n[t].alias=(0,u.Y)(n[t].alias);i({type:"GET_ALL_DOCS",resp:n})})).catch((function(e){i({type:"GET_ALL_DOCS_ERROR",err:"Error getting docs"})}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},f=function(){return function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"GET_USER_ALL_DATA_LOADING",data:!0}),e.next=3,o().post("/backendapi/user/get",{id:d._id},{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}).then((function(e){if(n({type:"GET_USER_ALL_DATA_LOADING",data:!1}),null!==e&&void 0!==e&&e.data){var t=e.data[0];n({type:"GET_USER_ALL_DATA",data:t})}})).catch((function(e){n({type:"GET_USER_ALL_DATA_LOADING",data:!1})}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},h=function(e){return function(n){return n({type:"FILTER_DATA",value:e})}},p=function(e){return function(){var n=(0,i.Z)((0,a.Z)().mark((function n(t){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o().post("/backendapi/user/update/secrets",{secrets:e,_id:d._id},{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}).then((function(e){return(0,s.jsx)(l.A9,{handleClick:function(){},openSnack:!0,openSnackMsg:"Secret Updated Successfully"})}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},29748:function(e,n,t){t.d(n,{Z:function(){return O}});var a=t(1413),i=t(74165),r=t(93433),o=t(15861),l=t(29439),u=t(47313),s=t(9506),d=t(49920),c=t(19641),f=t(47605),h=t(19536),p=t(71003),v=t(35898),m=t(74212),Z=t(8586),x=t(85585),g=t(54727),j=t(61474),D=t(85120),S=t(12613),A=t(79428),C=t(94469),w=t(33604),y=t(69625),L=t(46417);function k(e){var n=e.modal,t=e.toggleModal,i=e.fname,r=e.setfname,o=e.ftype,l=e.setftype,u=e.editID,s=e.clearCustomField,d=e.handleSecrets,c=e.secrets;return(0,L.jsxs)(C.Z,{open:n,fullWidth:!0,maxWidth:"xs",onClose:t,children:[(0,L.jsxs)(w.Z,{children:[u?"Update Secret":"Add Secret"," "]}),(0,L.jsxs)(y.Z,{children:[(0,L.jsx)(j.gc,{name:"relation",options:A.DD.filter((function(e){var n,t,a;return e.value!==(null===c||void 0===c||null===(n=c[0])||void 0===n?void 0:n.question)&&e.value!==(null===c||void 0===c||null===(t=c[1])||void 0===t?void 0:t.question)&&e.value!==(null===c||void 0===c||null===(a=c[2])||void 0===a?void 0:a.question)})),onChange:function(e,n){return function(e){var n=null===e||void 0===e?void 0:e.value;r(n)}(n)},value:(0,A.NA)(A.DD,i),renderInput:function(e){return(0,L.jsx)(m.Z,(0,a.Z)((0,a.Z)({},e),{},{placeholder:" Secret Question"}))}}),(0,L.jsx)(m.Z,{type:"text",name:"Answer",margin:"normal",size:"small",fullWidth:!0,error:(null===o||void 0===o?void 0:o.length)<4||" "===o.charAt(0),value:o,placeholder:"Answer",onChange:function(e){l(e.target.value)}}),(0,L.jsxs)(v.Z,{spacing:3,direction:"row",sx:{mt:3,justifyContent:"start"},children:[(0,L.jsx)(j.ZP,{varient:"outlined",label:"Cancel",onClick:function(e){s()}}),(0,L.jsx)(j.ZP,{varient:"contained",label:u?"Update":"Add",disabled:!(null!==i&&void 0!==i&&i.length)||o.length<4,onClick:d})]})]})]})}var b=t(69173),E=t(49969),_=t(97729),N=JSON.parse(sessionStorage.getItem("dropdowns")).nomineeRelation;function O(e){var n=(0,u.useState)(),t=(0,l.Z)(n,2),C=t[0],w=t[1],y=(0,u.useState)(""),O=(0,l.Z)(y,2),I=O[0],R=O[1],T=(0,u.useState)(""),G=(0,l.Z)(T,2),P=G[0],z=G[1],U=(0,u.useState)(""),q=(0,l.Z)(U,2),M=q[0],V=q[1],W=(0,u.useState)(""),F=(0,l.Z)(W,2),Y=F[0],B=F[1],$=(0,u.useState)(!0),J=(0,l.Z)($,2),K=J[0],Q=J[1],H=(0,u.useState)(""),X=(0,l.Z)(H,2),ee=X[0],ne=X[1],te=(0,u.useState)(""),ae=(0,l.Z)(te,2),ie=ae[0],re=ae[1],oe=(0,u.useState)(!1),le=(0,l.Z)(oe,2),ue=le[0],se=le[1],de=(0,u.useState)(""),ce=(0,l.Z)(de,2),fe=ce[0],he=ce[1],pe=(0,u.useState)(""),ve=(0,l.Z)(pe,2),me=ve[0],Ze=ve[1],xe=(0,u.useState)(""),ge=(0,l.Z)(xe,2),je=ge[0],De=ge[1],Se=(0,u.useState)(""),Ae=(0,l.Z)(Se,2),Ce=Ae[0],we=Ae[1],ye=(0,u.useState)(""),Le=(0,l.Z)(ye,2),ke=Le[0],be=Le[1],Ee=(0,u.useState)(""),_e=(0,l.Z)(Ee,2),Ne=_e[0],Oe=_e[1],Ie=(0,u.useState)(""),Re=(0,l.Z)(Ie,2),Te=Re[0],Ge=Re[1],Pe=(0,u.useState)(""),ze=(0,l.Z)(Pe,2),Ue=ze[0],qe=ze[1],Me=(0,u.useState)([]),Ve=(0,l.Z)(Me,2),We=Ve[0],Fe=Ve[1],Ye=(0,u.useState)(!1),Be=(0,l.Z)(Ye,2),$e=Be[0],Je=Be[1],Ke=(0,u.useState)(""),Qe=(0,l.Z)(Ke,2),He=Qe[0],Xe=Qe[1],en=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var n,t,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(He){e.next=9;break}return n=(0,r.Z)(We),e.next=4,(0,_.c_)(Ue);case 4:t=e.sent,n.push({id:(null===n||void 0===n?void 0:n.length)+1,question:Te,answer:t}),Fe((0,r.Z)(n)),e.next=17;break;case 9:return a=(0,r.Z)(We),o=a.findIndex((function(e){return e.id===He})),a[o].question=Te,e.next=14,(0,_.c_)(Ue);case 14:a[o].answer=e.sent,Fe((0,r.Z)(a)),Xe("");case 17:Je(!1),Ge(""),qe("");case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nn=function(){Ge(""),qe(""),Je(!$e)},tn=function(){$e&&nn(),Je(!$e)};(0,u.useEffect)((function(){if(e.data){var n=e.data,t=n.name,a=n.relation,i=n.relation1,o=n.address,l=n.email,u=n.primaryContact,s=n.secondaryContact,d=e.data.secrets;fn(),re(t),w(a),"Others"===a&&R(i),V(o),z(l),B(u),ne(s),(null===d||void 0===d?void 0:d.length)&&Fe((0,r.Z)(d))}else(null===e.data||ue)&&(cn(),fn());se(!1)}),[e.data]);var an=function(){return Oe("Enter Valid Name")},rn=function(){return De("Enter Valid Email")},on=function(){return we("Enter Valid Contact No.")},ln=function(){return Ze("Enter Valid Relation")},un=function(){return he("Enter Valid Relation")},sn=function(e){var n,t=e.target.name,a=null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value;switch(t){case"name":re(a),null!==a&&void 0!==a&&a.length&&a.trim()?Oe(""):an();break;case"email":z(a);var i=a.match(/^([A-Za-z0-9_\-.])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,})$/);a&&i&&a.trim()?De(""):rn();break;case"address":V(a);break;case"phone":B(a),K&&ne(a),null!==a&&void 0!==a&&a.length&&10===a.length&&a.trim()&&g.Yd.test(a)?we(""):on();break;case"phoneC":ne(a),10===a.length&&a.trim()&&g.Yd.test(a)?be(""):be("Enter Valid whatsapp No."),(null===a||void 0===a||!a.length)&&be("");break;case"relation":null!==a&&void 0!==a&&a.length&&a.trim()?Ze(""):ln();break;case"relation1":R(a),null!==a&&void 0!==a&&a.length&&a.trim()?he(""):un()}},dn=function(n){console.log("das"),n.preventDefault();var t=((null===ie||void 0===ie||!ie.length)&&an(),(null===P||void 0===P||!P.length)&&rn(),(null===Y||void 0===Y||!Y.length)&&on(),(null===C||void 0===C||!C.length)&&ln(),"Others"===C&&(null===I||void 0===I||!I.length)&&un(),"Others"!==C&&he(""),Ne||!(null!==ie&&void 0!==ie&&ie.length)||me||!(null!==C&&void 0!==C&&C.length)||fe||"Others"===C&&!(null!==I&&void 0!==I&&I.length)||je||!(null!==P&&void 0!==P&&P.length)||Ce||!(null!==Y&&void 0!==Y&&Y.length)||ke);if(t&&S.A9,e.isLoading&&(S.A9,e.data),t||e.isLoading)console.log(t,"inValid");else{var a={relation:null===C||void 0===C?void 0:C.trim(),relation1:null===I||void 0===I?void 0:I.trim(),email:null===P||void 0===P?void 0:P.trim(),address:null===M||void 0===M?void 0:M.trim(),primaryContact:null===Y||void 0===Y?void 0:Y.trim(),secondaryContact:null===ee||void 0===ee?void 0:ee.trim(),name:null===ie||void 0===ie?void 0:ie.trim(),secrets:We};null!==e.data?(a._id=e.data._id,a.usage=e.data.usage,e.updateData(a)):(se(!0),e.callAddNomineeApi(a),cn(),fn())}},cn=function(){re(""),Fe([]),w(""),R(""),z(""),V(""),B(""),ne("")},fn=function(){Oe(""),we(""),be(""),De(""),he("")},hn=e.handleSidebar,pn=e.show,vn=e.data;return(0,L.jsx)(d.Z,{anchor:"right",open:pn,onOpen:function(){},onClose:function(){},children:(0,L.jsxs)(s.Z,{sx:{mt:8,width:350,px:2},component:"form",children:[(0,L.jsxs)(c.ZP,{item:!0,sx:{display:"flex",justifyContent:"space-between",p:1},children:[(0,L.jsx)(f.Z,{color:"primary",children:null!==vn?"UPDATE NOMINEE":"ADD NEW NOMINEE"}),(0,L.jsx)(Z.Z,{size:20,onClick:function(){hn(!1,!0),cn(),fn()}})]}),(0,L.jsx)(h.Z,{}),(0,L.jsx)(m.Z,{name:"name",value:ie,margin:"dense",error:!!Ne,placeholder:"Name*",onChange:sn,id:"data-name"}),(0,L.jsx)(c.ZP,{item:!0,children:(0,L.jsx)(j.gc,{id:"relationID",name:"relation",onChange:function(e,n){return function(e){var n=null===e||void 0===e?void 0:e.value;w(n),"Others"!==n&&(he(""),R("")),null!==n&&void 0!==n&&n.length&&n.trim()&&Ze("")}(n)},options:N,value:(0,A.NA)(N,C),renderInput:function(e){return(0,L.jsx)(m.Z,(0,a.Z)((0,a.Z)({},e),{},{placeholder:"Relation*"}))}})}),"Others"===C&&(0,L.jsx)(m.Z,{margin:"dense",name:"relation1",value:I,error:!!fe,placeholder:"Relation Name*",onChange:sn,id:"data-Relation",style:{borderColor:fe?"red":""}}),(0,L.jsx)(m.Z,{type:"email",name:"email",margin:"dense",value:P,error:!!je,placeholder:"Email*",onChange:sn,id:"data-email"}),(0,L.jsx)(m.Z,{type:"tel",maxLength:10,margin:"dense",value:Y,error:!!Ce,name:"phone",onChange:sn,onKeyPress:function(e){return(0,g.ZP)(e)},id:"data-price1",placeholder:"Contact No.*"}),(0,L.jsx)(b.Z,{sx:{margin:0},control:(0,L.jsx)(E.Z,{sx:{padding:0},color:"primary",name:"whatsapp",size:"small",checked:null!==vn?ee===Y:K,onChange:function(){return ne(K?"":Y),void Q(!K)}}),label:(0,L.jsx)(f.Z,{fontSize:"15px",children:"Whatsapp same as Contact"})}),(0,L.jsx)(m.Z,{type:"tel",maxLength:10,value:K?Y:ee,name:"phoneC",error:!!ke,disabled:null!==vn?ee===Y:K,onChange:sn,onKeyPress:function(e){return(0,g.ZP)(e)},id:"data-price",placeholder:"WhatsApp"}),(0,L.jsx)(m.Z,{value:M,margin:"dense",name:"address",placeholder:"Address",onChange:function(e){return sn(e)},id:"data-Address",multiline:!0,minRows:2}),(0,L.jsx)("div",{children:We.map((function(e){return(0,L.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,L.jsxs)(f.Z,{sx:{color:"blue",cursor:"pointer"},onClick:function(){return n=e.id,Xe(n),Je(!0),void We.forEach((function(e){e.id===n&&Ge(e.question)}));var n},children:["".concat(e.id,". ").concat(e.question)," "]})," ",(0,L.jsx)(x.Z,{size:"1",onClick:function(){return function(e){var n,t=(0,r.Z)(We);t=t.filter((function(n){return n.id!==e})),null!==(n=t)&&void 0!==n&&n.length&&t.forEach((function(e,n){e.id=n+1})),Fe((0,r.Z)(t))}(e.id)}})]},e.id)}))}),(null===We||void 0===We?void 0:We.length)<3&&(0,L.jsx)(p.Z,{disabled:3===(null===We||void 0===We?void 0:We.length),onClick:tn,children:"Add Secret Questions"}),(0,L.jsxs)(v.Z,{spacing:3,direction:"row",sx:{mt:2,justifyContent:"end"},children:[(0,L.jsx)(j.ZP,{varient:"outlined",label:null!==vn?"Cancel":"Reset",onClick:function(){null!==vn&&hn(!1,!0),cn(),fn()}}),(0,L.jsx)(j.ZP,{onClick:function(e){return dn(e)},disabled:!(null!==We&&void 0!==We&&We.length),label:null!==vn?e.isLoading?(0,L.jsx)(D.Z,{}):"Update":e.isLoading?(0,L.jsx)(D.Z,{}):"Add"})]}),(0,L.jsx)(k,{modal:$e,secrets:We,toggleModal:tn,fname:Te,setfname:Ge,ftype:Ue,setftype:qe,editID:He,clearCustomField:nn,handleSecrets:en})]})})}},83356:function(e,n,t){t.r(n);var a=t(74165),i=t(15861),r=t(29439),o=t(47313),l=t(44610),u=t(9506),s=t(51771),d=t(19641),c=t(71003),f=t(56605),h=t(19536),p=(t(48737),t(34203)),v=t(12613),m=t(35192),Z=t(71207),x=t(66135),g=t(29748),j=t(45561),D=t(51427),S=(t(97729),t(46417)),A=function(e){return(0,S.jsx)(m.Z,{onClick:function(){var n;return!(null!==(n=e.row.usage)&&void 0!==n&&n.length)&&e.setRow()}})},C=function(e){return(0,S.jsx)(Z.Z,{onClick:function(){return e.currentData(e.row)}})};n.default=(0,x.$j)((function(e){var n=e.reducer.dataList,t=void 0===n?{}:n;return{dataList:t,listLoading:t.totalRecordsLoading,filteredData:t.filteredData}}),(function(e){return{deleteData:function(n){return e(j.SD.endpoints.deleteData.initiate(n))},updateData:function(n){return e(j.SD.endpoints.updateData.initiate(n))},addData:function(n){return e(j.SD.endpoints.addData.initiate(n))},getData:function(n){return e(j.SD.endpoints.getData.initiate(n))},filterData:function(n){return e((0,D.cm)(n))},dataTest:function(){return e({type:"GET_ALL_DATA_LOADING",data:!0})}}}))((function(e){var n=[{label:"Edit",width:40,numeric:!1,cell:function(e){return(0,S.jsx)(C,{row:e,currentData:ue})}},{label:"Name",width:100,numeric:!1,id:"name",cell:function(e){return(0,S.jsx)("p",{title:e.name,children:e.name})}},{label:"Relation",width:80,numeric:!1,id:"relation",cell:function(e){return(0,S.jsx)("p",{title:(null===e||void 0===e?void 0:e.relation1)||(null===e||void 0===e?void 0:e.relation),children:(null===e||void 0===e?void 0:e.relation1)||(null===e||void 0===e?void 0:e.relation)})}},{label:"Contact",width:80,numeric:!1,id:"primaryContact",cell:function(e){return(0,S.jsx)("p",{title:e.primaryContact,children:e.primaryContact})}},{label:"Email",width:100,numeric:!1,id:"email",cell:function(e){return(0,S.jsx)("p",{title:e.email,children:e.email})}},{label:"Status",width:40,numeric:!1,id:"unused",cell:function(e){var n;return null!==(n=e.usage)&&void 0!==n&&n.length?(0,S.jsx)(l.Z,{label:"Used",color:"primary",sx:{width:"80px"}}):(0,S.jsx)(l.Z,{label:"Unused",sx:{width:"80px"}})}},{label:"",width:40,cell:function(e){return(0,S.jsx)(A,{row:e,setRow:function(){O(!0),b(e)},deleteRow:re})}}],t=(0,o.useState)({}),m=(0,r.Z)(t,2),Z=(m[0],m[1]),x=(0,o.useState)([]),j=(0,r.Z)(x,2),D=j[0],w=j[1],y=(0,o.useState)(null),L=(0,r.Z)(y,2),k=L[0],b=L[1],E=(0,o.useState)(!1),_=(0,r.Z)(E,2),N=_[0],O=_[1],I=(0,o.useState)([]),R=(0,r.Z)(I,2),T=R[0],G=R[1],P=(0,o.useState)(""),z=(0,r.Z)(P,2),U=z[0],q=z[1],M=(0,o.useState)(!1),V=(0,r.Z)(M,2),W=V[0],F=V[1],Y=(0,o.useState)(null),B=(0,r.Z)(Y,2),$=B[0],J=B[1],K=(0,o.useState)(""),Q=(0,r.Z)(K,2),H=Q[0],X=Q[1],ee=(0,o.useState)(!1),ne=(0,r.Z)(ee,2),te=ne[0],ae=ne[1];(0,o.useEffect)((function(){var n,t;if(null!==(n=e.dataList)&&void 0!==n&&n.allData){var a=e.dataList.allData;a&&a.forEach((function(e,n){if(e.date){var t=new Date(e.date),i=new Intl.DateTimeFormat("en",{year:"numeric"}).format(t),r=new Intl.DateTimeFormat("en",{month:"long"}).format(t);a[n].seperator="".concat(r,", ").concat(i)}}));var i=(t="seperator",a.reduce((function(e,n){return e[n[t]]||(e[n[t]]=[]),e[n[t]].push(n),e}),{}));Z(i)}w(e.dataList.data),G(e.dataList.filteredData)}),[e.dataList]),(0,o.useEffect)((function(){var n;e.filteredData&&(null===(n=e.filteredData)||void 0===n?void 0:n.length)>0&&(w(e.filteredData),G(e.filteredData))}),[e.filteredData]),(0,o.useEffect)((function(){e.getData()}),[]);var ie=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];F(e),!0===n&&(J(null),X(n))},re=function(n){e.deleteData(n)},oe=function(){var n=(0,i.Z)((0,a.Z)().mark((function n(t){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ae(!0),n.prev=1,n.next=4,e.addData(t);case 4:ae(!1),ie(!1,!0),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),ae(!1),v.A9;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}(),le=function(){var n=(0,i.Z)((0,a.Z)().mark((function n(t){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ae(!0),n.prev=1,n.next=4,e.updateData(t);case 4:ae(!1),ie(!1,!0),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),ae(!1),v.A9;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}(),ue=function(e){J(e),ie(!0)};return(0,S.jsxs)(u.Z,{children:[(0,S.jsx)(p.Z,{handleConfirm:function(){re(k),O(!1)},isOpen:N,closeModal:function(){return O(!1)}}),(0,S.jsx)(s.Z,{sx:{pl:{sm:2},pr:{xs:0}},children:(0,S.jsxs)(d.ZP,{container:!0,justifyContent:"space-between",spacing:2,children:[(0,S.jsx)(d.ZP,{item:!0,children:(0,S.jsx)(c.Z,{variant:"outlined",onClick:function(){return ie(!0,!0)},children:"Add Nominee"})}),(0,S.jsx)(d.ZP,{item:!0,children:(0,S.jsx)(f.Z,{onChange:function(n){return function(n){q(n.target.value),e.filterData(n.target.value)}(n)},placeholder:"Search"})})]})}),(0,S.jsx)(d.ZP,{container:!0,xs:12,sm:9,sx:{pr:1},children:(0,S.jsx)(h.Z,{sx:{width:"100%"}})}),e.listLoading?(0,S.jsx)(v.$j,{}):(0,S.jsx)(v.Gn,{columns:n,ad:!0,rows:U.length?T:D}),(0,S.jsx)(g.Z,{show:W,data:$,updateData:le,callAddNomineeApi:oe,isLoading:te,handleSidebar:ie,addNew:H})]})}))},85585:function(e,n,t){var a=t(54750),i=t(46417);n.Z=(0,a.Z)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}),"CloseOutlined")}}]);