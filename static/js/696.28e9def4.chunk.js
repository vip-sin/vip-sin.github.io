"use strict";(self.webpackChunkvpn=self.webpackChunkvpn||[]).push([[696],{30177:function(e,t,n){n.d(t,{Z:function(){return F}});var r=n(4942),a=n(29439),s=n(47313),u=n(74165),c=n(15861),i=n(95157),o=n(1413),l=n(93433),d=n(45987);var f=function(e){var t=(0,s.useRef)();return(0,s.useEffect)((function(){t.current=e}),[e]),t.current},p=n(46417),v=["focus","autoFocus"];function h(e){var t=e.focus,n=e.autoFocus,r=(0,d.Z)(e,v),a=(0,s.useRef)(),u=f(!!t);return(0,s.useLayoutEffect)((function(){a.current&&(t&&n&&a.current.focus(),t&&n&&t!==u&&(a.current.focus(),a.current.select()))}),[n,t,u]),(0,p.jsx)("input",(0,o.Z)({ref:a},r))}var Z=(0,s.memo)(h),m=["length","isNumberInput","autoFocus","disabled","onChangeOTP"];function x(e){var t=e.length,n=e.isNumberInput,r=e.autoFocus,u=e.disabled,c=e.onChangeOTP,i=(0,d.Z)(e,m),f=(0,s.useState)(0),v=(0,a.Z)(f,2),h=v[0],x=v[1],g=(0,s.useState)([""]),b=(0,a.Z)(g,2),j=b[0],w=b[1],y=(0,s.useCallback)((function(e){var t=e.join("");c(t)}),[c]),S=(0,s.useCallback)((function(e){var t=e;return n&&t?Number(t)>=0?t:"":t}),[n]),k=(0,s.useCallback)((function(e){var t=(0,l.Z)(j);t[h]=e[0]||"",w(t),y(t)}),[h,y,j]),C=(0,s.useCallback)((function(e){var n=Math.max(Math.min(t-1,e),0);x(n)}),[t]),D=(0,s.useCallback)((function(){C(h-1)}),[h,C]),I=(0,s.useCallback)((function(){C(h+1)}),[h,C]),A=(0,s.useCallback)((function(e){return function(){C(e)}}),[C]),Q=(0,s.useCallback)((function(e){var t=S(e.currentTarget.value);t?(k(t),I()):e.preventDefault()}),[k,I,S]),O=(0,s.useCallback)((function(){x(-1)}),[]),E=(0,s.useCallback)((function(e){var t=e.key;switch(t){case"Backspace":case"Delete":e.preventDefault(),j[h]?k(""):D();break;case"ArrowLeft":e.preventDefault(),D();break;case"ArrowRight":e.preventDefault(),I();break;default:t.match(/^[^a-zA-Z0-9]$/)&&e.preventDefault()}}),[h,k,I,D,j]),P=(0,s.useCallback)((function(e){e.preventDefault();var n=e.clipboardData.getData("text/plain").trim().slice(0,t-h).split("");if(n){var r=0,a=(0,l.Z)(j);a.forEach((function(e,t){if(t>=h){var s=S(n.shift()||e);s&&(a[t]=s,r=t)}})),w(a),x(Math.min(r+1,t-1))}}),[h,S,t,j]);return(0,p.jsx)("div",(0,o.Z)((0,o.Z)({},i),{},{children:Array(t).fill("").map((function(e,t){return(0,p.jsx)(Z,{type:n?"number":"text",focus:h===t,value:j&&j[t],autoFocus:r,onFocus:A(t),onChange:Q,onKeyDown:E,onBlur:O,onPaste:P,style:{width:"3rem",margin:"3rem 1rem",padding:"1rem"},disabled:u},"SingleInput-".concat(t))}))}))}var g=(0,s.memo)(x),b=n(71003),j=n(10498),w=function(e){var t=e.setUserID,n=e.userData,r=e.otpKey,o=e.user,l=void 0===o?null:o,d=(0,i.n3)(),f=(0,a.Z)(d,1)[0],v=(0,i.f)(),h=(0,a.Z)(v,2),Z=h[0],m=h[1].isFetching,x=parseInt("00"),w=parseInt("90"),y=parseInt("10"),S=(0,s.useState)(w),k=(0,a.Z)(S,2),C=k[0],D=k[1],I=(0,s.useState)(x),A=(0,a.Z)(I,2),Q=A[0],O=A[1],E=(0,s.useState)(y),P=(0,a.Z)(E,2),q=P[0],N=P[1],F=(0,s.useState)(),M=(0,a.Z)(F,2),T=M[0],R=M[1],z=(0,s.useState)(!1),V=(0,a.Z)(z,2),_=V[0],W=V[1],U=(0,s.useState)(0),B=(0,a.Z)(U,2),H=B[0],K=B[1],L=(0,s.useState)(!1),J=(0,a.Z)(L,2),X=J[0],$=J[1],G=(0,s.useState)(""),Y=(0,a.Z)(G,2),ee=Y[0],te=Y[1];function ne(){return(ne=(0,c.Z)((0,u.Z)().mark((function e(t){var n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(""),K(0),N(30),O(0),D(20),n={_id_OTP:"ID pertaining to previous ID"},e.prev=6,e.next=9,f(n);case 9:te(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})))).apply(this,arguments)}function re(){return(re=(0,c.Z)((0,u.Z)().mark((function e(a){var s;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee||W(!0),e.prev=1,e.next=4,Z({otp:ee,key:r});case 4:"ok"===(s=e.sent)?t((null===n||void 0===n?void 0:n.phone)||(null===l||void 0===l?void 0:l.email)):R("expired"===s?"OTP expired":"Invalid OTP"),clearInterval(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("first e",e.t0);case 12:clearInterval();case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return(0,s.useEffect)((function(){var e=setInterval((function(){C>0&&D(C-1),0===C&&(0===Q?(clearInterval(e),$(!0)):(O(Q-1),D(59))),q>0&&N(q-1),0===q&&(K(1),N(30))}),1e3);return function(){clearInterval(e)}})),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(g,{autoFocus:!0,length:4,onChangeOTP:function(e){return te(e)}}),(0,p.jsxs)("div",{style:{padding:"25px",textAlign:"center"},children:[(0,p.jsx)("div",{children:0===Q&&0===C?null:(0,p.jsxs)("span",{style:{fontWeight:"600"},children:[Q,":",C<10?"0".concat(C):C]})}),(0,p.jsx)("div",{children:0===Q&&C<1&&!T&&"Timed out!!"}),_?(0,p.jsx)(j.C,{msg:"Invalid Otp Entered"}):(0,p.jsx)(b.Z,{sx:{mt:3,mb:2,pointerEvents:H>0?"":"none"},disabled:!(H>0),onClick:function(e){return ne.apply(this,arguments)},children:"Resend OTP"}),T&&(0,p.jsx)(j.C,{msg:T})]}),(0,p.jsx)(b.Z,{variant:"contained",sx:{mt:3,mb:2},type:"submit",fullWidth:!0,disabled:X||4!==ee.length||m,onClick:function(e){return re.apply(this,arguments)},children:"Verify OTP"})]})},y=n(35271),S=n(47605),k=n(9506),C=n(8047),D=n(31881),I=n.n(D),A=n(97729),Q=n(57204),O=n(69746),E=n(56605),P=n(47992),q=function(e){var t=e.editDetails,n=(0,o.Z)({},t).secrets,r=void 0===n?{}:n,i=r.secretQuestion1,l=void 0===i?{}:i,d=r.secretQuestion2,f=void 0===d?{}:d,v=r.secretQuestion3,h=void 0===v?{}:v,Z=(0,s.useState)(!1),m=(0,a.Z)(Z,2),x=m[0],g=m[1],w=(0,s.useState)(l),y=(0,a.Z)(w,2),S=y[0],k=y[1],C=(0,s.useState)(f),D=(0,a.Z)(C,2),q=D[0],N=D[1],F=(0,s.useState)(h),M=(0,a.Z)(F,2),T=M[0],R=M[1],z=(0,s.useState)(""),V=(0,a.Z)(z,2),_=V[0],W=V[1],U=(0,s.useState)(""),B=(0,a.Z)(U,2),H=B[0],K=B[1],L=(0,s.useState)(""),J=(0,a.Z)(L,2),X=J[0],$=J[1],G=(0,s.useState)(),Y=(0,a.Z)(G,2),ee=Y[0],te=Y[1],ne=function(){var e=(0,c.Z)((0,u.Z)().mark((function e(t){var n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"0e09ca7a4644c68c6c002ed1338bb40b",e.next=3,crypto.pbkdf2Sync(t,"0e09ca7a4644c68c6c002ed1338bb40b",1e3,20,"sha512").toString("hex");case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,p.jsxs)(Q.Z,{action:"/",onSubmit:function(e){g(!0),e.preventDefault();var t=JSON.parse(sessionStorage.getItem("logInUserData")),n=sessionStorage.getItem("secretkey");ne(n).then((function(n){e.preventDefault();var r={_id:t._id},a={};_&&(a.secretQuestion1=S,a.secretAnswer1=(0,A.mq)(n,_)),H&&(a.secretQuestion2=q,a.secretAnswer2=(0,A.mq)(n,H)),X&&(a.secretQuestion3=T,a.secretAnswer3=(0,A.mq)(n,X)),Object.keys(a).length&&(r.secrets=a,I().post("/backendapi/user/update/secrets",r,{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}).then((function(e){})).catch((function(e){te("Something went wrong. Please try after sometime!!")})))}))},children:[(0,p.jsxs)(O.Z,{className:"form-label-group",children:[(0,p.jsx)(E.Z,{type:"text",id:"Question 1",name:"Question 1",placeholder:"Secret Question 1",required:!0,value:S,onChange:function(e){return k(e.target.value)}}),(0,p.jsx)(P.Z,{children:"Secret Question 1"})]}),(0,p.jsxs)(O.Z,{className:"form-label-group",children:[(0,p.jsx)(E.Z,{type:"password",id:"Question 1",name:"Question 1",placeholder:"Secret Answer 1",value:_,onChange:function(e){return W(e.target.value)}}),(0,p.jsx)(P.Z,{children:"Secret Answer 1"})]}),(0,p.jsxs)(O.Z,{className:"form-label-group",children:[(0,p.jsx)(E.Z,{type:"text",id:"Question 2",name:"Question 2",placeholder:"Secret Question 2",required:!0,value:q,onChange:function(e){return N(e.target.value)}}),(0,p.jsx)(P.Z,{children:"Secret Question 2"})]}),(0,p.jsxs)(O.Z,{className:"form-label-group",children:[(0,p.jsx)(E.Z,{type:"password",id:"Answer 2",name:"Answer 2",placeholder:"Secret Answer 2",value:H,onChange:function(e){return K(e.target.value)}}),(0,p.jsx)(P.Z,{children:"Secret Answer 2"})]}),(0,p.jsxs)(O.Z,{className:"form-label-group",children:[(0,p.jsx)(E.Z,{type:"text",id:"Question 3",name:"Question 3",placeholder:"Secret Question 3",required:!0,value:T,onChange:function(e){return R(e.target.value)}}),(0,p.jsx)(P.Z,{children:"Secret Question 3"})]}),ee&&(0,p.jsx)(j.C,{msg:ee}),(0,p.jsxs)(O.Z,{className:"form-label-group",children:[(0,p.jsx)(E.Z,{type:"password",id:"Answer 3",name:"Answer 3",placeholder:"Secret Answer 3",value:X,onChange:function(e){return $(e.target.value)}}),(0,p.jsx)(P.Z,{children:"Secret Answer 3"})]}),(0,p.jsx)("div",{className:"d-flex justify-content-between",children:(0,p.jsx)(b.Z.Ripple,{color:"warning",type:"submit",disabled:x,children:"Update"})})]})},N=function(e){var t=e.user,n=(0,s.useState)({}),i=(0,a.Z)(n,2),l=i[0],d=i[1],f=function(){var e=(0,c.Z)((0,u.Z)().mark((function e(t){var n,a,s,c,i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),null===(n=t.target)||void 0===n||!n.value){e.next=7;break}return e.next=4,(0,A.c_)(null===(a=t.target)||void 0===a?void 0:a.value);case 4:c=e.sent,i=null===(s=t.target)||void 0===s?void 0:s.name,d((0,o.Z)((0,o.Z)({},l),{},(0,r.Z)({},i,c)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=t.secrets,h=void 0===v?{}:v,Z=h.secretQuestion1,m=void 0===Z?"":Z,x=h.secretQuestion2,g=void 0===x?"":x,j=h.secretQuestion3,w=void 0===j?"":j;return(0,p.jsxs)(Q.Z,{sx:{width:"100%"},children:[(0,p.jsx)(E.Z,{type:"password",id:"passwordq1",placeholder:m,name:"secretAnswer1",onChange:f}),(0,p.jsx)("div",{style:{textAlign:"center"},children:"OR"}),(0,p.jsx)(E.Z,{type:"password",id:"passwordq2",placeholder:g,name:"secretAnswer2",onChange:f}),(0,p.jsx)("div",{style:{textAlign:"center"},children:"OR"}),(0,p.jsx)(E.Z,{type:"password",id:"passwordq3",placeholder:w,name:"secretAnswer3",onChange:f}),(0,p.jsx)(b.Z,{onClick:function(t){t.preventDefault(),e.changePass(l),Object.keys(l).forEach(function(){var t=(0,c.Z)((0,u.Z)().mark((function t(n){return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l[n]){t.next=3;break}return e.changePass({ques:n,ans:l[n]}),t.abrupt("return");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},children:"Next"})]})},F=function(e){var t=e.validatedmobile,n=e.change,u=e.category,c=e.email,o=e.pwdChanged,l=e.handleSuccess,d=(0,i.dX)(),f=(0,a.Z)(d,2),v=f[0],h=f[1].data,Z=(0,s.useState)(null),m=(0,a.Z)(Z,2),x=m[0],g=m[1],j=(0,s.useState)({countryCode:"91",Mobile:""}),D=(0,a.Z)(j,2),I=D[0],A=D[1],Q=(0,s.useState)(""),O=(0,a.Z)(Q,2),E=O[0],P=O[1],F=(0,s.useState)(null),M=(0,a.Z)(F,2),T=M[0],R=M[1],z=(0,s.useState)(""),V=(0,a.Z)(z,2),_=V[0],W=V[1];(0,s.useEffect)((function(){return function(){g(null),A({countryCode:"91",Mobile:""}),P(""),R(null),W("")}}),[]),(0,s.useEffect)((function(){n&&A({Email:c})}),[n]),(0,s.useEffect)((function(){(null===t||void 0===t?void 0:t.key)&&W(t.key)}),[t]),(0,s.useEffect)((function(){if(h){var e=h.recoveryId,t=h.recoveryOtp;g(e),W(null===t||void 0===t?void 0:t.key)}}),[h]);var U=function(e){var t,n;e.preventDefault();var a=null===(t=e.target)||void 0===t?void 0:t.value,s=null===(n=e.target)||void 0===n?void 0:n.name;A((0,r.Z)({},s,a))},B=function(e){e.preventDefault(),v(I)};return(0,p.jsxs)(s.Fragment,{children:["success"===o&&(0,p.jsxs)(S.Z,{onClick:function(){return l},children:["Password Changed successfully...",(0,p.jsx)("span",{style:{color:"var(--warning)"},children:" SignIn !!"})]}),"failure"===o&&(0,p.jsx)(S.Z,{children:" Something went wrong!!!"}),T?(0,p.jsx)(y.Z,{recoveryID:E,changePass:T,userId:x._id}):E?"secrets"===u?(0,p.jsx)(q,{editDetails:x,changePass:R}):(0,p.jsx)(N,{user:x,changePass:R}):null!==_&&void 0!==_&&_.length?(0,p.jsx)(w,{userData:I,setUserID:P,otpKey:_,user:x}):(0,p.jsxs)(k.Z,{component:"form",onSubmit:function(e){return B(e)},sx:{mt:1},children:[(0,p.jsx)(C.Z,{required:!0,fullWidth:!0,placeholder:"Email",name:"Email",autoFocus:!0,value:c,id:"email",onChange:U,disabled:!!I.Mobile||c}),(0,p.jsx)(S.Z,{align:"center",sx:{py:2},children:"OR"}),(0,p.jsx)(C.Z,{required:!0,fullWidth:!0,placeholder:"Mobile",disabled:!!I.Email||c,name:"Mobile",onChange:U}),(0,p.jsx)(b.Z,{type:"submit",fullWidth:!0,disabled:!I.Mobile&&!I.Email,onClick:B,variant:"contained",sx:{mt:3,mb:2},children:"Validate"})]})]})}},29137:function(e,t,n){var r=n(64836);t.Z=void 0;var a=r(n(45045)),s=n(46417),u=(0,a.default)((0,s.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOutlined");t.Z=u}}]);