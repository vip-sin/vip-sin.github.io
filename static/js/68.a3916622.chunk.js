(self.webpackChunkvpn=self.webpackChunkvpn||[]).push([[68],{30976:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return W}});var a=t(1413),i=t(74165),o=t(15861),r=t(29439),l=t(47313),s=t(48737),u=t(61474),d=t(40229),c=t(71535),v=t(89870),p=t(22449),f=t(80699),h=t(68847),m=t(96900),x=t(71363),Z=t(34940),g=t(31616),j=t(12613),w=t(54727),b=t(71207),C=t(35192),D=t(46095),S=t(46417),L=(0,D.Z)((0,S.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}),"FileDownload"),k=t(18377),y=t(66135),A=t(45959),P=t(49205),E=t(82500),I=t(62463),_=t(8586),N=t(39653),O=t(86282),M=JSON.parse(sessionStorage.getItem("dropdowns")).dailySpendsLabels,z=function(e){var n=e.data,t=(0,l.useState)(""),i=(0,r.Z)(t,2),o=i[0],s=i[1],v=(0,l.useState)("other"),p=(0,r.Z)(v,2),f=p[0],h=p[1],m=(0,l.useState)(""),g=(0,r.Z)(m,2),b=g[0],C=g[1],D=(0,l.useState)(""),L=(0,r.Z)(D,2),k=L[0],y=L[1],A=(0,l.useState)(""),P=(0,r.Z)(A,2),z=P[0],F=P[1],H=(0,l.useState)(""),T=(0,r.Z)(H,2),R=T[0],J=T[1],W=(0,l.useState)(""),U=(0,r.Z)(W,2),V=U[0],G=U[1],K=(0,l.useState)(!1),$=(0,r.Z)(K,2),q=$[0],B=$[1],Q=function(){J(""),G(""),s(""),h(""),C(""),y(""),F("")};(0,l.useEffect)((function(){if(n){var e=n.id,t=n.name,a=n.relation,i=n.address,o=n.date,r=n.primaryContact;J(e),G(t),s(a),h(null===n||void 0===n?void 0:n.relation1),y(i),C(o),F(r)}n&&!q||Q(),B(!1)}),[n]);var X=function(e){var n=e.target.name,t=e.target.value;switch(n){case"item":G(t);break;case"description":y(t);break;case"date":C(t);break;case"price":t>=0&&t<=999999999999999&&F(t);break;case"relation1":h(t)}},Y=e.handleSidebar,ee=e.data,ne=e.show;return(0,S.jsx)(E.Z,{anchor:"right",open:ne,onClose:function(){},onOpen:function(){},children:(0,S.jsxs)(d.Z,{sx:{mt:10,width:350,px:2},component:"form",children:[(0,S.jsxs)(c.ZP,{item:!0,sx:{display:"flex",justifyContent:"space-between",p:1},children:[(0,S.jsx)(x.Z,{children:null!==ee?"UPDATE SPEND DETAILS":"ADD NEW SPEND"}),(0,S.jsx)(_.Z,{size:20,onClick:function(){Y(!1,!0),Q()}})]}),(0,S.jsx)(Z.Z,{}),(0,S.jsx)(N.Z,{name:"item",value:V,margin:"dense",placeholder:"Item *",onChange:X,id:"data-name"}),(0,S.jsx)(c.ZP,{item:!0,sx:{mt:1},children:(0,S.jsx)(u.gc,{id:"labelId",name:"label",value:(0,O.NA)(M,o),onChange:function(e,n){return function(e){var n=null===e||void 0===e?void 0:e.value;s(n),"Others"!==n&&h("")}(n)},options:M,renderInput:function(e){return(0,S.jsx)(N.Z,(0,a.Z)((0,a.Z)({},e),{},{placeholder:"Select Label *"}))}})}),"Others"===o&&(0,S.jsx)(N.Z,{margin:"dense",name:"relation1",value:f,placeholder:"Label Name",onChange:X,id:"data-name"}),(0,S.jsx)(N.Z,{type:"date",value:b,name:"date",margin:"dense",placeholder:"Enter Date",id:"data-name",max:"9999-12-31",min:"1900-01-01",onChange:X}),(0,S.jsx)(N.Z,{type:"number",onKeyPress:function(e){return(0,w.ZP)(e)},value:z,margin:"dense",id:"data-price",name:"price",max:999999999999999,placeholder:"Enter spend amount *",onChange:X}),(0,S.jsx)(N.Z,{type:"textarea",value:k,margin:"dense",name:"description",placeholder:"Description",id:"data-name",onChange:X}),(0,S.jsxs)(I.Z,{spacing:3,direction:"row",sx:{mt:3,justifyContent:"end"},children:[(0,S.jsx)(u.ZP,{varient:"outlined",label:null!==ee?"Cancel":"Reset",onClick:function(){null!==ee&&Y(!1,!0),Q()}}),(0,S.jsx)(u.ZP,{varient:"contained",onClick:function(){return function(){if(e.isLoading)return(0,S.jsx)(j.A9,{handleClick:function(){},openSnack:!0,openSnackMsg:null!==n?"Updating still in process":"Adding Spend in process",severity:"warning"});var t={relation:null===o||void 0===o?void 0:o.trim(),relation1:null===f||void 0===f?void 0:f.trim(),date:null===b||void 0===b?void 0:b.trim(),address:null===k||void 0===k?void 0:k.trim(),contact1:z,_id:null===R||void 0===R?void 0:R.trim(),name:null===V||void 0===V?void 0:V.trim()};null!==n?(t._id=n._id,t.usage=n.usage,e.updateData(t)):(B(!0),e.addData(t),Q())}()},disabled:function(){var t=!(null!==V&&void 0!==V&&V.length)||!(null!==o&&void 0!==o&&o.length)||"Others"===o&&!(null!==f&&void 0!==f&&f.length)||!z||!(null!==b&&void 0!==b&&b.length),a=null!==e.data&&V===(null===n||void 0===n?void 0:n.name)&&o===(null===n||void 0===n?void 0:n.relation)&&f===(null===n||void 0===n?void 0:n.relation1)&&k===(null===n||void 0===n?void 0:n.address)&&b===(null===n||void 0===n?void 0:n.date)&&z===(null===n||void 0===n?void 0:n.primaryContact);return t||a}(),label:null!==ee?"Update":"Add",isLoading:e.isLoading})]})]})})},F=JSON.parse(sessionStorage.getItem("dropdowns")).dailySpendsLabels,H=[{label:"Last 3 month",value:3},{label:"Last 6 month",value:6},{label:"Last 1 year",value:12},{label:"Last 3 years",value:36}],T=function(e){return(0,S.jsx)(b.Z,{size:15,onClick:function(){return e.currentData(e.row)}})},R=function(e){return(0,S.jsx)(C.Z,{size:15,onClick:function(){return e.setRow()}})},J=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.preventDefault();var a=s.P6.book_new(),i="Spenditure_Report.xlsx";if(t){var o=[];n[t].forEach((function(e){o.push({Month:e.seperator,Date:e.date,Label:e.label,Item:e.item,Amount:"\u20b9".concat(e.amount),Description:e.desc,"Created At":(0,w.p6)(e.updatedAt)})}));var r=s.P6.json_to_sheet(o),l=[{wch:14},{wch:10},{wch:25},{wch:20},{wch:7},{wch:25},{wch:10}];r["!cols"]=l,r.A1.s={font:{sz:24,bold:!0,color:{rgb:"FFAA00"}}},s.P6.book_append_sheet(a,r,t),i="Spediture_Report-".concat(t,".xlsx")}else Object.keys(n).forEach((function(e){var t=[];n[e].forEach((function(e){t.push({Month:e.seperator,Date:e.date,Label:e.label,Item:e.item,Amount:e.amount,Description:e.desc,"Created At":(0,w.p6)(e.updatedAt)})}));var i=s.P6.json_to_sheet(t);i["!cols"]=[{wch:14},{wch:10},{wch:25},{wch:20},{wch:7},{wch:25},{wch:10}],s.P6.book_append_sheet(a,i,e)}));(0,s.NC)(a,i)},W=(0,y.$j)((function(e){var n=e.reducer.dataList,t=n.expenseData,a=void 0===t?[]:t,i=n.allexpenseData,o=void 0===i?[]:i,r=n.spendLoading,l=void 0!==r&&r,s=JSON.parse(JSON.stringify(a));return s.map((function(e){var n,t=null===e||void 0===e||null===(n=e.date)||void 0===n?void 0:n.split("T");return e.date=null===t||void 0===t?void 0:t[0],e})),{allexpenseData:o,expenseData:s,spendLoading:l}}),(function(e){return{deleteData:function(n){return e(P.Id.endpoints.deleteData.initiate(n))},getExpenseData:function(n){return e(P.Id.endpoints.getData.initiate(n))},addExpenseData:function(n){return e(P.Id.endpoints.addData.initiate(n))},updateData:function(n){return e(P.Id.endpoints.updateData.initiate(n))}}}))((function(e){var n=(0,l.useState)([]),t=(0,r.Z)(n,2),s=t[0],b=t[1],C=(0,l.useState)(),D=(0,r.Z)(C,2),y=D[0],P=D[1],E=(0,l.useState)(!1),I=(0,r.Z)(E,2),_=I[0],N=I[1],M=(0,l.useState)(""),W=(0,r.Z)(M,2),U=W[0],V=W[1],G=(0,l.useState)(!1),K=(0,r.Z)(G,2),$=K[0],q=K[1],B=(0,l.useState)(null),Q=(0,r.Z)(B,2),X=Q[0],Y=Q[1],ee=(0,l.useState)(""),ne=(0,r.Z)(ee,2),te=ne[0],ae=ne[1],ie=(0,l.useState)({}),oe=(0,r.Z)(ie,2),re=oe[0],le=oe[1],se=(0,l.useState)(!1),ue=(0,r.Z)(se,2),de=ue[0],ce=ue[1],ve=[{label:"Edit",cell:function(e){return(0,S.jsx)(T,{row:e,currentData:je})}},{label:"Item",id:"item",cell:function(e){return e.item}},{label:"Description",id:"desc",cell:function(e){return e.desc}},{label:"Label",id:"label",cell:function(e){return(null===e||void 0===e?void 0:e.label1)||(null===e||void 0===e?void 0:e.label)}},{label:"Date",id:"date",cell:function(e){return(0,w.p6)(null===e||void 0===e?void 0:e.date)}},{label:"Amount",id:"amount",cell:function(e){return e.amount}},{label:"Delete",cell:function(e){return(0,S.jsx)(R,{row:e,setRow:function(){V(e),N(!0)}})}}],pe=e.spendLoading,fe=e.expenseData,he=e.allexpenseData;(0,l.useEffect)((function(){e.getExpenseData()}),[]),(0,l.useEffect)((function(){fe&&me(fe)}),[fe]);var me=function(e){e&&e.forEach((function(n,t){if(n.date){var a=new Date(n.date),i=new Intl.DateTimeFormat("en",{year:"numeric"}).format(a),o=new Intl.DateTimeFormat("en",{month:"long"}).format(a);e[t].seperator="".concat(o,", ").concat(i)}}));var n,t=(n="seperator",e.reduce((function(e,t){return e[t[n]]||(e[t[n]]=[]),e[t[n]].push(t),e}),{}));le(t)},xe=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];q(e),!0===n&&(Y(null),ae(!0))},Ze=function(){var n=(0,o.Z)((0,i.Z)().mark((function n(t){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ce(!0),n.prev=1,n.next=4,e.addExpenseData(t);case 4:ce(!1),j.A9,xe(!1,!0),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),ce(!1),j.A9;case 13:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}(),ge=function(){var n=(0,o.Z)((0,i.Z)().mark((function n(t){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ce(!0),n.prev=1,n.next=4,e.updateData(t);case 4:j.A9,xe(!1,!0),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),j.A9;case 11:return n.prev=11,ce(!1),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,8,11,14]])})));return function(e){return n.apply(this,arguments)}}(),je=function(e){e.name=e.item,e.relation=e.label,e.relation1=e.label1,e.address=e.desc,e.primaryContact=e.amount,Y(e),xe(!0)};return pe?(0,S.jsx)(A.Z,{}):(0,S.jsxs)(d.Z,{sx:{p:2},children:[(0,S.jsx)(g.Z,{handleConfirm:function(){e.deleteData(U),N(!1)},isOpen:_,closeModal:function(){return N(!1)}}),(0,S.jsx)(z,{show:$,data:X,updateData:ge,addData:Ze,isLoading:de,handleSidebar:xe,addNew:te}),(0,S.jsxs)(c.ZP,{container:!0,sx:{m:1},justifyContent:"space-between",alignItems:"center",children:[(0,S.jsx)(c.ZP,{item:!0,xs:12,sm:2,children:(0,S.jsx)(v.Z,{variant:"contained",onClick:function(){return xe(!0,!0)},children:"Add Expense"})}),(0,S.jsx)(c.ZP,{item:!0,xs:12,sm:3,children:(0,S.jsx)(u.gc,{isMulti:!0,id:"data-category",name:"label",value:null===s||void 0===s?void 0:s.map((function(e){var n=F.filter((function(n){return n.value===e.value}));return{value:n[0].value,label:n[0].label}})),onChange:function(e,n){return function(e){var n=[];(null===e||void 0===e?void 0:e.length)&&e.forEach((function(e){n.push(e)})),console.log(n),b(n)}(n)},options:F,renderInput:function(e){return(0,S.jsx)(j.nv,(0,a.Z)((0,a.Z)({},e),{},{placeholder:"Filter by label"}))}})}),(0,S.jsx)(c.ZP,{item:!0,xs:12,sm:2,children:(0,S.jsx)(u.gc,{id:"dateID",name:"date",onChange:function(e,n){return P(null===n||void 0===n?void 0:n.value)},options:H,value:(0,O.NA)(H,y),renderInput:function(e){return(0,S.jsx)(j.nv,(0,a.Z)((0,a.Z)({},e),{},{placeholder:"Date range filter",onChange:function(e){return P(null===e||void 0===e?void 0:e.value)}}))}})}),(0,S.jsx)(c.ZP,{item:!0,xs:12,sm:1,children:(0,S.jsx)(v.Z,{variant:"outlined",onClick:function(n){e.getData({labels:s.map((function(e){return e.value})).join(","),year:y})},children:"Filter"})}),(0,S.jsx)(c.ZP,{item:!0,xs:12,sm:2,children:(0,S.jsx)(p.Z,{onChange:function(e){return function(e){var n=e.target.value;if(n.length){var t=(fe.length?fe:null!==he&&void 0!==he?he:[]).filter((function(e){var t,a,i,o,r=e.desc,l=e.item,s=e.amount,u=e.label;return i=(null===r||void 0===r?void 0:r.toLowerCase().startsWith(n.toLowerCase()))||(null===l||void 0===l?void 0:l.toLowerCase().startsWith(n.toLowerCase()))||(null===(t=toString(s))||void 0===t?void 0:t.toLowerCase().startsWith(n.toLowerCase()))||(null===u||void 0===u?void 0:u.toLowerCase().includes(n.toLowerCase())),o=(null===r||void 0===r?void 0:r.toLowerCase().includes(n.toLowerCase()))||(null===l||void 0===l?void 0:l.toLowerCase().includes(n.toLowerCase()))||(null===(a=toString(s))||void 0===a?void 0:a.toLowerCase().includes(n.toLowerCase()))||(null===u||void 0===u?void 0:u.toLowerCase().includes(n.toLowerCase())),i||(!i&&o?o:null)}));me(t)}else me(he)}(e)},placeholder:"Search"})}),(0,S.jsx)(c.ZP,{item:!0,xs:12,sm:1,children:(0,S.jsx)(f.Z,{title:"Download",children:(0,S.jsx)(h.Z,{onClick:function(e){return J(e,re)},children:(0,S.jsx)(L,{})})})})]}),Object.keys(re).map((function(e,n){var t,a=null===(t=re[e])||void 0===t?void 0:t.map((function(e){return Number(e.amount)})).reduce((function(e,n){return e+n}));return(0,S.jsxs)(m.Z,{sx:{p:2},children:[(0,S.jsxs)(c.ZP,{container:!0,spacing:1,sx:{display:"flex",justifyContent:"space-around"},children:[(0,S.jsxs)(x.Z,{children:["Total Spends :",a]}),(0,S.jsx)(x.Z,{children:e}),(0,S.jsx)(k.Z,{onClick:function(n){return J(n,re,e)}})]}),(0,S.jsx)(Z.Z,{}),(0,S.jsx)(j.Gn,{columns:ve,rows:re[e]})]},n+1)}))]})}))},18377:function(e,n,t){"use strict";var a=t(46095),i=t(46417);n.Z=(0,a.Z)((0,i.jsx)("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download")},20067:function(){}}]);