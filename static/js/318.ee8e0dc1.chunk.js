"use strict";(self.webpackChunkvpn=self.webpackChunkvpn||[]).push([[318],{1087:function(e,n,t){t.d(n,{Z:function(){return o}});t(47313);var i=t(33505),a=t(36186),s=t(39338),r=t(6306),l=t(46417);function o(e){var n=e.collapseID,t=(e.setcollapseID,e.collapseItem),o=e.formatme,d=e.toggleCollapse;return(0,l.jsxs)(i.Z,{sx:{my:.9},expanded:n===t.id,onChange:function(){return d(t.id)},children:[(0,l.jsx)(s.Z,{expandIcon:(0,l.jsx)(r.Z,{}),children:o(t.title)}),(0,l.jsx)(a.Z,{children:t.content})]})}},18825:function(e,n,t){t.d(n,{z:function(){return o}});var i=t(19641),a=t(9506),s=t(56605),r=(t(47313),t(94843)),l=t(46417),o=function(e){return(0,l.jsxs)(i.ZP,{container:!0,sx:{px:2.5,py:1},children:[(0,l.jsx)(i.ZP,{item:!0,xs:6,children:(0,l.jsx)(r.ll,{title:e.heading})}),(0,l.jsx)(i.ZP,{item:!0,xs:6,children:(0,l.jsx)(a.Z,{display:"flex",justifyContent:"flex-end",children:(0,l.jsx)(s.Z,{onChange:function(n){return e.search(n.target.value)},placeholder:"Search"})})})]})}},69933:function(e,n,t){t.d(n,{r:function(){return Z}});var i=t(1413),a=t(93433),s=t(29439),r=t(47313),l=t(30712),o=t(13760),d=t(80614),c=t(44610),u=t(47605),h=t(71003),x=t(35898),v=t(12613),m=t(46417),Z=function(e){var n=(0,r.useState)(e.file?e.file:[]),t=(0,s.Z)(n,2),Z=t[0],f=t[1],p=(0,d.uI)({maxFiles:e.notMulti?1:5,multiple:!e.notMulti,onDrop:function(n){if(1===e.notMulti)e.setfilesOndrop(n),f(n.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})));else{if((Z.length?Z.filter((function(e){var t;return(null===e||void 0===e?void 0:e.name)===(null===(t=n[0])||void 0===t?void 0:t.name)})):[]).length)return(0,m.jsx)(v.A9,{handleClick:function(){},openSnack:!0,openSnackMsg:"File already added"});e.setfilesOndrop([].concat((0,a.Z)(Z),(0,a.Z)(n))),f([].concat((0,a.Z)(Z),(0,a.Z)(n)))}}}),g=p.getInputProps,j=p.open,S=null===Z||void 0===Z?void 0:Z.map((function(n){return(0,m.jsx)(c.Z,{sx:{m:1},label:(0,m.jsxs)(u.Z,{children:["".concat(n.name.length>15?"".concat(n.name.slice(0,10),"..."):n.name),(0,m.jsx)(l.Z,{size:15,sx:{margin:"-6px 6px"},onClick:function(t){t.stopPropagation(),function(n){1===(null===Z||void 0===Z?void 0:Z.length)&&e.setfilesParent([]),e.isMulti&&(f(Z.filter((function(e){return e!==n}))),e.setfilesParent(Z.filter((function(e){return e!==n}))))}(n)}})]},n.name),variant:"outlined"},n.name)}));return(0,r.useEffect)((function(){return function(){Z.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[Z]),(0,r.useEffect)((function(){e.resetDropzone&&f([])}),[e.resetDropzone]),(0,m.jsxs)(h.Z,{variant:"outlined",fullWidth:!0,sx:{display:"inline-block",my:1},children:[(0,m.jsxs)(x.Z,{onClick:j,children:[(0,m.jsx)(v.nv,(0,i.Z)({},g())),(S.length<=0||e.isMulti)&&(0,m.jsxs)(u.Z,{children:["Drag `n` drop Or Browse ",(0,m.jsx)(o.Z,{sx:{margin:"-6px 6px"}})]})]}),(0,m.jsx)("div",{children:S.length>0&&(0,m.jsx)("aside",{style:{display:"flex"},children:S})})]})}},29748:function(e,n,t){t.d(n,{Z:function(){return M}});var i=t(1413),a=t(74165),s=t(93433),r=t(15861),l=t(29439),o=t(47313),d=t(9506),c=t(49920),u=t(19641),h=t(47605),x=t(19536),v=t(71003),m=t(35898),Z=t(74212),f=t(8586),p=t(85585),g=t(54727),j=t(61474),S=t(85120),C=t(12613),P=t(79428),b=t(94469),y=t(33604),w=t(69625),D=t(46417);function k(e){var n=e.modal,t=e.toggleModal,a=e.fname,s=e.setfname,r=e.ftype,l=e.setftype,o=e.editID,d=e.clearCustomField,c=e.handleSecrets,u=e.secrets;return(0,D.jsxs)(b.Z,{open:n,fullWidth:!0,maxWidth:"xs",onClose:t,children:[(0,D.jsx)(y.Z,{children:"Add a secret question"}),(0,D.jsxs)(w.Z,{children:[(0,D.jsx)(j.gc,{name:"relation",options:P.DD.filter((function(e){var n,t,i;return e.value!==(null===u||void 0===u||null===(n=u[0])||void 0===n?void 0:n.question)&&e.value!==(null===u||void 0===u||null===(t=u[1])||void 0===t?void 0:t.question)&&e.value!==(null===u||void 0===u||null===(i=u[2])||void 0===i?void 0:i.question)})),onChange:function(e,n){return function(e){var n=null===e||void 0===e?void 0:e.value;s(n)}(n)},value:(0,P.NA)(P.DD,a),renderInput:function(e){return(0,D.jsx)(Z.Z,(0,i.Z)((0,i.Z)({},e),{},{placeholder:" Secret Question"}))}}),(0,D.jsx)(Z.Z,{type:"text",name:"Answer",margin:"normal",size:"small",fullWidth:!0,error:(null===r||void 0===r?void 0:r.length)<4||" "===r.charAt(0),value:r,placeholder:"Answer",onChange:function(e){l(e.target.value)}}),(0,D.jsxs)(m.Z,{spacing:3,direction:"row",sx:{mt:3,justifyContent:"start"},children:[(0,D.jsx)(j.ZP,{varient:"outlined",label:"Cancel",onClick:function(e){d()}}),(0,D.jsx)(j.ZP,{varient:"contained",label:o?"Update":"Add",disabled:!(null!==a&&void 0!==a&&a.length)||""===r.trim(),onClick:c})]})]})]})}var R=t(69173),A=t(49969),L=t(97729),E=JSON.parse(sessionStorage.getItem("dropdowns")).nomineeRelation;function M(e){var n=(0,o.useState)(),t=(0,l.Z)(n,2),b=t[0],y=t[1],w=(0,o.useState)(""),M=(0,l.Z)(w,2),I=M[0],V=M[1],O=(0,o.useState)(""),z=(0,l.Z)(O,2),N=z[0],F=z[1],U=(0,o.useState)(""),_=(0,l.Z)(U,2),B=_[0],W=_[1],T=(0,o.useState)(""),q=(0,l.Z)(T,2),Y=q[0],K=q[1],$=(0,o.useState)(!0),Q=(0,l.Z)($,2),H=Q[0],J=Q[1],G=(0,o.useState)(""),X=(0,l.Z)(G,2),ee=X[0],ne=X[1],te=(0,o.useState)(""),ie=(0,l.Z)(te,2),ae=ie[0],se=ie[1],re=(0,o.useState)(""),le=(0,l.Z)(re,2),oe=le[0],de=le[1],ce=(0,o.useState)(!1),ue=(0,l.Z)(ce,2),he=ue[0],xe=ue[1],ve=(0,o.useState)(""),me=(0,l.Z)(ve,2),Ze=me[0],fe=me[1],pe=(0,o.useState)(""),ge=(0,l.Z)(pe,2),je=ge[0],Se=ge[1],Ce=(0,o.useState)(""),Pe=(0,l.Z)(Ce,2),be=Pe[0],ye=Pe[1],we=(0,o.useState)(""),De=(0,l.Z)(we,2),ke=De[0],Re=De[1],Ae=(0,o.useState)(""),Le=(0,l.Z)(Ae,2),Ee=Le[0],Me=Le[1],Ie=(0,o.useState)(""),Ve=(0,l.Z)(Ie,2),Oe=Ve[0],ze=Ve[1],Ne=(0,o.useState)(""),Fe=(0,l.Z)(Ne,2),Ue=Fe[0],_e=Fe[1],Be=(0,o.useState)(""),We=(0,l.Z)(Be,2),Te=We[0],qe=We[1],Ye=(0,o.useState)([]),Ke=(0,l.Z)(Ye,2),$e=Ke[0],Qe=Ke[1],He=(0,o.useState)(!1),Je=(0,l.Z)(He,2),Ge=Je[0],Xe=Je[1],en=(0,o.useState)(""),nn=(0,l.Z)(en,2),tn=nn[0],an=nn[1],sn=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var n,t,i,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tn){e.next=9;break}return n=(0,s.Z)($e),e.next=4,(0,L.c_)(Te);case 4:t=e.sent,n.push({id:(null===n||void 0===n?void 0:n.length)+1,question:Ue,answer:t}),Qe((0,s.Z)(n)),e.next=17;break;case 9:return i=(0,s.Z)($e),r=i.findIndex((function(e){return e.id===tn})),i[r].question=Ue,e.next=14,(0,L.c_)(Te);case 14:i[r].answer=e.sent,Qe((0,s.Z)(i)),an("");case 17:Xe(!1),_e(""),qe("");case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rn=function(){_e(""),qe(""),Xe(!Ge)},ln=function(){Ge&&rn(),Xe(!Ge)};(0,o.useEffect)((function(){if(e.data){var n=e.data,t=n.id,i=n.name,a=n.relation,r=n.relation1,l=n.address,o=n.email,d=n.primaryContact,c=n.secondaryContact,u=e.data.secrets;Zn(),se(t),de(i),y(a),"Others"===a&&V(r),W(l),F(o),K(d),ne(c),(null===u||void 0===u?void 0:u.length)&&Qe((0,s.Z)(u))}else(null===e.data||he)&&(mn(),Zn());xe(!1)}),[e.data]);var on=function(){return ze("Enter Valid Name")},dn=function(){return ye("Enter Valid Email")},cn=function(){return Re("Enter Valid Contact No.")},un=function(){return Se("Enter Valid Relation")},hn=function(){return fe("Enter Valid Relation")},xn=function(e){var n,t=e.target.name,i=null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value;switch(t){case"name":de(i),null!==i&&void 0!==i&&i.length&&i.trim()?ze(""):on();break;case"email":F(i);var a=i.match(/^([A-Za-z0-9_\-.])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,})$/);i&&a&&i.trim()?ye(""):dn();break;case"address":W(i);break;case"phone":K(i),H&&ne(i),null!==i&&void 0!==i&&i.length&&10===i.length&&i.trim()&&g.Yd.test(i)?Re(""):cn();break;case"phoneC":ne(i),10===i.length&&i.trim()&&g.Yd.test(i)?Me(""):Me("Enter Valid whatsapp No."),(null===i||void 0===i||!i.length)&&Me("");break;case"relation":null!==i&&void 0!==i&&i.length&&i.trim()?Se(""):un();break;case"relation1":V(i),null!==i&&void 0!==i&&i.length&&i.trim()?fe(""):hn()}},vn=function(n){console.log("das"),n.preventDefault();var t=((null===oe||void 0===oe||!oe.length)&&on(),(null===N||void 0===N||!N.length)&&dn(),(null===Y||void 0===Y||!Y.length)&&cn(),(null===b||void 0===b||!b.length)&&un(),"Others"===b&&(null===I||void 0===I||!I.length)&&hn(),"Others"!==b&&fe(""),Oe||!(null!==oe&&void 0!==oe&&oe.length)||je||!(null!==b&&void 0!==b&&b.length)||Ze||"Others"===b&&!(null!==I&&void 0!==I&&I.length)||be||!(null!==N&&void 0!==N&&N.length)||ke||!(null!==Y&&void 0!==Y&&Y.length)||Ee);if(t&&C.A9,e.isLoading&&(C.A9,e.data),t||e.isLoading)console.log(t,"inValid");else{var i={relation:null===b||void 0===b?void 0:b.trim(),relation1:null===I||void 0===I?void 0:I.trim(),email:null===N||void 0===N?void 0:N.trim(),address:null===B||void 0===B?void 0:B.trim(),contact1:null===Y||void 0===Y?void 0:Y.trim(),contact2:null===ee||void 0===ee?void 0:ee.trim(),id:null===ae||void 0===ae?void 0:ae.trim(),name:null===oe||void 0===oe?void 0:oe.trim(),secrets:$e};null!==e.data?(i._id=e.data._id,i.usage=e.data.usage,e.updateData(i)):(xe(!0),e.callAddNomineeApi(i),mn(),Zn())}},mn=function(){de(""),Qe([]),y(""),V(""),F(""),W(""),K(""),ne("")},Zn=function(){ze(""),Re(""),Me(""),ye(""),fe("")},fn=e.handleSidebar,pn=e.show,gn=e.data;return(0,D.jsx)(c.Z,{anchor:"right",open:pn,onOpen:function(){},onClose:function(){},children:(0,D.jsxs)(d.Z,{sx:{mt:8,width:350,px:2},component:"form",children:[(0,D.jsxs)(u.ZP,{item:!0,sx:{display:"flex",justifyContent:"space-between",p:1},children:[(0,D.jsx)(h.Z,{color:"primary",children:null!==gn?"UPDATE NOMINEE":"ADD NEW NOMINEE"}),(0,D.jsx)(f.Z,{size:20,onClick:function(){fn(!1,!0),mn(),Zn()}})]}),(0,D.jsx)(x.Z,{}),(0,D.jsx)(Z.Z,{name:"name",value:oe,margin:"dense",error:!!Oe,placeholder:"Name*",onChange:xn,id:"data-name"}),(0,D.jsx)(u.ZP,{item:!0,children:(0,D.jsx)(j.gc,{id:"relationID",name:"relation",onChange:function(e,n){return function(e){var n=null===e||void 0===e?void 0:e.value;y(n),"Others"!==n&&(fe(""),V("")),null!==n&&void 0!==n&&n.length&&n.trim()&&Se("")}(n)},options:E,value:(0,P.NA)(E,b),renderInput:function(e){return(0,D.jsx)(Z.Z,(0,i.Z)((0,i.Z)({},e),{},{placeholder:"Relation*"}))}})}),"Others"===b&&(0,D.jsx)(Z.Z,{margin:"dense",name:"relation1",value:I,error:!!Ze,placeholder:"Relation Name*",onChange:xn,id:"data-Relation",style:{borderColor:Ze?"red":""}}),(0,D.jsx)(Z.Z,{type:"email",name:"email",margin:"dense",value:N,error:!!be,placeholder:"Email*",onChange:xn,id:"data-email"}),(0,D.jsx)(Z.Z,{type:"tel",maxLength:10,margin:"dense",value:Y,error:!!ke,name:"phone",onChange:xn,onKeyPress:function(e){return(0,g.ZP)(e)},id:"data-price1",placeholder:"Contact No.*"}),(0,D.jsx)(R.Z,{sx:{margin:0},control:(0,D.jsx)(A.Z,{sx:{padding:0},color:"primary",name:"whatsapp",size:"small",checked:null!==gn?ee===Y:H,onChange:function(){return ne(H?"":Y),void J(!H)}}),label:(0,D.jsx)(h.Z,{fontSize:"15px",children:"Whatsapp same as Contact"})}),(0,D.jsx)(Z.Z,{type:"tel",maxLength:10,value:H?Y:ee,name:"phoneC",error:!!Ee,disabled:null!==gn?ee===Y:H,onChange:xn,onKeyPress:function(e){return(0,g.ZP)(e)},id:"data-price",placeholder:"WhatsApp"}),(0,D.jsx)(Z.Z,{value:B,margin:"dense",name:"address",placeholder:"Address",onChange:function(e){return xn(e)},id:"data-Address",multiline:!0,minRows:2}),(0,D.jsx)("div",{children:$e.map((function(e){return(0,D.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,D.jsxs)(h.Z,{sx:{color:"blue",cursor:"pointer"},onClick:function(){return function(e){an(e),Xe(!0),$e.forEach((function(n){n.id===e&&(qe(n.answer),_e(n.question))}))}(e.id)},children:["".concat(e.id,". ").concat(e.question)," "]})," ",(0,D.jsx)(p.Z,{size:"1",onClick:function(){return function(e){var n,t=(0,s.Z)($e);t=t.filter((function(n){return n.id!==e})),null!==(n=t)&&void 0!==n&&n.length&&t.forEach((function(e,n){e.id=n+1})),Qe((0,s.Z)(t))}(e.id)}})]},e.id)}))}),(null===$e||void 0===$e?void 0:$e.length)<3&&(0,D.jsx)(v.Z,{disabled:3===(null===$e||void 0===$e?void 0:$e.length),onClick:ln,children:"Add Secret Questions"}),(0,D.jsxs)(m.Z,{spacing:3,direction:"row",sx:{mt:2,justifyContent:"end"},children:[(0,D.jsx)(j.ZP,{varient:"outlined",label:null!==gn?"Cancel":"Reset",onClick:function(){null!==gn&&fn(!1,!0),mn(),Zn()}}),(0,D.jsx)(j.ZP,{onClick:function(e){return vn(e)},disabled:!(null!==$e&&void 0!==$e&&$e.length),label:null!==gn?e.isLoading?(0,D.jsx)(S.Z,{}):"Update":e.isLoading?(0,D.jsx)(S.Z,{}):"Add"})]}),(0,D.jsx)(k,{modal:Ge,secrets:$e,toggleModal:ln,fname:Ue,setfname:_e,ftype:Te,setftype:qe,editID:tn,clearCustomField:rn,handleSecrets:sn})]})})}},25240:function(e,n,t){var i=t(29439),a=t(42357),s=t(47313),r=t(19641),l=t(57775),o=t(51057),d=t(47605),c=t(29917),u=t(61474),h=t(46417);n.Z=function(e){var n=(0,s.useState)("00"),t=(0,i.Z)(n,2),x=t[0],v=t[1],m=(0,s.useState)("00"),Z=(0,i.Z)(m,2),f=Z[0],p=Z[1],g=(0,s.useState)(!1),j=(0,i.Z)(g,2),S=j[0],C=j[1],P=(0,s.useState)(0),b=(0,i.Z)(P,2),y=b[0],w=b[1];(0,s.useEffect)((function(){var e;return S&&(e=setInterval((function(){var e=y%60,n=Math.floor(y/60),t=1===String(e).length?"0".concat(e):e,i=1===String(n).length?"0".concat(n):n;v(t),p(i),w((function(e){return e+1}))}),650)),function(){return clearInterval(e)}}),[S,y]);var D=(0,a.useReactMediaRecorder)({video:!1,audio:!0,echoCancellation:!0,onStop:function(n,t){console.log(t),function(e){var n=new FileReader;return n.readAsDataURL(e),new Promise((function(e){n.onloadend=function(){e(n.result)}}))}(t).then((function(n){e.setRecVideo(n)}))}}),k=D.status,R=D.startRecording,A=D.stopRecording,L=D.pauseRecording,E=D.clearBlobUrl,M=D.mediaBlobUrl;return(0,h.jsx)(r.ZP,{item:!0,xs:12,sm:8,children:(0,h.jsxs)(l.Z,{variant:"outlined",children:[(0,h.jsxs)(o.Z,{children:[(0,h.jsxs)(d.Z,{sx:{background:"#f1f3f4"},borderRadius:"50px",padding:"15px",marginBottom:1,children:["Recording Status : ",k]}),(M||e.recVideo)&&(0,h.jsx)("audio",{style:{width:"100%"},src:M||e.recVideo,controls:!0}),(0,h.jsxs)(d.Z,{margin:"auto",border:" #cccccc",boxShadow:"0 0 0 0.06rem #cccccc",borderRadius:"2px",padding:"2px",width:"max-content",children:[f," : ",x]})]}),(0,h.jsxs)(c.Z,{sx:{justifyContent:"center"},children:[(0,h.jsx)(u.ZP,{varient:"contained",label:S?"Pause":"paused"===k?"Resume":"Start",onClick:function(){S?L():R(),C(!S)}}),(0,h.jsx)(u.ZP,{varient:"outlined",label:"Stop",onClick:function(){A(),C(!1)}}),(0,h.jsx)(u.ZP,{varient:"outlined",label:"Clear",onClick:function(){C(!1),w(0),v("00"),p("00"),E(),C(!1)}})]})]})})}},5318:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var i=t(74165),a=t(15861),s=t(29439),r=t(47313),l=t(9506),o=t(19641),d=t(66135),c=t(45561),u=t(12613),h=t(81800),x=t(47605),v=t(94469),m=t(33604),Z=t(69625),f=t(98668),p=t(87124),g=t(57775),j=t(19536),S=t(51057),C=t(31881),P=t.n(C),b=t(34203),y=t(54727),w=t(1087),D=t(18825),k=t(46417),R=function(e){var n=(0,r.useState)(!1),t=(0,s.Z)(n,2),i=t[0],a=t[1],d=(0,r.useState)(""),c=(0,s.Z)(d,2),h=c[0],C=c[1],R=(0,r.useState)(""),A=(0,s.Z)(R,2),L=A[0],E=A[1],M=(0,r.useState)(!1),I=(0,s.Z)(M,2),V=I[0],O=I[1],z=(0,r.useState)(),N=(0,s.Z)(z,2),F=N[0],U=N[1],_=(0,r.useState)(!1),B=(0,s.Z)(_,2),W=B[0],T=B[1],q=(0,r.useState)([]),Y=(0,s.Z)(q,2),K=Y[0],$=Y[1],Q=(0,r.useState)(""),H=(0,s.Z)(Q,2),J=H[0],G=H[1],X=(0,r.useState)(),ee=(0,s.Z)(X,2),ne=ee[0],te=ee[1],ie=function(){a(!i)},ae=function(e){C(h!==e?e:"")},se=function(n){var t;return null!==(t=e.colorOption)&&void 0!==t&&t[n]?e.colorOption[n]:n},re=function(n){var t,i,a="";return(null===n||void 0===n||null===(t=n.nominees)||void 0===t?void 0:t.length)&&n.nominees.forEach((function(e,t){t===n.nominees.length-1?a+=null===e||void 0===e?void 0:e.name:a="".concat(a+(null===e||void 0===e?void 0:e.name),", ")})),(0,k.jsxs)(o.ZP,{container:!0,columnSpacing:1,rowSpacing:1,children:[(0,k.jsx)(o.ZP,{item:!0,display:"flex",sm:4,xs:12,children:(0,k.jsxs)(o.ZP,{container:!0,children:[(0,k.jsx)(o.ZP,{item:!0,xs:4,children:(0,k.jsx)(x.Z,{borderRadius:1,textAlign:"center",height:"max-cotent",bgcolor:"#3f3fcb",color:"white",padding:.1,sx:{cursor:"pointer"},onClick:function(){return e.editItem(n)},children:"EDIT"})}),(0,k.jsx)(o.ZP,{item:!0,xs:4,children:(0,k.jsx)(x.Z,{borderRadius:1,textAlign:"center",height:"max-cotent",bgcolor:"#e53a29",color:"white",padding:.1,sx:{mx:1,cursor:"pointer"},onClick:function(){G(n._id),E(!0)},children:"DELETE"})})]})}),(0,k.jsx)(o.ZP,{item:!0,sm:4,xs:12,children:(0,k.jsxs)(o.ZP,{container:!0,children:[(0,k.jsx)(o.ZP,{item:!0,xs:5,children:(0,k.jsx)(x.Z,{children:"Type"})}),(0,k.jsx)(o.ZP,{item:!0,xs:7,children:(0,k.jsxs)(x.Z,{children:[": ",n.type]})})]})}),(0,k.jsx)(o.ZP,{item:!0,sm:4,xs:12,children:(0,k.jsxs)(o.ZP,{container:!0,children:[(0,k.jsx)(o.ZP,{item:!0,xs:5,children:(0,k.jsx)(x.Z,{children:"Description"})}),(0,k.jsx)(o.ZP,{item:!0,xs:7,children:(0,k.jsxs)(x.Z,{children:[": ",n.desc]})})]})}),(0,k.jsx)(o.ZP,{item:!0,sm:4,xs:12,children:(0,k.jsxs)(o.ZP,{container:!0,children:[(0,k.jsx)(o.ZP,{item:!0,xs:5,children:(0,k.jsx)(x.Z,{children:"Date"})}),(0,k.jsx)(o.ZP,{item:!0,xs:7,children:(0,k.jsxs)(x.Z,{children:[": ",null!==n&&void 0!==n&&n.date?(0,y.p6)(null===n||void 0===n||null===(i=n.date)||void 0===i?void 0:i.split("T")[0]):"After Death"]})})]})}),(0,k.jsx)(o.ZP,{item:!0,sm:4,xs:12,children:(0,k.jsxs)(o.ZP,{container:!0,children:[(0,k.jsx)(o.ZP,{item:!0,xs:5,children:(0,k.jsx)(x.Z,{children:"Receiver Name"})}),(0,k.jsx)(o.ZP,{item:!0,xs:7,children:(0,k.jsxs)(x.Z,{children:[": ",n.rname]})})]})}),(0,k.jsx)(o.ZP,{item:!0,sm:4,xs:12,children:(0,k.jsxs)(o.ZP,{container:!0,children:[(0,k.jsx)(o.ZP,{item:!0,xs:5,children:(0,k.jsx)(x.Z,{children:"Receiver Email"})}),(0,k.jsx)(o.ZP,{item:!0,xs:7,children:(0,k.jsxs)(x.Z,{children:[": ",n.remail]})})]})}),(0,k.jsx)(o.ZP,{item:!0,sm:4,xs:12,children:(0,k.jsxs)(o.ZP,{container:!0,children:[(0,k.jsx)(o.ZP,{item:!0,xs:5,children:(0,k.jsx)(x.Z,{children:"Receiver Phone"})}),(0,k.jsx)(o.ZP,{item:!0,xs:7,children:(0,k.jsxs)(x.Z,{children:[": ",n.rphone]})})]})}),(0,k.jsx)(o.ZP,{item:!0,sm:4,xs:12,children:(0,k.jsxs)(o.ZP,{container:!0,children:[(0,k.jsx)(o.ZP,{item:!0,xs:5,children:(0,k.jsx)(x.Z,{children:"Status"})}),(0,k.jsx)(o.ZP,{item:!0,xs:7,children:(0,k.jsxs)(x.Z,{children:[":",0===n.status?(0,k.jsx)(k.Fragment,{children:" Pending"}):1===n.status?(0,k.jsx)(k.Fragment,{children:" Delivered"}):(0,k.jsxs)(k.Fragment,{children:[" Failed : ",n.failReason]})]})})]})}),(0,k.jsx)(o.ZP,{item:!0,sm:4,xs:12,children:("Video"===n.type||"Voice"===n.type)&&(0,k.jsx)(x.Z,{sx:{color:"#20756d",cursor:"pointer"},onClick:function(){return function(e,n){O(!0),T("Video"===n),ie();var t=sessionStorage.getItem("authtoken");P().get("/backendapi/sender/msg/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){var n;if(e.data&&null!==(n=e.data[0])&&void 0!==n&&n.media){for(var t,i,a=null===(t=e.data[0])||void 0===t||null===(i=t.media)||void 0===i?void 0:i.split("base64,"),s=a[0].substring(5,a[0].length-1),r=atob(a[1]),l=new Array(r.length),o=0;o<r.length;o++)l[o]=r.charCodeAt(o);var d=new Uint8Array(l),c=new Blob([d],{type:s}),u=URL.createObjectURL(c);U(u),O(!1)}}))}(n.msg,n.type)},children:"Video"===n.type?"Play Video":"Play Audio"})})]})},le=(null===ne||void 0===ne?void 0:ne.length)>0?K:e.collapseItems;return(0,k.jsxs)(l.Z,{children:[(0,k.jsxs)(v.Z,{open:i,onClose:ie,centered:!0,children:[(0,k.jsx)(m.Z,{children:"Message"}),(0,k.jsx)(Z.Z,{children:V?(0,k.jsx)(f.Z,{}):(0,k.jsx)(p.Z,{component:W?"video":"audio",controls:!0,src:F,autoPlay:!0,sx:{minWidth:"250px"}})})]}),e.loadingmsg&&null===e.collapseItems?(0,k.jsx)(f.Z,{}):(0,k.jsxs)(g.Z,{children:[(0,k.jsx)(D.z,{heading:e.heading,search:function(n){te(n);var t=e.collapseItems.filter((function(e){var t=e.desc.toLowerCase().startsWith(n.toLowerCase())||e.type.toLowerCase().startsWith(n.toLowerCase())||e.title.toLowerCase().startsWith(n.toLowerCase()),i=e.desc.toLowerCase().includes(n.toLowerCase())||e.type.toLowerCase().includes(n.toLowerCase())||e.title.toLowerCase().includes(n.toLowerCase());return!(!t&&!i)}));$(t)}}),(0,k.jsx)(b.Z,{handleConfirm:function(){var n;n=J,P().delete("/backendapi/sender/deletebyid/".concat(n),{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}).then((function(e){e&&u.A9})).catch(),E(!1),e.refreshData.callFunc(!e.refreshData.value)},isOpen:L,closeModal:function(){return E(!1)}}),(0,k.jsx)(j.Z,{}),(0,k.jsx)(S.Z,{children:(null===le||void 0===le?void 0:le.length)>0?le.map((function(e){return(0,k.jsx)(r.Fragment,{children:(0,k.jsx)(w.Z,{collapseID:h,setcollapseID:C,collapseItem:{content:re(e),title:null===e||void 0===e?void 0:e.title,id:e._id},formatme:se,toggleCollapse:ae})},e._id)})):(0,k.jsx)("span",{children:"No Messages Found"})})]})]})},A=t(29748),L=t(1413),E=t(49969),M=t(69173),I=t(35898),V=t(82363),O=t(25240),z=t(61474),N=t(69933),F=t(79428),U=t(74212),_=[{value:"Attachment",label:"Attachment",color:"#00B8D9",isFixed:!0},{value:"Text",label:"Text",color:"#00B8D9",isFixed:!0},{value:"Voice",label:"Voice",color:"#0052CC",isFixed:!0},{value:"Video",label:"Video",color:"#0052CC",isFixed:!0}],B=function(e){var n,t=e.oldMsg,i=e.rname,a=e.sameAsAbove,l=e.setRecVideo,d=e.rphone,c=e.setrphone,h=e.edititem,x=e.settype,v=e.settitle,m=e.nomineeOption2,Z=e.userInput,f=e.setuserInput,p=e.remail,j=e.setremail,C=e.setdesc,P=e.desc,b=e.type,w=e.title,D=e.setdate,R=e.date,A=e.setsignature,B=e.signature,W=e.handleCheck,T=e.handleReset,q=e.handleSubmit,Y=e.validEmail,K=e.validPhone,$=e.validDate,Q=e.recVideo,H=e.setfilesOndrop,J=e.resetDropzone,G=(0,r.useState)(""),X=(0,s.Z)(G,2),ee=X[0],ne=X[1],te=!(null!==i&&void 0!==i&&i.length)||!(null!==d&&void 0!==d&&d.length)||!(null!==p&&void 0!==p&&p.length)||!(null!==b&&void 0!==b&&b.length)||!(null!==w&&void 0!==w&&w.length)||!a&&!R||!Y||!K||!a&&!$||R===(null===t||void 0===t||null===(n=t.date)||void 0===n?void 0:n.split("T")[0])&&P===(null===t||void 0===t?void 0:t.desc)&&i===(null===t||void 0===t?void 0:t.rname)&&p===(null===t||void 0===t?void 0:t.remail)&&d===(null===t||void 0===t?void 0:t.rphone)&&B===(null===t||void 0===t?void 0:t.signature)&&w===(null===t||void 0===t?void 0:t.title),ie=function(e){e.length<=10&&(c(e),null!==e&&void 0!==e&&e.length&&10===e.length&&e.trim()&&y.Yd.test(e)?ne(""):ne("Enter Valid Contact No."))};return(0,k.jsx)(g.Z,{children:(0,k.jsxs)(S.Z,{children:[(0,k.jsx)(u.ll,{title:(0,k.jsxs)(o.ZP,{container:!0,flexDirection:"row",justifyContent:"space-between",children:[(0,k.jsx)(o.ZP,{item:!0,children:h?"Edit Message":"Schedule Message"}),(0,k.jsx)(o.ZP,{item:!0,children:b&&(0,k.jsx)(M.Z,{label:"Deliver after my death",control:(0,k.jsx)(E.Z,{checked:a,onChange:function(){return W()}})})})]})}),(0,k.jsxs)(o.ZP,{container:!0,rowSpacing:.01,spacing:1,justifyContent:"center",children:[(0,k.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsx)(z.gc,{name:"color",options:_,isDisabled:h,onChange:function(e,n){return x(null===n||void 0===n?void 0:n.value)},value:(0,F.NA)(_,b),renderInput:function(e){return(0,k.jsx)(U.Z,(0,L.Z)((0,L.Z)({},e),{},{placeholder:h?b:"Message Type *"}))}})}),(0,k.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsx)(z.gc,{name:i,options:m,onChange:function(e,n){return f(n)},value:(0,F.NA)(m,null===Z||void 0===Z?void 0:Z.value),renderInput:function(e){return(0,k.jsx)(U.Z,(0,L.Z)((0,L.Z)({},e),{},{placeholder:"Reciever"}))}})}),b&&(0,k.jsxs)(r.Fragment,{children:[(0,k.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsx)(U.Z,{type:"email",id:"remail",placeholder:"Receiver Email *",value:p,onChange:function(e){return j(e.target.value)}})}),(0,k.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsx)(U.Z,{type:"tel",id:"phone",maxLength:10,error:!!ee,placeholder:"Receiver Phone *",value:d,onChange:function(e){ie(e.target.value)},onKeyPress:function(e){return(0,y.ZP)(e)}})}),(0,k.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsx)(U.Z,{id:"title",placeholder:"Subject *",value:w,onChange:function(e){return v(e.target.value)}})}),(0,k.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsx)(U.v,{value:a?null:R,id:"exampleDate",label:"Delivery Date",disabled:!!a,onChange:function(e){return D(e)}})}),"Voice"===b&&(0,k.jsx)(O.Z,(0,L.Z)({},e)),"Video"===b&&(0,k.jsx)(V.Z,{setRecVideo:l,recVideo:Q}),(0,k.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsx)(U.Z,{type:"textarea",placeholder:"Description",rows:"3",id:"description",value:P,onChange:function(e){return C(e.target.value)}})}),(0,k.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsx)(U.Z,{type:"textarea",placeholder:"Signature",className:"input-label placeholder ",rows:"1",id:"signature",value:B,onChange:function(e){return A(e.target.value)}})}),(0,k.jsx)(o.ZP,{item:!0,xs:12,sm:12,children:"Attachment"===b&&(0,k.jsx)(N.r,{notMulti:1,setfilesOndrop:H,resetDropzone:J,file:Q})})]})]}),(0,k.jsxs)(I.Z,{direction:"row",spacing:3,sx:{mt:3},justifyContent:"end",children:[(0,k.jsx)(z.ZP,{varient:"outlined",label:h?"Cancel":"Reset",onClick:function(){return T()}}),(0,k.jsx)(z.ZP,{varient:"contained",label:h?"Update":"Add",onClick:q,disabled:te})]})]})})},W=t(66529),T=(0,d.$j)((function(e){var n,t=e.reducer,i=t.dataList,a=void 0===i?{}:i,s=t.sender,r=void 0===s?{}:s,l=null!==r&&void 0!==r&&null!==(n=r.getmesssages)&&void 0!==n&&n.length?r.getmesssages:[];return{dataList:a,listLoading:a.totalRecordsLoading,messages:l,loadingmsg:r.loadingmsg}}),(function(e){return{scheduleNewMessage:function(n){return e(W.tb.endpoints.scheduleNewMessage.initiate(n))},getScheduledMessages:function(n){return e(W.tb.endpoints.getScheduledMessages.initiate(n))},editMessage:function(n){return e(W.tb.endpoints.editMessage.initiate(n))},addData:function(n){return e(c.SD.endpoints.addData.initiate(n))},getData:function(n){return e(c.SD.endpoints.getData.initiate(n))}}}))((function(e){var n,t=r.createRef(),d=(0,r.useState)(""),c=(0,s.Z)(d,2),x=c[0],v=c[1],m=(0,r.useState)(""),Z=(0,s.Z)(m,2),f=Z[0],p=Z[1],g=(0,r.useState)(!1),j=(0,s.Z)(g,2),S=j[0],C=j[1],P=(0,r.useState)(""),b=(0,s.Z)(P,2),w=b[0],D=b[1],L=(0,r.useState)(""),E=(0,s.Z)(L,2),M=E[0],I=E[1],V=(0,r.useState)(""),O=(0,s.Z)(V,2),z=O[0],N=O[1],F=(0,r.useState)(!1),U=(0,s.Z)(F,2),_=U[0],W=U[1],T=(0,r.useState)(null),q=(0,s.Z)(T,2),Y=q[0],K=q[1],$=(0,r.useState)(null),Q=(0,s.Z)($,2),H=Q[0],J=Q[1],G=(0,r.useState)([]),X=(0,s.Z)(G,2),ee=X[0],ne=X[1],te=(0,r.useState)(!1),ie=(0,s.Z)(te,2),ae=ie[0],se=ie[1],re=(0,r.useState)(!1),le=(0,s.Z)(re,2),oe=le[0],de=le[1],ce=(0,r.useState)(""),ue=(0,s.Z)(ce,2),he=ue[0],xe=ue[1],ve=(0,r.useState)(!1),me=(0,s.Z)(ve,2),Ze=me[0],fe=me[1],pe=(0,r.useState)(null),ge=(0,s.Z)(pe,2),je=ge[0],Se=ge[1],Ce=(0,r.useState)(!1),Pe=(0,s.Z)(Ce,2),be=Pe[0],ye=Pe[1],we=(0,r.useState)([]),De=(0,s.Z)(we,2),ke=De[0],Re=De[1],Ae=(0,r.useState)([]),Le=(0,s.Z)(Ae,2),Ee=Le[0],Me=Le[1],Ie=(0,r.useState)(""),Ve=(0,s.Z)(Ie,2),Oe=Ve[0],ze=Ve[1],Ne=(0,r.useState)(""),Fe=(0,s.Z)(Ne,2),Ue=Fe[0],_e=Fe[1],Be=(0,r.useState)(""),We=(0,s.Z)(Be,2),Te=We[0],qe=We[1],Ye=(0,r.useState)(""),Ke=(0,s.Z)(Ye,2),$e=Ke[0],Qe=Ke[1],He=(0,r.useState)([]),Je=(0,s.Z)(He,2),Ge=Je[0],Xe=Je[1],en=(0,r.useState)(!1),nn=(0,s.Z)(en,2),tn=nn[0],an=nn[1],sn=(0,r.useState)(!0),rn=(0,s.Z)(sn,2),ln=rn[0],on=rn[1],dn=(0,r.useState)(!0),cn=(0,s.Z)(dn,2),un=cn[0],hn=cn[1],xn=(0,r.useState)(!0),vn=(0,s.Z)(xn,2),mn=vn[0],Zn=vn[1];(0,r.useEffect)((function(){if(console.log($e),null!==$e&&void 0!==$e&&$e.value){var e=Ee.filter((function(e){return e._id===$e.value}));ze(null===e||void 0===e?void 0:e[0].name),_e(null===e||void 0===e?void 0:e[0].email),qe(null===e||void 0===e?void 0:e[0].primaryContact)}else 0===(null===$e||void 0===$e?void 0:$e.length)?(ze($e),_e(""),qe("")):ze($e)}),[$e]);(0,r.useEffect)((function(){e.getScheduledMessages(),e.getData()}),[]);var fn=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];de(e),n&&(Se(null),fe(!0))};(0,r.useEffect)((function(){if(e.dataList.data.length){var n=[];Me(e.dataList.data),e.dataList.data.forEach((function(e){var t={value:e._id,label:"".concat(e.name," - ").concat(e.relation),color:"#00B8D9",isFixed:!1};n.push(t)})),Xe(n)}}),[e.dataList.data]);var pn=function(){var n=(0,a.Z)((0,i.Z)().mark((function n(t){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ye(!0),n.prev=1,n.next=4,e.addData(t);case 4:ze(""),qe(""),_e(""),fn(!1,!0),n.next=13;break;case 10:return n.prev=10,n.t0=n.catch(1),n.abrupt("return",(0,k.jsx)(u.A9,{handleClick:function(){},openSnack:!0,openSnackMsg:"Add Nominee Failed! Please contact admin",severity:"error"}));case 13:return n.prev=13,ye(!1),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[1,10,13,16]])})));return function(e){return n.apply(this,arguments)}}(),gn=function(){W(!1),ze(""),qe(""),_e(""),xe(""),N(""),I(""),p(""),C(!1),D(""),Re([]),Qe(""),v(""),ne("")};return(0,k.jsxs)(l.Z,{children:[(0,k.jsx)(A.Z,{show:oe,data:je,updateData:e.addData,addData:pn,isLoading:be,handleSidebar:fn,getData:e.getData,dataParams:e.parsedFilter,addNew:Ze}),(0,k.jsxs)(o.ZP,{container:!0,spacing:1,sx:{p:2},children:[(0,k.jsx)(o.ZP,{item:!0,xs:12,md:9,lg:9,children:(0,k.jsx)(B,{oldMsg:H,handleReset:gn,handleSubmit:function(){_?e.editMessage({_id:Y,desc:M,type:z,title:he,date:f,signature:w,rname:Oe,remail:Ue,rphone:Te,msg:("Voice"===z||"Video"===z||"Attachment"===z)&&x||ee.length&&ee||""}):e.scheduleNewMessage({desc:M,type:z,title:he,date:f,signature:w,rname:Oe,remail:Ue,rphone:Te,msg:("Voice"===z||"Video"===z||"Attachment"===z)&&x||ee.length&&ee||""}),gn()},sameAsAbove:S,setdate:function(e){var n=new Date(e)>new Date||""===e;p(e),Zn(n)},setfilesOndrop:function(e){se(!1),ne(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))},resetDropzone:ae,setRecVideo:v,setdesc:I,setsignature:D,rphone:Te,setrphone:function(e){var n=y.Yd.test(e);qe(e),hn(n)},validPhone:un,selecttype:t,edititem:_,settype:N,settitle:xe,nomineeOption2:Ge,remail:Ue,validEmail:ln,rname:Oe,setremail:function(e){var n=String(e).toLowerCase().match(/^([A-Za-z0-9_\-.])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,})$/);_e(e),on(n)},desc:M,type:z,title:he,date:f,validDate:mn,signature:w,handleCheck:function(){!S&&p(""),C(!S)},userInput:$e,setuserInput:Qe,recVideo:x})}),(0,k.jsx)(h.Z,{}),(0,k.jsx)(o.ZP,{item:!0,xs:12,md:9,lg:9,children:(0,k.jsx)(R,{heading:"Messages History",collapseItems:e.messages,colorOption:null===(n=e.messages)||void 0===n?void 0:n.colorOption,editItem:function(e){var n;J(e);var t=e.date,i=e.desc,a=e.rname,s=e.remail,r=e.rphone,l=e.signature,o=e.title,d=e.type,c=e._id,u=e.mediaDetails;W(!0),K(c),p(null===t||void 0===t?void 0:t.split("T")[0]),I(i),Re(ke),_e(s),ze(a),qe(r),D(l),xe(o),N(d),C(!t),v("Attachment"===d?u:null===(n=u[0])||void 0===n?void 0:n.media)},loadingmsg:e.loadingmsg,handleFilter:function(){console.log("Call filter function")},refreshData:{value:tn,callFunc:an}})})]})]})}))},82363:function(e,n,t){var i=t(29439),a=t(47313),s=t(61474),r=t(42357),l=t(38693),o=t(57441),d=t(16423),c=t(91536),u=t(19641),h=t(57775),x=t(51057),v=t(47605),m=t(9506),Z=t(29917),f=t(46417),p=function(e){var n=e.stream,t=(0,a.useRef)(null);return(0,a.useEffect)((function(){t.current&&n&&(t.current.srcObject=n)}),[n]),n?(0,f.jsx)("video",{ref:t,width:"100%",height:"100%",autoPlay:!0,controls:!0}):null};n.Z=function(e){var n=e.setRecVideo,t=e.recVideo,g=(0,a.useState)(!0),j=(0,i.Z)(g,2),S=j[0],C=j[1],P=(0,a.useState)(!1),b=(0,i.Z)(P,2),y=b[0],w=b[1],D=(0,a.useState)(!1),k=(0,i.Z)(D,2),R=k[0],A=k[1];return(0,f.jsx)(u.ZP,{item:!0,xs:12,sm:8,children:(0,f.jsx)(r.ReactMediaRecorder,{screen:R,video:!R,audio:S,onStop:function(e,t){console.log(t),function(e){var n=new FileReader;return n.readAsDataURL(e),new Promise((function(e){n.onloadend=function(){e(n.result)}}))}(t).then((function(e){console.log(e),n(e)}))},render:function(e){var n=e.status,i=e.startRecording,a=e.pauseRecording,r=e.stopRecording,u=e.clearBlobUrl,g=e.mediaBlobUrl,j=e.previewStream;return(0,f.jsxs)(h.Z,{variant:"outlined",children:[(0,f.jsxs)(x.Z,{children:[(0,f.jsxs)(v.Z,{textAlign:"center",children:["Status : ",n]}),y&&j&&(0,f.jsx)(p,{stream:j}),!y&&(g||t)&&(0,f.jsx)("video",{src:g||t,controls:!0,autoPlay:!1,width:"100%",height:"100%"}),(0,f.jsxs)(m.Z,{display:"flex",justifyContent:"space-evenly",sx:{mt:2},children:[S?(0,f.jsx)(l.Z,{fontSize:"large",onClick:function(){return C(!S)}}):(0,f.jsx)(o.Z,{fontSize:"large",onClick:function(){return C(!S)}}),(0,f.jsx)(d.Z,{fontSize:"large",onClick:function(e){A(!0)},color:"".concat(R&&"primary")}),(0,f.jsx)(c.Z,{fontSize:"large",onClick:function(e){A(!1)},color:"".concat(!R&&"primary")})]})]}),(0,f.jsxs)(Z.Z,{sx:{justifyContent:"center"},children:[(0,f.jsx)(s.ZP,{varient:"contained",label:y?"Pause":"paused"===n?"Resume":"Start",onClick:function(){y?a():i(),w(!y)}}),(0,f.jsx)(s.ZP,{varient:"outlined",label:"Stop",onClick:function(){r(),w(!1)}}),(0,f.jsx)(s.ZP,{varient:"outlined",label:"Clear",onClick:function(){u(),w(!1)}})]})]})}})})}},6306:function(e,n,t){var i=t(64836);n.Z=void 0;var a=i(t(45045)),s=t(46417),r=(0,a.default)((0,s.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");n.Z=r},85585:function(e,n,t){var i=t(54750),a=t(46417);n.Z=(0,i.Z)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}),"CloseOutlined")}}]);