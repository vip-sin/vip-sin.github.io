"use strict";(self.webpackChunkvpn=self.webpackChunkvpn||[]).push([[304],{1087:function(e,t,n){n.d(t,{Z:function(){return r}});n(47313);var a=n(92336),i=n(2884),s=n(24694),o=n(6306),l=n(46417);function r(e){var t=e.collapseID,n=(e.setcollapseID,e.collapseItem),r=e.formatme,d=e.toggleCollapse;return(0,l.jsxs)(a.Z,{expanded:t===n.id,onChange:function(){return d(n.id)},children:[(0,l.jsx)(s.Z,{expandIcon:(0,l.jsx)(o.Z,{}),children:r(n.title)}),(0,l.jsx)(i.Z,{children:n.content})]})}},10226:function(e,t,n){n.d(t,{Z:function(){return L}});var a=n(1413),i=n(93433),s=n(29439),o=n(47313),l=n(40229),r=n(82500),d=n(71535),c=n(71363),u=n(34940),h=n(89870),v=n(62463),m=n(39653),g=n(8586),f=n(46095),x=n(46417),p=(0,f.Z)((0,x.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}),"CloseOutlined"),Z=n(71207),j=n(54727),S=n(61474),C=n(85120),b=n(63861),y=n(86240),D=n(7081),w=n(5448),P=n(88356);function A(e){var t=e.modal,n=e.toggleModal,i=e.fname,s=e.setfname,o=e.ftype,l=e.setftype,r=e.editID,d=e.clearCustomField,c=e.handleSecrets,u=e.secrets;return(0,x.jsxs)(D.Z,{open:t,fullWidth:!0,maxWidth:"xs",onClose:n,children:[(0,x.jsx)(w.Z,{children:"Add a secret question"}),(0,x.jsxs)(P.Z,{children:[(0,x.jsx)(S.gc,{name:"relation",options:function(){var e=y.DD.filter((function(e){var t,n,a;return e.value!==(null===u||void 0===u||null===(t=u[0])||void 0===t?void 0:t.question)&&e.value!==(null===u||void 0===u||null===(n=u[1])||void 0===n?void 0:n.question)&&e.value!==(null===u||void 0===u||null===(a=u[2])||void 0===a?void 0:a.question)}));return console.log("temp",e,u),e}(),onChange:function(e,t){return function(e){var t=null===e||void 0===e?void 0:e.value;s(t)}(t)},value:(0,y.NA)(y.DD,i),renderInput:function(e){return(0,x.jsx)(m.Z,(0,a.Z)((0,a.Z)({},e),{},{placeholder:" Secret Question"}))}}),(0,x.jsx)(m.Z,{type:"text",name:"Answer",margin:"normal",size:"small",fullWidth:!0,value:o,placeholder:"Answer",onChange:function(e){l(e.target.value)}}),(0,x.jsxs)(v.Z,{spacing:3,direction:"row",sx:{mt:3,justifyContent:"start"},children:[(0,x.jsx)(S.ZP,{varient:"outlined",label:"Cancel",onClick:function(e){d()}}),(0,x.jsx)(S.ZP,{varient:"contained",label:r?"Update":"Add",disabled:!(null!==i&&void 0!==i&&i.length)||""===o.trim(),onClick:c})]})]})]})}var k=n(75969),R=n(95716),I=JSON.parse(sessionStorage.getItem("dropdowns")).nomineeRelation;function L(e){var t=(0,o.useState)(),n=(0,s.Z)(t,2),f=n[0],D=n[1],w=(0,o.useState)(""),P=(0,s.Z)(w,2),L=P[0],E=P[1],V=(0,o.useState)(""),M=(0,s.Z)(V,2),O=M[0],N=M[1],z=(0,o.useState)(""),_=(0,s.Z)(z,2),F=_[0],U=_[1],B=(0,o.useState)(""),T=(0,s.Z)(B,2),W=T[0],q=T[1],G=(0,o.useState)(!0),Y=(0,s.Z)(G,2),J=Y[0],K=Y[1],$=(0,o.useState)(""),Q=(0,s.Z)($,2),H=Q[0],X=Q[1],ee=(0,o.useState)(""),te=(0,s.Z)(ee,2),ne=te[0],ae=te[1],ie=(0,o.useState)(""),se=(0,s.Z)(ie,2),oe=se[0],le=se[1],re=(0,o.useState)(!1),de=(0,s.Z)(re,2),ce=de[0],ue=de[1],he=(0,o.useState)(""),ve=(0,s.Z)(he,2),me=ve[0],ge=ve[1],fe=(0,o.useState)(""),xe=(0,s.Z)(fe,2),pe=xe[0],Ze=xe[1],je=(0,o.useState)(""),Se=(0,s.Z)(je,2),Ce=Se[0],be=Se[1],ye=(0,o.useState)(""),De=(0,s.Z)(ye,2),we=De[0],Pe=De[1],Ae=(0,o.useState)(""),ke=(0,s.Z)(Ae,2),Re=ke[0],Ie=ke[1],Le=(0,o.useState)(""),Ee=(0,s.Z)(Le,2),Ve=Ee[0],Me=Ee[1],Oe=(0,o.useState)(""),Ne=(0,s.Z)(Oe,2),ze=Ne[0],_e=Ne[1],Fe=(0,o.useState)(""),Ue=(0,s.Z)(Fe,2),Be=Ue[0],Te=Ue[1],We=(0,o.useState)([]),qe=(0,s.Z)(We,2),Ge=qe[0],Ye=qe[1],Je=(0,o.useState)(!1),Ke=(0,s.Z)(Je,2),$e=Ke[0],Qe=Ke[1],He=(0,o.useState)(""),Xe=(0,s.Z)(He,2),et=Xe[0],tt=Xe[1],nt=function(){_e(""),Te(""),Qe(!$e)},at=function(){$e&&nt(),Qe(!$e)};(0,o.useEffect)((function(){if(e.data){var t=e.data,n=t.id,a=t.name,s=t.relation,o=t.relation1,l=t.address,r=t.email,d=t.primaryContact,c=t.secondaryContact,u=e.data.secrets;ht(),ae(n),le(a),D(s),"Others"===s&&E(o),U(l),N(r),q(d),X(c),(null===u||void 0===u?void 0:u.length)&&Ye((0,i.Z)(u))}else(null===e.data||ce)&&(ut(),ht());ue(!1)}),[e.data]);var it=function(){return Me("Enter Valid Name")},st=function(){return be("Enter Valid Email")},ot=function(){return Pe("Enter Valid Contact No.")},lt=function(){return Ze("Enter Valid Relation")},rt=function(){return ge("Enter Valid Relation")},dt=function(e){var t,n=e.target.name,a=null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value;switch(n){case"name":le(a),null!==a&&void 0!==a&&a.length&&a.trim()?Me(""):it();break;case"email":N(a);var i=a.match(/^([A-Za-z0-9_\-.])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,})$/);a&&i&&a.trim()?be(""):st();break;case"address":U(a);break;case"phone":q(a),J&&X(a),null!==a&&void 0!==a&&a.length&&10===a.length&&a.trim()&&j.Yd.test(a)?Pe(""):ot();break;case"phoneC":X(a),10===a.length&&a.trim()&&j.Yd.test(a)?Ie(""):Ie("Enter Valid whatsapp No."),(null===a||void 0===a||!a.length)&&Ie("");break;case"relation":null!==a&&void 0!==a&&a.length&&a.trim()?Ze(""):lt();break;case"relation1":E(a),null!==a&&void 0!==a&&a.length&&a.trim()?ge(""):rt()}},ct=function(){console.log("das");var t=((null===oe||void 0===oe||!oe.length)&&it(),(null===O||void 0===O||!O.length)&&st(),(null===W||void 0===W||!W.length)&&ot(),(null===f||void 0===f||!f.length)&&lt(),"Others"===f&&(null===L||void 0===L||!L.length)&&rt(),"Others"!==f&&ge(""),Ve||!(null!==oe&&void 0!==oe&&oe.length)||pe||!(null!==f&&void 0!==f&&f.length)||me||"Others"===f&&!(null!==L&&void 0!==L&&L.length)||Ce||!(null!==O&&void 0!==O&&O.length)||we||!(null!==W&&void 0!==W&&W.length)||Re);if(t&&b.A9,t)console.log(t,"inValid");else if(e.isLoading&&(b.A9,e.data),!e.isLoading){var n={relation:null===f||void 0===f?void 0:f.trim(),relation1:null===L||void 0===L?void 0:L.trim(),email:null===O||void 0===O?void 0:O.trim(),address:null===F||void 0===F?void 0:F.trim(),contact1:null===W||void 0===W?void 0:W.trim(),contact2:null===H||void 0===H?void 0:H.trim(),id:null===ne||void 0===ne?void 0:ne.trim(),name:null===oe||void 0===oe?void 0:oe.trim(),secrets:Ge};null!==e.data?(n._id=e.data._id,n.usage=e.data.usage,e.updateData(n)):(ue(!0),e.addData(n),ut(),ht())}},ut=function(){le(""),Ye([]),D(""),E(""),N(""),U(""),q(""),X("")},ht=function(){Me(""),Pe(""),Ie(""),be(""),ge("")},vt=e.handleSidebar,mt=e.show,gt=e.data;return(0,x.jsx)(r.Z,{anchor:"right",open:mt,children:(0,x.jsxs)(l.Z,{sx:{mt:10,width:350,px:2},component:"form",children:[(0,x.jsxs)(d.ZP,{item:!0,sx:{display:"flex",justifyContent:"space-between",p:1},children:[(0,x.jsx)(c.Z,{children:null!==gt?"UPDATE NOMINEE":"ADD NEW NOMINEE"}),(0,x.jsx)(g.Z,{size:20,onClick:function(){vt(!1,!0),ut(),ht()}})]}),(0,x.jsx)(u.Z,{}),(0,x.jsx)(m.Z,{name:"name",value:oe,margin:"dense",invalid:!!Ve,placeholder:"Name*",onChange:dt,id:"data-name"}),(0,x.jsx)(d.ZP,{item:!0,sx:{mt:1},children:(0,x.jsx)(S.gc,{id:"relationID",name:"relation",onChange:function(e,t){return function(e){var t=null===e||void 0===e?void 0:e.value;D(t),"Others"!==t&&(ge(""),E("")),null!==t&&void 0!==t&&t.length&&t.trim()&&Ze("")}(t)},options:I,value:(0,y.NA)(I,f),renderInput:function(e){return(0,x.jsx)(m.Z,(0,a.Z)((0,a.Z)({},e),{},{placeholder:"Relation*"}))}})}),"Others"===f&&(0,x.jsx)(m.Z,{margin:"dense",name:"relation1",value:L,invalid:!!me,placeholder:"Relation Name*",onChange:dt,id:"data-Relation",style:{borderColor:me?"red":""}}),(0,x.jsx)(m.Z,{type:"email",name:"email",margin:"dense",value:O,invalid:!!Ce,placeholder:"Email*",onChange:dt,id:"data-email"}),(0,x.jsx)(m.Z,{type:"tel",maxLength:10,margin:"dense",value:W,invalid:!!we,name:"phone",onChange:dt,onKeyPress:function(e){return(0,j.ZP)(e)},id:"data-price1",placeholder:"Contact No.*"}),(0,x.jsx)(k.Z,{sx:{margin:0},control:(0,x.jsx)(R.Z,{sx:{padding:0},color:"secondary",name:"whatsapp",size:"small",checked:null!==gt?H===W:J,onChange:function(){return X(J?"":W),void K(!J)}}),label:(0,x.jsx)(c.Z,{fontSize:"15px",children:"Whatsapp same as Contact"})}),(0,x.jsx)(m.Z,{type:"tel",maxLength:10,margin:"dense",value:W,name:"phoneC",invalid:!!Re,disabled:null!==gt?H===W:J,onChange:dt,onKeyPress:function(e){return(0,j.ZP)(e)},id:"data-price",placeholder:"WhatsApp"}),(0,x.jsx)(m.Z,{type:"textarea",value:F,margin:"dense",name:"address",placeholder:"Address",onChange:function(e){return dt(e)},id:"data-Address",multiline:!0}),(0,x.jsx)("div",{children:Ge.map((function(e){return(0,x.jsx)(l.Z,{children:(0,x.jsxs)(c.Z,{children:["".concat(e.id," ").concat(e.question)," ",(0,x.jsx)(p,{size:"10",onClick:function(){return function(e){var t,n=(0,i.Z)(Ge);n=n.filter((function(t){return t.id!==e})),null!==(t=n)&&void 0!==t&&t.length&&n.forEach((function(e,t){e.id=t+1})),Ye((0,i.Z)(n))}(e.id)}}),(0,x.jsx)(Z.Z,{size:"10",onClick:function(){return function(e){tt(e),Qe(!0),Ge.forEach((function(t){t.id===e&&(Te(t.answer),_e(t.question))}))}(e.id)}})]})},e.id)}))}),(null===Ge||void 0===Ge?void 0:Ge.length)<3&&(0,x.jsx)(h.Z,{disabled:3===(null===Ge||void 0===Ge?void 0:Ge.length),onClick:at,children:"Add Secret Questions"}),(0,x.jsxs)(v.Z,{spacing:3,direction:"row",sx:{mt:3,justifyContent:"end"},children:[(0,x.jsx)(S.ZP,{varient:"outlined",label:null!==gt?"Cancel":"Reset",onClick:function(){null!==gt&&vt(!1,!0),ut(),ht()}}),(0,x.jsx)(S.ZP,{onClick:function(){return ct()},disabled:!(null!==Ge&&void 0!==Ge&&Ge.length),label:null!==gt?e.isLoading?(0,x.jsx)(C.Z,{}):"Update":e.isLoading?(0,x.jsx)(C.Z,{}):"Add"})]}),(0,x.jsx)(A,{modal:$e,secrets:Ge,toggleModal:at,fname:ze,setfname:_e,ftype:Be,setftype:Te,editID:et,clearCustomField:nt,handleSecrets:function(){if(et){var e=(0,i.Z)(Ge),t=e.findIndex((function(e){return e.id===et}));e[t].question=ze,e[t].answer=Be,Ye((0,i.Z)(e)),tt("")}else{var n=(0,i.Z)(Ge);n.push({id:(null===n||void 0===n?void 0:n.length)+1,question:ze,answer:Be}),Ye((0,i.Z)(n))}Qe(!1),_e(""),Te("")}})]})})}},25240:function(e,t,n){var a=n(29439),i=n(42357),s=n(47313),o=n(71535),l=n(96900),r=n(56972),d=n(71363),c=n(8247),u=n(61474),h=n(46417);t.Z=function(e){var t=(0,s.useState)("00"),n=(0,a.Z)(t,2),v=n[0],m=n[1],g=(0,s.useState)("00"),f=(0,a.Z)(g,2),x=f[0],p=f[1],Z=(0,s.useState)(!1),j=(0,a.Z)(Z,2),S=j[0],C=j[1],b=(0,s.useState)(0),y=(0,a.Z)(b,2),D=y[0],w=y[1];(0,s.useEffect)((function(){var e;return S&&(e=setInterval((function(){var e=D%60,t=Math.floor(D/60),n=1===String(e).length?"0".concat(e):e,a=1===String(t).length?"0".concat(t):t;m(n),p(a),w((function(e){return e+1}))}),650)),function(){return clearInterval(e)}}),[S,D]);var P=(0,i.useReactMediaRecorder)({video:!1,audio:!0,echoCancellation:!0,onStop:function(t,n){console.log(n),function(e){var t=new FileReader;return t.readAsDataURL(e),new Promise((function(e){t.onloadend=function(){e(t.result)}}))}(n).then((function(t){e.setRecVideo(t)}))}}),A=P.status,k=P.startRecording,R=P.stopRecording,I=P.pauseRecording,L=P.clearBlobUrl,E=P.mediaBlobUrl;return(0,h.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,h.jsxs)(l.Z,{variant:"outlined",children:[(0,h.jsxs)(r.Z,{children:[(0,h.jsxs)(d.Z,{sx:{background:"#f1f3f4"},borderRadius:"50px",padding:"15px",marginBottom:1,children:["Recording Status : ",A]}),(E||e.recVideo)&&(0,h.jsx)("audio",{style:{width:"100%"},src:E||e.recVideo,controls:!0}),(0,h.jsxs)(d.Z,{margin:"auto",border:" #cccccc",boxShadow:"0 0 0 0.06rem #cccccc",borderRadius:"2px",padding:"2px",width:"max-content",children:[x," : ",v]})]}),(0,h.jsxs)(c.Z,{sx:{justifyContent:"center"},children:[(0,h.jsx)(u.ZP,{varient:"contained",label:S?"Pause":"paused"===A?"Resume":"Start",onClick:function(){S?I():k(),C(!S)}}),(0,h.jsx)(u.ZP,{varient:"outlined",label:"Stop",onClick:function(){R(),C(!1)}}),(0,h.jsx)(u.ZP,{varient:"outlined",label:"Clear",onClick:function(){C(!1),w(0),m("00"),p("00"),L(),C(!1)}})]})]})})}},94304:function(e,t,n){n.r(t),n.d(t,{default:function(){return W}});var a=n(74165),i=n(15861),s=n(29439),o=n(47313),l=n(40229),r=n(71535),d=n(66135),c=n(31881),u=n.n(c),h=n(63861),v=n(46417),m=sessionStorage.getItem("authtoken"),g=function(){if(JSON.parse(sessionStorage.getItem("logInUserData"))){var e=sessionStorage.getItem("logInUserData")?JSON.parse(sessionStorage.getItem("logInUserData")):{};return function(){var t=(0,i.Z)((0,a.Z)().mark((function t(n){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"LOAD_MSG"}),t.next=3,u().get("/backendapi/sender/getlist/".concat(e._id),{headers:{Authorization:"Bearer ".concat(m)}}).then((function(e){n({type:"GET_MSG",getmesssages:e.data})})).catch((function(e){n({type:"ERR_MSG"})}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},f=n(51427),x=n(39995),p=n(71363),Z=n(89870),j=n(7081),S=n(5448),C=n(88356),b=n(45959),y=n(60236),D=n(96900),w=n(22449),P=n(56972),A=n(96327),k=n(54727),R=n(1087),I=function(e){var t=(0,o.useState)(!1),n=(0,s.Z)(t,2),a=n[0],i=n[1],d=(0,o.useState)(""),c=(0,s.Z)(d,2),m=c[0],g=c[1],f=(0,o.useState)(""),x=(0,s.Z)(f,2),I=x[0],L=x[1],E=(0,o.useState)(!1),V=(0,s.Z)(E,2),M=V[0],O=V[1],N=(0,o.useState)(),z=(0,s.Z)(N,2),_=z[0],F=z[1],U=(0,o.useState)(!1),B=(0,s.Z)(U,2),T=B[0],W=B[1],q=(0,o.useState)([]),G=(0,s.Z)(q,2),Y=G[0],J=G[1],K=(0,o.useState)(""),$=(0,s.Z)(K,2),Q=$[0],H=$[1],X=(0,o.useState)(),ee=(0,s.Z)(X,2),te=ee[0],ne=ee[1],ae=function(){i(!a)},ie=function(e){g(m!==e?e:"")},se=function(t){var n;return null!==(n=e.colorOption)&&void 0!==n&&n[t]?e.colorOption[t]:t},oe=function(t){var n,a,i="";(null===t||void 0===t||null===(n=t.nominees)||void 0===n?void 0:n.length)&&t.nominees.forEach((function(e,n){n===t.nominees.length-1?i+=null===e||void 0===e?void 0:e.name:i="".concat(i+(null===e||void 0===e?void 0:e.name),", ")}));var s=(0,v.jsxs)(r.ZP,{container:!0,spacing:2,children:[(0,v.jsxs)(r.ZP,{item:!0,sm:5,xs:12,children:[(0,v.jsxs)(p.Z,{children:[(0,v.jsx)("b",{children:" Type : "})," ",t.type,(0,v.jsx)("br",{}),(0,v.jsx)("b",{children:" Description : "})," ",t.desc,(0,v.jsx)("br",{}),(0,v.jsx)("b",{children:" Date : "})," ",null!==t&&void 0!==t&&t.date?(0,k.p6)(null===t||void 0===t||null===(a=t.date)||void 0===a?void 0:a.split("T")[0]):"After Death",(null===t||void 0===t?void 0:t.time)&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("b",{children:" Time : "})," e.time"]})]}),("Video"===t.type||"Voice"===t.type)&&(0,v.jsx)(Z.Z,{style:{width:"100%",marginTop:"-2px"},onClick:function(){!function(e,t){O(!0),W("Video"===t),ae();var n=sessionStorage.getItem("authtoken");u().get("/backendapi/sender/message/".concat(e),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){var t;if(e.data&&null!==(t=e.data[0])&&void 0!==t&&t.media){for(var n,a,i=null===(n=e.data[0])||void 0===n||null===(a=n.media)||void 0===a?void 0:a.split("base64,"),s=i[0].substring(5,i[0].length-1),o=atob(i[1]),l=new Array(o.length),r=0;r<o.length;r++)l[r]=o.charCodeAt(r);var d=new Uint8Array(l),c=new Blob([d],{type:s}),u=URL.createObjectURL(c);F(u),O(!1)}}))}(t.msg,t.type)},children:"Video"===t.type?"Play Video":"Play Audio"})]}),(0,v.jsx)(r.ZP,{item:!0,sm:5,xs:12,children:(0,v.jsxs)(p.Z,{children:[(0,v.jsx)("b",{children:"Status :"})," ",0===t.status?(0,v.jsx)("span",{children:"Pending"}):1===t.status?(0,v.jsx)("span",{children:"Delivered"}):(0,v.jsxs)("span",{children:["Failed : ",t.failReason]}),(0,v.jsx)("br",{}),(0,v.jsx)("b",{children:"Receiver Name :"})," ",t.rname,(0,v.jsx)("br",{}),(0,v.jsx)("b",{children:"Receiver Email :"})," ",t.remail,(0,v.jsx)("br",{}),(0,v.jsx)("b",{children:"Receiver Phone :"})," ",t.rphone]})}),(0,v.jsxs)(r.ZP,{item:!0,display:"flex",sm:2,xs:12,children:[(0,v.jsx)(p.Z,{sx:{color:"blue",cursor:"pointer"},onClick:function(){return e.editItem(t)},children:"Edit"}),(0,v.jsx)(p.Z,{sx:{mx:1,color:"red",cursor:"pointer"},onClick:function(){H(t._id),L(!0)},children:"Delete"})]})]});return s},le=(null===te||void 0===te?void 0:te.length)>0?Y:e.collapseItems;return(0,v.jsxs)(l.Z,{children:[(0,v.jsxs)(j.Z,{open:a,onClose:ae,centered:!0,children:[(0,v.jsx)(S.Z,{children:"Message"}),(0,v.jsxs)(C.Z,{children:[M&&(0,v.jsx)(b.Z,{}),!M&&T&&(0,v.jsx)("video",{src:_,controls:!0,autoPlay:!0,width:"100%",height:300}),!M&&!T&&(0,v.jsx)(y.Z,{component:"audio",controls:!0,image:_,autoPlay:!0})]})]}),e.loadingmsg&&null===e.collapseItems?(0,v.jsx)(b.Z,{}):(0,v.jsxs)(D.Z,{children:[(0,v.jsxs)(r.ZP,{container:!0,sx:{px:2.5,py:1},children:[(0,v.jsx)(r.ZP,{item:!0,xs:6,children:(0,v.jsx)(p.Z,{variant:"secondary",component:"h3",children:e.heading})}),(0,v.jsx)(r.ZP,{item:!0,xs:6,children:(0,v.jsx)(w.Z,{onChange:function(t){return function(t){ne(t);var n=e.collapseItems.filter((function(e){var n=e.desc.toLowerCase().startsWith(t.toLowerCase())||e.type.toLowerCase().startsWith(t.toLowerCase())||e.title.toLowerCase().startsWith(t.toLowerCase()),a=e.desc.toLowerCase().includes(t.toLowerCase())||e.type.toLowerCase().includes(t.toLowerCase())||e.title.toLowerCase().includes(t.toLowerCase());return!(!n&&!a)}));J(n)}(t.target.value)},placeholder:"Search"})})]}),(0,v.jsx)(A.Z,{handleConfirm:function(){var t;t=Q,u().delete("/backendapi/sender/deletebyid/".concat(t),{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}).then((function(e){e&&h.A9})).catch(),L(!1),e.refreshData.callFunc(!e.refreshData.value)},isOpen:I,closeModal:function(){return L(!1)}}),(0,v.jsx)(P.Z,{children:(null===le||void 0===le?void 0:le.length)>0?le.map((function(e){return(0,v.jsx)(o.Fragment,{children:(0,v.jsx)(R.Z,{collapseID:m,setcollapseID:g,collapseItem:{content:oe(e),title:null===e||void 0===e?void 0:e.title,id:e._id},formatme:se,toggleCollapse:ie})},e._id)})):(0,v.jsx)("span",{children:"No Messages Found"})})]})]})},L=n(10226),E=n(1413),V=n(75969),M=n(95716),O=n(82363),N=n(25240),z=n(61474),_=n(71639),F=n(86240),U=n(39653),B=[{value:"Attachment",label:"Attachment",color:"#00B8D9",isFixed:!0},{value:"Text",label:"Text",color:"#00B8D9",isFixed:!0},{value:"Voice",label:"Voice",color:"#0052CC",isFixed:!0},{value:"Video",label:"Video",color:"#0052CC",isFixed:!0}],T=function(e){var t,n=e.oldMsg,a=e.rname,i=e.sameAsAbove,d=e.setRecVideo,c=e.rphone,u=e.setrphone,m=e.edititem,g=e.settype,f=e.settitle,x=e.nomineeOption2,p=e.userInput,Z=e.setuserInput,j=e.remail,S=e.setremail,C=e.setdesc,b=e.desc,y=e.type,w=e.title,A=e.setdate,R=e.date,I=e.setsignature,L=e.signature,T=e.handleCheck,W=e.handleReset,q=e.handleSubmit,G=e.validEmail,Y=e.validPhone,J=e.validDate,K=e.recVideo,$=e.setfilesOndrop,Q=e.resetDropzone,H=(0,o.useState)(""),X=(0,s.Z)(H,2),ee=X[0],te=X[1],ne=!(null!==a&&void 0!==a&&a.length)||!(null!==c&&void 0!==c&&c.length)||!(null!==j&&void 0!==j&&j.length)||!(null!==y&&void 0!==y&&y.length)||!(null!==w&&void 0!==w&&w.length)||!i&&!(null!==R&&void 0!==R&&R.length)||!G||!Y||!i&&!J||R===(null===n||void 0===n||null===(t=n.date)||void 0===t?void 0:t.split("T")[0])&&b===(null===n||void 0===n?void 0:n.desc)&&a===(null===n||void 0===n?void 0:n.rname)&&j===(null===n||void 0===n?void 0:n.remail)&&c===(null===n||void 0===n?void 0:n.rphone)&&L===(null===n||void 0===n?void 0:n.signature)&&w===(null===n||void 0===n?void 0:n.title),ae=function(e){e.length<=10&&(u(e),null!==e&&void 0!==e&&e.length&&10===e.length&&e.trim()&&k.Yd.test(e)?te(""):te("Enter Valid Contact No."))};return(0,v.jsxs)(D.Z,{children:[(0,v.jsx)(h.ll,{title:m?"Edit Message":"Schedule Message"}),(0,v.jsxs)(P.Z,{children:[(0,v.jsxs)(r.ZP,{container:!0,spacing:1,justifyContent:"center",children:[(0,v.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,v.jsx)(z.gc,{name:"color",options:B,isDisabled:m,onChange:function(e,t){return g(null===t||void 0===t?void 0:t.value)},value:(0,F.NA)(B,y),renderInput:function(e){return(0,v.jsx)(U.Z,(0,E.Z)((0,E.Z)({},e),{},{placeholder:m?y:"Message Type *"}))}})}),(0,v.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,v.jsx)(z.gc,{name:a,options:x,onChange:function(e,t){return Z(t)},value:(0,F.NA)(x,null===p||void 0===p?void 0:p.value),renderInput:function(e){return(0,v.jsx)(U.Z,(0,E.Z)((0,E.Z)({},e),{},{placeholder:"Reciever"}))}})}),y&&(0,v.jsxs)(o.Fragment,{children:[(0,v.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,v.jsx)(U.Z,{type:"email",id:"remail",placeholder:"Receiver Email *",value:j,onChange:function(e){return S(e.target.value)}})}),(0,v.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,v.jsx)(U.Z,{type:"number",id:"phone",maxLength:10,invalid:!!ee,placeholder:"Receiver Phone *",value:c,onChange:function(e){ae(e.target.value)},onKeyPress:function(e){return(0,k.ZP)(e)}})}),(0,v.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,v.jsx)(U.Z,{id:"title",placeholder:"Subject *",value:w,onChange:function(e){return f(e.target.value)}})}),(0,v.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,v.jsx)(U.Z,{type:"Date",name:"Date",value:R,id:"exampleDate",placeholder:"Enter Date",disabled:!!i,min:(0,F.BZ)(),max:"9999-12-31",onChange:function(e){return A(e.target.value)}})}),"Attachment"===y&&(0,v.jsx)(_.fh,{notMulti:1,setfilesOndrop:$,resetDropzone:Q,file:K}),"Voice"===y&&(0,v.jsx)(N.Z,(0,E.Z)({},e)),"Video"===y&&(0,v.jsx)(O.Z,{setRecVideo:d,recVideo:K}),(0,v.jsx)(r.ZP,{item:!0,xs:12,sm:12,children:(0,v.jsx)(U.Z,{type:"textarea",placeholder:"Description",rows:"3",id:"description",value:b,onChange:function(e){return C(e.target.value)}})}),(0,v.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,v.jsx)(U.Z,{type:"textarea",placeholder:"Signature",className:"input-label placeholder ",rows:"1",id:"signature",value:L,onChange:function(e){return I(e.target.value)}})}),(0,v.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,v.jsx)(V.Z,{label:"Deliver after my death",control:(0,v.jsx)(M.Z,{checked:i,onChange:function(){return T()}})})})]})]}),(0,v.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,v.jsx)(z.AG,{label:m?"Cancel":"Reset",handleClick:function(){return W()}}),(0,v.jsx)(z.k4,{label:m?"Update":"Add",handleClick:q,disabled:ne})," "]})]})]})},W=(0,d.$j)((function(e){var t,n=e.reducer,a=n.dataList,i=void 0===a?{}:a,s=n.sender,o=void 0===s?{}:s,l=null!==o&&void 0!==o&&null!==(t=o.getmesssages)&&void 0!==t&&t.length?o.getmesssages:[];return{dataList:i,listLoading:i.totalRecordsLoading,messages:l,loadingmsg:o.loadingmsg}}),{scheduleNewMessage:function(e){return function(t){var n=JSON.parse(sessionStorage.getItem("logInUserData"))._id;e.user=n,u().post("/backendapi/sender/schedulenew",e,{headers:{Authorization:"Bearer ".concat(m)}}).then((function(n){t({type:"ADD_MSG",getmesssages:e}),t(g()),h.A9})).catch((function(e){return console.log(e)}))}},getData:f.Yu,editMessage:function(e){return function(t){u().post("/backendapi/sender/update",e,{headers:{Authorization:"Bearer ".concat(m)}}).then((function(n){t({type:"ADD_MSG",getmesssages:[e]}),t(g()),h.A9})).catch((function(e){return console.log(e)}))}},addData:f.Id,getScheduledMessages:g})((function(e){var t,n=o.createRef(),d=(0,o.useState)(""),c=(0,s.Z)(d,2),u=c[0],m=c[1],g=(0,o.useState)(""),f=(0,s.Z)(g,2),p=f[0],Z=f[1],j=(0,o.useState)(!1),S=(0,s.Z)(j,2),C=S[0],b=S[1],y=(0,o.useState)(""),D=(0,s.Z)(y,2),w=D[0],P=D[1],A=(0,o.useState)(""),R=(0,s.Z)(A,2),E=R[0],V=R[1],M=(0,o.useState)(""),O=(0,s.Z)(M,2),N=O[0],z=O[1],_=(0,o.useState)(!1),F=(0,s.Z)(_,2),U=F[0],B=F[1],W=(0,o.useState)(null),q=(0,s.Z)(W,2),G=q[0],Y=q[1],J=(0,o.useState)(null),K=(0,s.Z)(J,2),$=K[0],Q=K[1],H=(0,o.useState)([]),X=(0,s.Z)(H,2),ee=X[0],te=X[1],ne=(0,o.useState)(!1),ae=(0,s.Z)(ne,2),ie=ae[0],se=ae[1],oe=(0,o.useState)(!1),le=(0,s.Z)(oe,2),re=le[0],de=le[1],ce=(0,o.useState)(""),ue=(0,s.Z)(ce,2),he=ue[0],ve=ue[1],me=(0,o.useState)(!1),ge=(0,s.Z)(me,2),fe=ge[0],xe=ge[1],pe=(0,o.useState)(null),Ze=(0,s.Z)(pe,2),je=Ze[0],Se=Ze[1],Ce=(0,o.useState)(!1),be=(0,s.Z)(Ce,2),ye=be[0],De=be[1],we=(0,o.useState)([]),Pe=(0,s.Z)(we,2),Ae=Pe[0],ke=Pe[1],Re=(0,o.useState)([]),Ie=(0,s.Z)(Re,2),Le=Ie[0],Ee=Ie[1],Ve=(0,o.useState)(""),Me=(0,s.Z)(Ve,2),Oe=Me[0],Ne=Me[1],ze=(0,o.useState)(""),_e=(0,s.Z)(ze,2),Fe=_e[0],Ue=_e[1],Be=(0,o.useState)(""),Te=(0,s.Z)(Be,2),We=Te[0],qe=Te[1],Ge=(0,o.useState)(""),Ye=(0,s.Z)(Ge,2),Je=Ye[0],Ke=Ye[1],$e=(0,o.useState)([]),Qe=(0,s.Z)($e,2),He=Qe[0],Xe=Qe[1],et=(0,o.useState)(!1),tt=(0,s.Z)(et,2),nt=tt[0],at=tt[1],it=(0,o.useState)(!0),st=(0,s.Z)(it,2),ot=st[0],lt=st[1],rt=(0,o.useState)(!0),dt=(0,s.Z)(rt,2),ct=dt[0],ut=dt[1],ht=(0,o.useState)(!0),vt=(0,s.Z)(ht,2),mt=vt[0],gt=vt[1];(0,o.useEffect)((function(){if(console.log(Je),null!==Je&&void 0!==Je&&Je.value){var e=Le.filter((function(e){return e._id===Je.value}));Ne(null===e||void 0===e?void 0:e[0].name),Ue(null===e||void 0===e?void 0:e[0].email),qe(null===e||void 0===e?void 0:e[0].primaryContact)}else 0===(null===Je||void 0===Je?void 0:Je.length)?(Ne(Je),Ue(""),qe("")):Ne(Je)}),[Je]);(0,o.useEffect)((function(){e.getScheduledMessages(),!e.listLoading&&e.getData()}),[nt]);var ft=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];de(e),t&&(Se(null),xe(!0))};(0,o.useEffect)((function(){if(e.dataList.data.length){var t=[];Ee(e.dataList.data),e.dataList.data.forEach((function(e){var n={value:e._id,label:"".concat(e.name," - ").concat(e.relation),color:"#00B8D9",isFixed:!1};t.push(n)})),Xe(t)}}),[e.dataList.data]);var xt=function(){var t=(0,i.Z)((0,a.Z)().mark((function t(n){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return De(!0),t.prev=1,t.next=4,e.addData(n);case 4:Ne(""),qe(""),Ue(""),ft(!1,!0),t.next=13;break;case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",(0,v.jsx)(h.A9,{handleClick:function(){},openSnack:!0,openSnackMsg:"Add Nominee Failed! Please contact admin",severity:"error"}));case 13:return t.prev=13,De(!1),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])})));return function(e){return t.apply(this,arguments)}}(),pt=function(){B(!1),Ne(""),qe(""),Ue(""),ve(""),z(""),V(""),Z(""),b(!1),P(""),ke([]),Ke(""),m(""),te("")};return(0,v.jsxs)(l.Z,{children:[(0,v.jsx)(L.Z,{show:re,data:je,updateData:e.addData,addData:xt,isLoading:ye,handleSidebar:ft,getData:e.getData,dataParams:e.parsedFilter,addNew:fe}),(0,v.jsxs)(r.ZP,{container:!0,spacing:1,sx:{p:.5},children:[(0,v.jsx)(r.ZP,{item:!0,xs:12,sm:8,children:(0,v.jsx)(T,{oldMsg:$,handleReset:pt,handleSubmit:function(){U?e.editMessage({_id:G,desc:E,type:N,title:he,date:p,signature:w,rname:Oe,remail:Fe,rphone:We,msg:("Voice"===N||"Video"===N||"Attachment"===N)&&u||ee.length&&ee||""}):e.scheduleNewMessage({desc:E,type:N,title:he,date:p,signature:w,rname:Oe,remail:Fe,rphone:We,msg:("Voice"===N||"Video"===N||"Attachment"===N)&&u||ee.length&&ee||""}),pt()},sameAsAbove:C,setdate:function(e){var t=new Date(e)>new Date||""===e;Z(e),gt(t)},setfilesOndrop:function(e){se(!1),te(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))},resetDropzone:ie,setRecVideo:m,setdesc:V,setsignature:P,rphone:We,setrphone:function(e){var t=k.Yd.test(e);qe(e),ut(t)},validPhone:ct,selecttype:n,edititem:U,settype:z,settitle:ve,nomineeOption2:He,remail:Fe,validEmail:ot,rname:Oe,setremail:function(e){var t=String(e).toLowerCase().match(/^([A-Za-z0-9_\-.])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,})$/);Ue(e),lt(t)},desc:E,type:N,title:he,date:p,validDate:mt,signature:w,handleCheck:function(){!C&&Z(""),b(!C)},userInput:Je,setuserInput:Ke,recVideo:u})}),(0,v.jsx)(x.Z,{}),(0,v.jsx)(r.ZP,{item:!0,xs:12,children:(0,v.jsx)(I,{heading:"Messages History",collapseItems:e.messages,colorOption:null===(t=e.messages)||void 0===t?void 0:t.colorOption,editItem:function(e){var t;Q(e);var n=e.date,a=e.desc,i=e.rname,s=e.remail,o=e.rphone,l=e.signature,r=e.title,d=e.type,c=e._id,u=e.mediaDetails;B(!0),Y(c),Z(null===n||void 0===n?void 0:n.split("T")[0]),V(a),ke(Ae),Ue(s),Ne(i),qe(o),P(l),ve(r),z(d),b(!n),m("Attachment"===d?u:null===(t=u[0])||void 0===t?void 0:t.media)},loadingmsg:e.loadingmsg,handleFilter:function(){console.log("Call filter function")},refreshData:{value:nt,callFunc:at}})})]})]})}))},82363:function(e,t,n){var a=n(29439),i=n(47313),s=n(61474),o=n(42357),l=n(38693),r=n(57441),d=n(16423),c=n(91536),u=n(71535),h=n(96900),v=n(56972),m=n(71363),g=n(40229),f=n(8247),x=n(46417),p=function(e){var t=e.stream,n=(0,i.useRef)(null);return(0,i.useEffect)((function(){n.current&&t&&(n.current.srcObject=t)}),[t]),t?(0,x.jsx)("video",{ref:n,width:"100%",height:"100%",autoPlay:!0,controls:!0}):null};t.Z=function(e){var t=e.setRecVideo,n=e.recVideo,Z=(0,i.useState)(!0),j=(0,a.Z)(Z,2),S=j[0],C=j[1],b=(0,i.useState)(!1),y=(0,a.Z)(b,2),D=y[0],w=y[1],P=(0,i.useState)(!1),A=(0,a.Z)(P,2),k=A[0],R=A[1];return(0,x.jsx)(u.ZP,{item:!0,xs:12,sm:8,children:(0,x.jsx)(o.ReactMediaRecorder,{screen:k,video:!k,audio:S,onStop:function(e,n){console.log(n),function(e){var t=new FileReader;return t.readAsDataURL(e),new Promise((function(e){t.onloadend=function(){e(t.result)}}))}(n).then((function(e){console.log(e),t(e)}))},render:function(e){var t=e.status,a=e.startRecording,i=e.pauseRecording,o=e.stopRecording,u=e.clearBlobUrl,Z=e.mediaBlobUrl,j=e.previewStream;return(0,x.jsxs)(h.Z,{variant:"outlined",children:[(0,x.jsxs)(v.Z,{children:[(0,x.jsxs)(m.Z,{textAlign:"center",children:["Status : ",t]}),D&&j&&(0,x.jsx)(p,{stream:j}),!D&&(Z||n)&&(0,x.jsx)("video",{src:Z||n,controls:!0,autoPlay:!1,width:"100%",height:"100%"}),(0,x.jsxs)(g.Z,{display:"flex",justifyContent:"space-evenly",sx:{mt:2},children:[S?(0,x.jsx)(l.Z,{fontSize:"large",onClick:function(){return C(!S)}}):(0,x.jsx)(r.Z,{fontSize:"large",onClick:function(){return C(!S)}}),(0,x.jsx)(d.Z,{fontSize:"large",onClick:function(e){R(!0)},color:"".concat(k&&"primary")}),(0,x.jsx)(c.Z,{fontSize:"large",onClick:function(e){R(!1)},color:"".concat(!k&&"primary")})]})]}),(0,x.jsxs)(f.Z,{sx:{justifyContent:"center"},children:[(0,x.jsx)(s.ZP,{varient:"contained",label:D?"Pause":"paused"===t?"Resume":"Start",onClick:function(){D?i():a(),w(!D)}}),(0,x.jsx)(s.ZP,{varient:"outlined",label:"Stop",onClick:function(){o(),w(!1)}}),(0,x.jsx)(s.ZP,{varient:"outlined",label:"Clear",onClick:function(){u(),w(!1)}})]})]})}})})}},6306:function(e,t,n){var a=n(64836);t.Z=void 0;var i=a(n(45045)),s=n(46417),o=(0,i.default)((0,s.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.Z=o}}]);