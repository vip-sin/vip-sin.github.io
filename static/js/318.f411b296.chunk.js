"use strict";(self.webpackChunkvpn=self.webpackChunkvpn||[]).push([[318],{1087:function(e,n,t){t.d(n,{Z:function(){return r}});t(47313);var i=t(92336),a=t(2884),l=t(24694),o=t(6306),s=t(46417);function r(e){var n=e.collapseID,t=(e.setcollapseID,e.collapseItem),r=e.formatme,d=e.toggleCollapse;return(0,s.jsxs)(i.Z,{sx:{my:.9},expanded:n===t.id,onChange:function(){return d(t.id)},children:[(0,s.jsx)(l.Z,{expandIcon:(0,s.jsx)(o.Z,{}),children:r(t.title)}),(0,s.jsx)(a.Z,{children:t.content})]})}},18825:function(e,n,t){t.d(n,{z:function(){return r}});var i=t(71535),a=t(40229),l=t(22449),o=(t(47313),t(94843)),s=t(46417),r=function(e){return(0,s.jsxs)(i.ZP,{container:!0,sx:{px:2.5,py:1},children:[(0,s.jsx)(i.ZP,{item:!0,xs:6,children:(0,s.jsx)(o.ll,{title:e.heading})}),(0,s.jsx)(i.ZP,{item:!0,xs:6,children:(0,s.jsx)(a.Z,{display:"flex",justifyContent:"flex-end",children:(0,s.jsx)(l.Z,{onChange:function(n){return e.search(n.target.value)},placeholder:"Search"})})})]})}},69933:function(e,n,t){t.d(n,{r:function(){return m}});var i=t(1413),a=t(93433),l=t(29439),o=t(47313),s=t(30712),r=t(13760),d=t(80614),u=t(6938),c=t(71363),h=t(89870),v=t(62463),f=t(12613),x=t(46417),m=function(e){var n=(0,o.useState)(e.file?e.file:[]),t=(0,l.Z)(n,2),m=t[0],p=t[1],g=(0,d.uI)({maxFiles:e.notMulti?1:5,multiple:!e.notMulti,onDrop:function(n){if(1===e.notMulti)e.setfilesOndrop(n),p(n.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})));else{if((m.length?m.filter((function(e){var t;return(null===e||void 0===e?void 0:e.name)===(null===(t=n[0])||void 0===t?void 0:t.name)})):[]).length)return(0,x.jsx)(f.A9,{handleClick:function(){},openSnack:!0,openSnackMsg:"File already added"});e.setfilesOndrop([].concat((0,a.Z)(m),(0,a.Z)(n))),p([].concat((0,a.Z)(m),(0,a.Z)(n)))}}}),Z=g.getInputProps,j=g.open,S=null===m||void 0===m?void 0:m.map((function(n){return(0,x.jsx)(u.Z,{sx:{m:1},label:(0,x.jsxs)(c.Z,{children:["".concat(n.name.length>15?"".concat(n.name.slice(0,10),"..."):n.name),(0,x.jsx)(s.Z,{size:15,sx:{margin:"-6px 6px"},onClick:function(t){t.stopPropagation(),function(n){1===(null===m||void 0===m?void 0:m.length)&&e.setfilesParent([]),e.isMulti&&(p(m.filter((function(e){return e!==n}))),e.setfilesParent(m.filter((function(e){return e!==n}))))}(n)}})]},n.name),variant:"outlined"},n.name)}));return(0,o.useEffect)((function(){return function(){m.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[m]),(0,o.useEffect)((function(){e.resetDropzone&&p([])}),[e.resetDropzone]),(0,x.jsxs)(h.Z,{variant:"outlined",fullWidth:!0,sx:{display:"inline-block",my:1},children:[(0,x.jsxs)(v.Z,{onClick:j,children:[(0,x.jsx)(f.nv,(0,i.Z)({},Z())),(S.length<=0||e.isMulti)&&(0,x.jsxs)(c.Z,{children:["Drag `n` drop Or Browse ",(0,x.jsx)(r.Z,{sx:{margin:"-6px 6px"}})]})]}),(0,x.jsx)("div",{children:S.length>0&&(0,x.jsx)("aside",{style:{display:"flex"},children:S})})]})}},6039:function(e,n,t){t.d(n,{Z:function(){return A}});var i=t(1413),a=t(93433),l=t(29439),o=t(47313),s=t(40229),r=t(82500),d=t(71535),u=t(71363),c=t(34940),h=t(89870),v=t(62463),f=t(39653),x=t(8586),m=t(85585),p=t(54727),g=t(61474),Z=t(85120),j=t(12613),S=t(86282),C=t(7081),b=t(5448),y=t(88356),P=t(46417);function w(e){var n=e.modal,t=e.toggleModal,a=e.fname,l=e.setfname,o=e.ftype,s=e.setftype,r=e.editID,d=e.clearCustomField,u=e.handleSecrets,c=e.secrets;return(0,P.jsxs)(C.Z,{open:n,fullWidth:!0,maxWidth:"xs",onClose:t,children:[(0,P.jsx)(b.Z,{children:"Add a secret question"}),(0,P.jsxs)(y.Z,{children:[(0,P.jsx)(g.gc,{name:"relation",options:S.DD.filter((function(e){var n,t,i;return e.value!==(null===c||void 0===c||null===(n=c[0])||void 0===n?void 0:n.question)&&e.value!==(null===c||void 0===c||null===(t=c[1])||void 0===t?void 0:t.question)&&e.value!==(null===c||void 0===c||null===(i=c[2])||void 0===i?void 0:i.question)})),onChange:function(e,n){return function(e){var n=null===e||void 0===e?void 0:e.value;l(n)}(n)},value:(0,S.NA)(S.DD,a),renderInput:function(e){return(0,P.jsx)(f.Z,(0,i.Z)((0,i.Z)({},e),{},{placeholder:" Secret Question"}))}}),(0,P.jsx)(f.Z,{type:"text",name:"Answer",margin:"normal",size:"small",fullWidth:!0,error:!!((null===o||void 0===o?void 0:o.length)<4),value:o,placeholder:"Answer",onChange:function(e){s(e.target.value)}}),(0,P.jsxs)(v.Z,{spacing:3,direction:"row",sx:{mt:3,justifyContent:"start"},children:[(0,P.jsx)(g.ZP,{varient:"outlined",label:"Cancel",onClick:function(e){d()}}),(0,P.jsx)(g.ZP,{varient:"contained",label:r?"Update":"Add",disabled:!(null!==a&&void 0!==a&&a.length)||""===o.trim(),onClick:u})]})]})]})}var D=t(75969),k=t(95716),R=JSON.parse(sessionStorage.getItem("dropdowns")).nomineeRelation;function A(e){var n=(0,o.useState)(),t=(0,l.Z)(n,2),C=t[0],b=t[1],y=(0,o.useState)(""),A=(0,l.Z)(y,2),L=A[0],E=A[1],M=(0,o.useState)(""),I=(0,l.Z)(M,2),V=I[0],O=I[1],z=(0,o.useState)(""),N=(0,l.Z)(z,2),F=N[0],U=N[1],_=(0,o.useState)(""),B=(0,l.Z)(_,2),W=B[0],q=B[1],T=(0,o.useState)(!0),Y=(0,l.Z)(T,2),K=Y[0],$=Y[1],Q=(0,o.useState)(""),H=(0,l.Z)(Q,2),J=H[0],G=H[1],X=(0,o.useState)(""),ee=(0,l.Z)(X,2),ne=ee[0],te=ee[1],ie=(0,o.useState)(""),ae=(0,l.Z)(ie,2),le=ae[0],oe=ae[1],se=(0,o.useState)(!1),re=(0,l.Z)(se,2),de=re[0],ue=re[1],ce=(0,o.useState)(""),he=(0,l.Z)(ce,2),ve=he[0],fe=he[1],xe=(0,o.useState)(""),me=(0,l.Z)(xe,2),pe=me[0],ge=me[1],Ze=(0,o.useState)(""),je=(0,l.Z)(Ze,2),Se=je[0],Ce=je[1],be=(0,o.useState)(""),ye=(0,l.Z)(be,2),Pe=ye[0],we=ye[1],De=(0,o.useState)(""),ke=(0,l.Z)(De,2),Re=ke[0],Ae=ke[1],Le=(0,o.useState)(""),Ee=(0,l.Z)(Le,2),Me=Ee[0],Ie=Ee[1],Ve=(0,o.useState)(""),Oe=(0,l.Z)(Ve,2),ze=Oe[0],Ne=Oe[1],Fe=(0,o.useState)(""),Ue=(0,l.Z)(Fe,2),_e=Ue[0],Be=Ue[1],We=(0,o.useState)([]),qe=(0,l.Z)(We,2),Te=qe[0],Ye=qe[1],Ke=(0,o.useState)(!1),$e=(0,l.Z)(Ke,2),Qe=$e[0],He=$e[1],Je=(0,o.useState)(""),Ge=(0,l.Z)(Je,2),Xe=Ge[0],en=Ge[1],nn=function(){Ne(""),Be(""),He(!Qe)},tn=function(){Qe&&nn(),He(!Qe)};(0,o.useEffect)((function(){if(e.data){var n=e.data,t=n.id,i=n.name,l=n.relation,o=n.relation1,s=n.address,r=n.email,d=n.primaryContact,u=n.secondaryContact,c=e.data.secrets;hn(),te(t),oe(i),b(l),"Others"===l&&E(o),U(s),O(r),q(d),G(u),(null===c||void 0===c?void 0:c.length)&&Ye((0,a.Z)(c))}else(null===e.data||de)&&(cn(),hn());ue(!1)}),[e.data]);var an=function(){return Ie("Enter Valid Name")},ln=function(){return Ce("Enter Valid Email")},on=function(){return we("Enter Valid Contact No.")},sn=function(){return ge("Enter Valid Relation")},rn=function(){return fe("Enter Valid Relation")},dn=function(e){var n,t=e.target.name,i=null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value;switch(t){case"name":oe(i),null!==i&&void 0!==i&&i.length&&i.trim()?Ie(""):an();break;case"email":O(i);var a=i.match(/^([A-Za-z0-9_\-.])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,})$/);i&&a&&i.trim()?Ce(""):ln();break;case"address":U(i);break;case"phone":q(i),K&&G(i),null!==i&&void 0!==i&&i.length&&10===i.length&&i.trim()&&p.Yd.test(i)?we(""):on();break;case"phoneC":G(i),10===i.length&&i.trim()&&p.Yd.test(i)?Ae(""):Ae("Enter Valid whatsapp No."),(null===i||void 0===i||!i.length)&&Ae("");break;case"relation":null!==i&&void 0!==i&&i.length&&i.trim()?ge(""):sn();break;case"relation1":E(i),null!==i&&void 0!==i&&i.length&&i.trim()?fe(""):rn()}},un=function(n){console.log("das"),n.preventDefault();var t=((null===le||void 0===le||!le.length)&&an(),(null===V||void 0===V||!V.length)&&ln(),(null===W||void 0===W||!W.length)&&on(),(null===C||void 0===C||!C.length)&&sn(),"Others"===C&&(null===L||void 0===L||!L.length)&&rn(),"Others"!==C&&fe(""),Me||!(null!==le&&void 0!==le&&le.length)||pe||!(null!==C&&void 0!==C&&C.length)||ve||"Others"===C&&!(null!==L&&void 0!==L&&L.length)||Se||!(null!==V&&void 0!==V&&V.length)||Pe||!(null!==W&&void 0!==W&&W.length)||Re);if(t&&j.A9,e.isLoading&&(j.A9,e.data),t||e.isLoading)console.log(t,"inValid");else{var i={relation:null===C||void 0===C?void 0:C.trim(),relation1:null===L||void 0===L?void 0:L.trim(),email:null===V||void 0===V?void 0:V.trim(),address:null===F||void 0===F?void 0:F.trim(),contact1:null===W||void 0===W?void 0:W.trim(),contact2:null===J||void 0===J?void 0:J.trim(),id:null===ne||void 0===ne?void 0:ne.trim(),name:null===le||void 0===le?void 0:le.trim(),secrets:Te};null!==e.data?(i._id=e.data._id,i.usage=e.data.usage,e.updateData(i)):(ue(!0),e.addData(i),cn(),hn())}},cn=function(){oe(""),Ye([]),b(""),E(""),O(""),U(""),q(""),G("")},hn=function(){Ie(""),we(""),Ae(""),Ce(""),fe("")},vn=e.handleSidebar,fn=e.show,xn=e.data;return(0,P.jsx)(r.Z,{anchor:"right",open:fn,onOpen:function(){},onClose:function(){},children:(0,P.jsxs)(s.Z,{sx:{mt:8,width:350,px:2},component:"form",children:[(0,P.jsxs)(d.ZP,{item:!0,sx:{display:"flex",justifyContent:"space-between",p:1},children:[(0,P.jsx)(u.Z,{children:null!==xn?"UPDATE NOMINEE":"ADD NEW NOMINEE"}),(0,P.jsx)(x.Z,{size:20,onClick:function(){vn(!1,!0),cn(),hn()}})]}),(0,P.jsx)(c.Z,{}),(0,P.jsx)(f.Z,{name:"name",value:le,margin:"dense",error:!!Me,placeholder:"Name*",onChange:dn,id:"data-name"}),(0,P.jsx)(d.ZP,{item:!0,children:(0,P.jsx)(g.gc,{id:"relationID",name:"relation",onChange:function(e,n){return function(e){var n=null===e||void 0===e?void 0:e.value;b(n),"Others"!==n&&(fe(""),E("")),null!==n&&void 0!==n&&n.length&&n.trim()&&ge("")}(n)},options:R,value:(0,S.NA)(R,C),renderInput:function(e){return(0,P.jsx)(f.Z,(0,i.Z)((0,i.Z)({},e),{},{placeholder:"Relation*"}))}})}),"Others"===C&&(0,P.jsx)(f.Z,{margin:"dense",name:"relation1",value:L,error:!!ve,placeholder:"Relation Name*",onChange:dn,id:"data-Relation",style:{borderColor:ve?"red":""}}),(0,P.jsx)(f.Z,{type:"email",name:"email",margin:"dense",value:V,error:!!Se,placeholder:"Email*",onChange:dn,id:"data-email"}),(0,P.jsx)(f.Z,{type:"tel",maxLength:10,margin:"dense",value:W,error:!!Pe,name:"phone",onChange:dn,onKeyPress:function(e){return(0,p.ZP)(e)},id:"data-price1",placeholder:"Contact No.*"}),(0,P.jsx)(D.Z,{sx:{margin:0},control:(0,P.jsx)(k.Z,{sx:{padding:0},color:"secondary",name:"whatsapp",size:"small",checked:null!==xn?J===W:K,onChange:function(){return G(K?"":W),void $(!K)}}),label:(0,P.jsx)(u.Z,{fontSize:"15px",children:"Whatsapp same as Contact"})}),(0,P.jsx)(f.Z,{type:"tel",maxLength:10,value:K?W:J,name:"phoneC",error:!!Re,disabled:null!==xn?J===W:K,onChange:dn,onKeyPress:function(e){return(0,p.ZP)(e)},id:"data-price",placeholder:"WhatsApp"}),(0,P.jsx)(f.Z,{value:F,margin:"dense",name:"address",placeholder:"Address",onChange:function(e){return dn(e)},id:"data-Address",multiline:!0,minRows:2}),(0,P.jsx)("div",{children:Te.map((function(e){return(0,P.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,P.jsxs)(u.Z,{sx:{color:"blue",cursor:"pointer"},onClick:function(){return function(e){en(e),He(!0),Te.forEach((function(n){n.id===e&&(Be(n.answer),Ne(n.question))}))}(e.id)},children:["".concat(e.id,". ").concat(e.question)," "]})," ",(0,P.jsx)(m.Z,{size:"1",onClick:function(){return function(e){var n,t=(0,a.Z)(Te);t=t.filter((function(n){return n.id!==e})),null!==(n=t)&&void 0!==n&&n.length&&t.forEach((function(e,n){e.id=n+1})),Ye((0,a.Z)(t))}(e.id)}})]},e.id)}))}),(null===Te||void 0===Te?void 0:Te.length)<3&&(0,P.jsx)(h.Z,{disabled:3===(null===Te||void 0===Te?void 0:Te.length),onClick:tn,children:"Add Secret Questions"}),(0,P.jsxs)(v.Z,{spacing:3,direction:"row",sx:{mt:2,justifyContent:"end"},children:[(0,P.jsx)(g.ZP,{varient:"outlined",label:null!==xn?"Cancel":"Reset",onClick:function(){null!==xn&&vn(!1,!0),cn(),hn()}}),(0,P.jsx)(g.ZP,{onClick:function(e){return un(e)},disabled:!(null!==Te&&void 0!==Te&&Te.length),label:null!==xn?e.isLoading?(0,P.jsx)(Z.Z,{}):"Update":e.isLoading?(0,P.jsx)(Z.Z,{}):"Add"})]}),(0,P.jsx)(w,{modal:Qe,secrets:Te,toggleModal:tn,fname:ze,setfname:Ne,ftype:_e,setftype:Be,editID:Xe,clearCustomField:nn,handleSecrets:function(){if(Xe){var e=(0,a.Z)(Te),n=e.findIndex((function(e){return e.id===Xe}));e[n].question=ze,e[n].answer=_e,Ye((0,a.Z)(e)),en("")}else{var t=(0,a.Z)(Te);t.push({id:(null===t||void 0===t?void 0:t.length)+1,question:ze,answer:_e}),Ye((0,a.Z)(t))}He(!1),Ne(""),Be("")}})]})})}},25240:function(e,n,t){var i=t(29439),a=t(42357),l=t(47313),o=t(71535),s=t(96900),r=t(56972),d=t(71363),u=t(8247),c=t(61474),h=t(46417);n.Z=function(e){var n=(0,l.useState)("00"),t=(0,i.Z)(n,2),v=t[0],f=t[1],x=(0,l.useState)("00"),m=(0,i.Z)(x,2),p=m[0],g=m[1],Z=(0,l.useState)(!1),j=(0,i.Z)(Z,2),S=j[0],C=j[1],b=(0,l.useState)(0),y=(0,i.Z)(b,2),P=y[0],w=y[1];(0,l.useEffect)((function(){var e;return S&&(e=setInterval((function(){var e=P%60,n=Math.floor(P/60),t=1===String(e).length?"0".concat(e):e,i=1===String(n).length?"0".concat(n):n;f(t),g(i),w((function(e){return e+1}))}),650)),function(){return clearInterval(e)}}),[S,P]);var D=(0,a.useReactMediaRecorder)({video:!1,audio:!0,echoCancellation:!0,onStop:function(n,t){console.log(t),function(e){var n=new FileReader;return n.readAsDataURL(e),new Promise((function(e){n.onloadend=function(){e(n.result)}}))}(t).then((function(n){e.setRecVideo(n)}))}}),k=D.status,R=D.startRecording,A=D.stopRecording,L=D.pauseRecording,E=D.clearBlobUrl,M=D.mediaBlobUrl;return(0,h.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,h.jsxs)(s.Z,{variant:"outlined",children:[(0,h.jsxs)(r.Z,{children:[(0,h.jsxs)(d.Z,{sx:{background:"#f1f3f4"},borderRadius:"50px",padding:"15px",marginBottom:1,children:["Recording Status : ",k]}),(M||e.recVideo)&&(0,h.jsx)("audio",{style:{width:"100%"},src:M||e.recVideo,controls:!0}),(0,h.jsxs)(d.Z,{margin:"auto",border:" #cccccc",boxShadow:"0 0 0 0.06rem #cccccc",borderRadius:"2px",padding:"2px",width:"max-content",children:[p," : ",v]})]}),(0,h.jsxs)(u.Z,{sx:{justifyContent:"center"},children:[(0,h.jsx)(c.ZP,{varient:"contained",label:S?"Pause":"paused"===k?"Resume":"Start",onClick:function(){S?L():R(),C(!S)}}),(0,h.jsx)(c.ZP,{varient:"outlined",label:"Stop",onClick:function(){A(),C(!1)}}),(0,h.jsx)(c.ZP,{varient:"outlined",label:"Clear",onClick:function(){C(!1),w(0),f("00"),g("00"),E(),C(!1)}})]})]})})}},5318:function(e,n,t){t.r(n),t.d(n,{default:function(){return Y}});var i=t(74165),a=t(15861),l=t(29439),o=t(47313),s=t(40229),r=t(71535),d=t(66135),u=t(36936),c=t(12613),h=t(39995),v=t(71363),f=t(7081),x=t(5448),m=t(88356),p=t(45959),g=t(60236),Z=t(96900),j=t(34940),S=t(56972),C=t(31881),b=t.n(C),y=t(96327),P=t(54727),w=t(1087),D=t(18825),k=t(46417),R=function(e){var n=(0,o.useState)(!1),t=(0,l.Z)(n,2),i=t[0],a=t[1],d=(0,o.useState)(""),u=(0,l.Z)(d,2),h=u[0],C=u[1],R=(0,o.useState)(""),A=(0,l.Z)(R,2),L=A[0],E=A[1],M=(0,o.useState)(!1),I=(0,l.Z)(M,2),V=I[0],O=I[1],z=(0,o.useState)(),N=(0,l.Z)(z,2),F=N[0],U=N[1],_=(0,o.useState)(!1),B=(0,l.Z)(_,2),W=B[0],q=B[1],T=(0,o.useState)([]),Y=(0,l.Z)(T,2),K=Y[0],$=Y[1],Q=(0,o.useState)(""),H=(0,l.Z)(Q,2),J=H[0],G=H[1],X=(0,o.useState)(),ee=(0,l.Z)(X,2),ne=ee[0],te=ee[1],ie=function(){a(!i)},ae=function(e){C(h!==e?e:"")},le=function(n){var t;return null!==(t=e.colorOption)&&void 0!==t&&t[n]?e.colorOption[n]:n},oe=function(n){var t,i,a="";return(null===n||void 0===n||null===(t=n.nominees)||void 0===t?void 0:t.length)&&n.nominees.forEach((function(e,t){t===n.nominees.length-1?a+=null===e||void 0===e?void 0:e.name:a="".concat(a+(null===e||void 0===e?void 0:e.name),", ")})),(0,k.jsxs)(r.ZP,{container:!0,spacing:2,children:[(0,k.jsx)(r.ZP,{item:!0,sm:4,xs:12,children:(0,k.jsxs)(v.Z,{children:[(0,k.jsx)("b",{children:" Type : "})," ",n.type,(0,k.jsx)("br",{}),(0,k.jsx)("b",{children:" Description : "})," ",n.desc,(0,k.jsx)("br",{}),(0,k.jsx)("b",{children:" Date : "})," ",null!==n&&void 0!==n&&n.date?(0,P.p6)(null===n||void 0===n||null===(i=n.date)||void 0===i?void 0:i.split("T")[0]):"After Death"]})}),(0,k.jsx)(r.ZP,{item:!0,sm:4,xs:12,children:(0,k.jsxs)(v.Z,{children:[(0,k.jsx)("b",{children:"Receiver Name :"})," ",n.rname,(0,k.jsx)("br",{}),(0,k.jsx)("b",{children:"Receiver Email :"})," ",n.remail,(0,k.jsx)("br",{}),(0,k.jsx)("b",{children:"Receiver Phone :"})," ",n.rphone]})}),(0,k.jsxs)(r.ZP,{item:!0,sm:4,xs:12,children:[(0,k.jsx)("b",{children:"Status :"})," ",0===n.status?(0,k.jsx)("span",{children:"Pending"}):1===n.status?(0,k.jsx)("span",{children:"Delivered"}):(0,k.jsxs)("span",{children:["Failed : ",n.failReason]}),(0,k.jsx)("br",{}),("Video"===n.type||"Voice"===n.type)&&(0,k.jsx)(v.Z,{sx:{color:"#20756d",cursor:"pointer"},onClick:function(){return function(e,n){O(!0),q("Video"===n),ie();var t=sessionStorage.getItem("authtoken");b().get("/backendapi/sender/msg/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){var n;if(e.data&&null!==(n=e.data[0])&&void 0!==n&&n.media){for(var t,i,a=null===(t=e.data[0])||void 0===t||null===(i=t.media)||void 0===i?void 0:i.split("base64,"),l=a[0].substring(5,a[0].length-1),o=atob(a[1]),s=new Array(o.length),r=0;r<o.length;r++)s[r]=o.charCodeAt(r);var d=new Uint8Array(s),u=new Blob([d],{type:l}),c=URL.createObjectURL(u);U(c),O(!1)}}))}(n.msg,n.type)},children:"Video"===n.type?"Play Video":"Play Audio"}),(0,k.jsxs)(r.ZP,{item:!0,display:"flex",children:[(0,k.jsx)(v.Z,{sx:{color:"blue",cursor:"pointer"},onClick:function(){return e.editItem(n)},children:"Edit"}),(0,k.jsx)(v.Z,{sx:{marginLeft:"10px",color:"red",cursor:"pointer"},onClick:function(){G(n._id),E(!0)},children:"Delete"})]})]})]})},se=(null===ne||void 0===ne?void 0:ne.length)>0?K:e.collapseItems;return(0,k.jsxs)(s.Z,{children:[(0,k.jsxs)(f.Z,{open:i,onClose:ie,centered:!0,children:[(0,k.jsx)(x.Z,{children:"Message"}),(0,k.jsx)(m.Z,{children:V?(0,k.jsx)(p.Z,{}):(0,k.jsx)(g.Z,{component:W?"video":"audio",controls:!0,src:F,autoPlay:!0,sx:{minWidth:"250px"}})})]}),e.loadingmsg&&null===e.collapseItems?(0,k.jsx)(p.Z,{}):(0,k.jsxs)(Z.Z,{children:[(0,k.jsx)(D.z,{heading:e.heading,search:function(n){te(n);var t=e.collapseItems.filter((function(e){var t=e.desc.toLowerCase().startsWith(n.toLowerCase())||e.type.toLowerCase().startsWith(n.toLowerCase())||e.title.toLowerCase().startsWith(n.toLowerCase()),i=e.desc.toLowerCase().includes(n.toLowerCase())||e.type.toLowerCase().includes(n.toLowerCase())||e.title.toLowerCase().includes(n.toLowerCase());return!(!t&&!i)}));$(t)}}),(0,k.jsx)(y.Z,{handleConfirm:function(){var n;n=J,b().delete("/backendapi/sender/deletebyid/".concat(n),{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}).then((function(e){e&&c.A9})).catch(),E(!1),e.refreshData.callFunc(!e.refreshData.value)},isOpen:L,closeModal:function(){return E(!1)}}),(0,k.jsx)(j.Z,{}),(0,k.jsx)(S.Z,{children:(null===se||void 0===se?void 0:se.length)>0?se.map((function(e){return(0,k.jsx)(o.Fragment,{children:(0,k.jsx)(w.Z,{collapseID:h,setcollapseID:C,collapseItem:{content:oe(e),title:null===e||void 0===e?void 0:e.title,id:e._id},formatme:le,toggleCollapse:ae})},e._id)})):(0,k.jsx)("span",{children:"No Messages Found"})})]})]})},A=t(6039),L=t(1413),E=t(95716),M=t(75969),I=t(62463),V=t(82363),O=t(25240),z=t(61474),N=t(69933),F=t(86282),U=t(39653),_=t(10658),B=t.n(_),W=[{value:"Attachment",label:"Attachment",color:"#00B8D9",isFixed:!0},{value:"Text",label:"Text",color:"#00B8D9",isFixed:!0},{value:"Voice",label:"Voice",color:"#0052CC",isFixed:!0},{value:"Video",label:"Video",color:"#0052CC",isFixed:!0}],q=function(e){var n,t=e.oldMsg,i=e.rname,a=e.sameAsAbove,s=e.setRecVideo,d=e.rphone,u=e.setrphone,h=e.edititem,v=e.settype,f=e.settitle,x=e.nomineeOption2,m=e.userInput,p=e.setuserInput,g=e.remail,j=e.setremail,C=e.setdesc,b=e.desc,y=e.type,w=e.title,D=e.setdate,R=e.date,A=e.setsignature,_=e.signature,q=e.handleCheck,T=e.handleReset,Y=e.handleSubmit,K=e.validEmail,$=e.validPhone,Q=e.validDate,H=e.recVideo,J=e.setfilesOndrop,G=e.resetDropzone,X=(0,o.useState)(""),ee=(0,l.Z)(X,2),ne=ee[0],te=ee[1],ie=!(null!==i&&void 0!==i&&i.length)||!(null!==d&&void 0!==d&&d.length)||!(null!==g&&void 0!==g&&g.length)||!(null!==y&&void 0!==y&&y.length)||!(null!==w&&void 0!==w&&w.length)||!a&&!(null!==R&&void 0!==R&&R.length)||!K||!$||!a&&!Q||R===(null===t||void 0===t||null===(n=t.date)||void 0===n?void 0:n.split("T")[0])&&b===(null===t||void 0===t?void 0:t.desc)&&i===(null===t||void 0===t?void 0:t.rname)&&g===(null===t||void 0===t?void 0:t.remail)&&d===(null===t||void 0===t?void 0:t.rphone)&&_===(null===t||void 0===t?void 0:t.signature)&&w===(null===t||void 0===t?void 0:t.title),ae=function(e){e.length<=10&&(u(e),null!==e&&void 0!==e&&e.length&&10===e.length&&e.trim()&&P.Yd.test(e)?te(""):te("Enter Valid Contact No."))};return(0,k.jsx)(Z.Z,{children:(0,k.jsxs)(S.Z,{children:[(0,k.jsx)(c.ll,{title:h?"Edit Message":"Schedule Message"}),(0,k.jsxs)(r.ZP,{container:!0,rowSpacing:.01,spacing:1,justifyContent:"center",children:[(0,k.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsx)(z.gc,{name:"color",options:W,isDisabled:h,onChange:function(e,n){return v(null===n||void 0===n?void 0:n.value)},value:(0,F.NA)(W,y),renderInput:function(e){return(0,k.jsx)(U.Z,(0,L.Z)((0,L.Z)({},e),{},{placeholder:h?y:"Message Type *"}))}})}),(0,k.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsx)(z.gc,{name:i,options:x,onChange:function(e,n){return p(n)},value:(0,F.NA)(x,null===m||void 0===m?void 0:m.value),renderInput:function(e){return(0,k.jsx)(U.Z,(0,L.Z)((0,L.Z)({},e),{},{placeholder:"Reciever"}))}})}),y&&(0,k.jsxs)(o.Fragment,{children:[(0,k.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsx)(U.Z,{type:"email",id:"remail",placeholder:"Receiver Email *",value:g,onChange:function(e){return j(e.target.value)}})}),(0,k.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsx)(U.Z,{type:"tel",id:"phone",maxLength:10,error:!!ne,placeholder:"Receiver Phone *",value:d,onChange:function(e){ae(e.target.value)},onKeyPress:function(e){return(0,P.ZP)(e)}})}),(0,k.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsx)(U.Z,{id:"title",placeholder:"Subject *",value:w,onChange:function(e){return f(e.target.value)}})}),(0,k.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsx)(U.v,{value:R,id:"exampleDate",label:"Enter Date",disabled:!!a,minDate:B()().add(1,"day"),onChange:function(e){return D(e)}})}),"Voice"===y&&(0,k.jsx)(O.Z,(0,L.Z)({},e)),"Video"===y&&(0,k.jsx)(V.Z,{setRecVideo:s,recVideo:H}),(0,k.jsx)(r.ZP,{item:!0,xs:12,sm:12,children:(0,k.jsx)(U.Z,{type:"textarea",placeholder:"Description",rows:"3",id:"description",value:b,onChange:function(e){return C(e.target.value)}})}),(0,k.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsx)(U.Z,{type:"textarea",placeholder:"Signature",className:"input-label placeholder ",rows:"1",id:"signature",value:_,onChange:function(e){return A(e.target.value)}})}),(0,k.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsx)(M.Z,{label:"Deliver after my death",control:(0,k.jsx)(E.Z,{checked:a,onChange:function(){return q()}})})}),(0,k.jsx)(r.ZP,{item:!0,xs:12,sm:12,children:"Attachment"===y&&(0,k.jsx)(N.r,{notMulti:1,setfilesOndrop:J,resetDropzone:G,file:H})})]})]}),(0,k.jsxs)(I.Z,{direction:"row",spacing:3,sx:{mt:3},justifyContent:"end",children:[(0,k.jsx)(z.ZP,{varient:"outlined",label:h?"Cancel":"Reset",onClick:function(){return T()}}),(0,k.jsx)(z.ZP,{varient:"contained",label:h?"Update":"Add",onClick:Y,disabled:ie})]})]})})},T=t(66529),Y=(0,d.$j)((function(e){var n,t=e.reducer,i=t.dataList,a=void 0===i?{}:i,l=t.sender,o=void 0===l?{}:l,s=null!==o&&void 0!==o&&null!==(n=o.getmesssages)&&void 0!==n&&n.length?o.getmesssages:[];return{dataList:a,listLoading:a.totalRecordsLoading,messages:s,loadingmsg:o.loadingmsg}}),(function(e){return{scheduleNewMessage:function(n){return e(T.tb.endpoints.scheduleNewMessage.initiate(n))},getScheduledMessages:function(n){return e(T.tb.endpoints.getScheduledMessages.initiate(n))},editMessage:function(n){return e(T.tb.endpoints.editMessage.initiate(n))},addData:function(n){return e(u.SD.endpoints.addData.initiate(n))},getData:function(n){return e(u.SD.endpoints.getData.initiate(n))}}}))((function(e){var n,t=o.createRef(),d=(0,o.useState)(""),u=(0,l.Z)(d,2),v=u[0],f=u[1],x=(0,o.useState)(B()().add(1,"day")),m=(0,l.Z)(x,2),p=m[0],g=m[1],Z=(0,o.useState)(!1),j=(0,l.Z)(Z,2),S=j[0],C=j[1],b=(0,o.useState)(""),y=(0,l.Z)(b,2),w=y[0],D=y[1],L=(0,o.useState)(""),E=(0,l.Z)(L,2),M=E[0],I=E[1],V=(0,o.useState)(""),O=(0,l.Z)(V,2),z=O[0],N=O[1],F=(0,o.useState)(!1),U=(0,l.Z)(F,2),_=U[0],W=U[1],T=(0,o.useState)(null),Y=(0,l.Z)(T,2),K=Y[0],$=Y[1],Q=(0,o.useState)(null),H=(0,l.Z)(Q,2),J=H[0],G=H[1],X=(0,o.useState)([]),ee=(0,l.Z)(X,2),ne=ee[0],te=ee[1],ie=(0,o.useState)(!1),ae=(0,l.Z)(ie,2),le=ae[0],oe=ae[1],se=(0,o.useState)(!1),re=(0,l.Z)(se,2),de=re[0],ue=re[1],ce=(0,o.useState)(""),he=(0,l.Z)(ce,2),ve=he[0],fe=he[1],xe=(0,o.useState)(!1),me=(0,l.Z)(xe,2),pe=me[0],ge=me[1],Ze=(0,o.useState)(null),je=(0,l.Z)(Ze,2),Se=je[0],Ce=je[1],be=(0,o.useState)(!1),ye=(0,l.Z)(be,2),Pe=ye[0],we=ye[1],De=(0,o.useState)([]),ke=(0,l.Z)(De,2),Re=ke[0],Ae=ke[1],Le=(0,o.useState)([]),Ee=(0,l.Z)(Le,2),Me=Ee[0],Ie=Ee[1],Ve=(0,o.useState)(""),Oe=(0,l.Z)(Ve,2),ze=Oe[0],Ne=Oe[1],Fe=(0,o.useState)(""),Ue=(0,l.Z)(Fe,2),_e=Ue[0],Be=Ue[1],We=(0,o.useState)(""),qe=(0,l.Z)(We,2),Te=qe[0],Ye=qe[1],Ke=(0,o.useState)(""),$e=(0,l.Z)(Ke,2),Qe=$e[0],He=$e[1],Je=(0,o.useState)([]),Ge=(0,l.Z)(Je,2),Xe=Ge[0],en=Ge[1],nn=(0,o.useState)(!1),tn=(0,l.Z)(nn,2),an=tn[0],ln=tn[1],on=(0,o.useState)(!0),sn=(0,l.Z)(on,2),rn=sn[0],dn=sn[1],un=(0,o.useState)(!0),cn=(0,l.Z)(un,2),hn=cn[0],vn=cn[1],fn=(0,o.useState)(!0),xn=(0,l.Z)(fn,2),mn=xn[0],pn=xn[1];(0,o.useEffect)((function(){if(console.log(Qe),null!==Qe&&void 0!==Qe&&Qe.value){var e=Me.filter((function(e){return e._id===Qe.value}));Ne(null===e||void 0===e?void 0:e[0].name),Be(null===e||void 0===e?void 0:e[0].email),Ye(null===e||void 0===e?void 0:e[0].primaryContact)}else 0===(null===Qe||void 0===Qe?void 0:Qe.length)?(Ne(Qe),Be(""),Ye("")):Ne(Qe)}),[Qe]);(0,o.useEffect)((function(){e.getScheduledMessages(),e.getData()}),[]);var gn=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ue(e),n&&(Ce(null),ge(!0))};(0,o.useEffect)((function(){if(e.dataList.data.length){var n=[];Ie(e.dataList.data),e.dataList.data.forEach((function(e){var t={value:e._id,label:"".concat(e.name," - ").concat(e.relation),color:"#00B8D9",isFixed:!1};n.push(t)})),en(n)}}),[e.dataList.data]);var Zn=function(){var n=(0,a.Z)((0,i.Z)().mark((function n(t){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return we(!0),n.prev=1,n.next=4,e.addData(t);case 4:Ne(""),Ye(""),Be(""),gn(!1,!0),n.next=13;break;case 10:return n.prev=10,n.t0=n.catch(1),n.abrupt("return",(0,k.jsx)(c.A9,{handleClick:function(){},openSnack:!0,openSnackMsg:"Add Nominee Failed! Please contact admin",severity:"error"}));case 13:return n.prev=13,we(!1),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[1,10,13,16]])})));return function(e){return n.apply(this,arguments)}}(),jn=function(){W(!1),Ne(""),Ye(""),Be(""),fe(""),N(""),I(""),g(""),C(!1),D(""),Ae([]),He(""),f(""),te("")};return(0,k.jsxs)(s.Z,{children:[(0,k.jsx)(A.Z,{show:de,data:Se,updateData:e.addData,addData:Zn,isLoading:Pe,handleSidebar:gn,getData:e.getData,dataParams:e.parsedFilter,addNew:pe}),(0,k.jsxs)(r.ZP,{container:!0,spacing:1,sx:{p:2},children:[(0,k.jsx)(r.ZP,{item:!0,xs:12,md:9,lg:9,children:(0,k.jsx)(q,{oldMsg:J,handleReset:jn,handleSubmit:function(){_?e.editMessage({_id:K,desc:M,type:z,title:ve,date:p,signature:w,rname:ze,remail:_e,rphone:Te,msg:("Voice"===z||"Video"===z||"Attachment"===z)&&v||ne.length&&ne||""}):e.scheduleNewMessage({desc:M,type:z,title:ve,date:p,signature:w,rname:ze,remail:_e,rphone:Te,msg:("Voice"===z||"Video"===z||"Attachment"===z)&&v||ne.length&&ne||""}),jn()},sameAsAbove:S,setdate:function(e){var n=new Date(e)>new Date||""===e;g(e),pn(n)},setfilesOndrop:function(e){oe(!1),te(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))},resetDropzone:le,setRecVideo:f,setdesc:I,setsignature:D,rphone:Te,setrphone:function(e){var n=P.Yd.test(e);Ye(e),vn(n)},validPhone:hn,selecttype:t,edititem:_,settype:N,settitle:fe,nomineeOption2:Xe,remail:_e,validEmail:rn,rname:ze,setremail:function(e){var n=String(e).toLowerCase().match(/^([A-Za-z0-9_\-.])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,})$/);Be(e),dn(n)},desc:M,type:z,title:ve,date:p,validDate:mn,signature:w,handleCheck:function(){!S&&g(""),C(!S)},userInput:Qe,setuserInput:He,recVideo:v})}),(0,k.jsx)(h.Z,{}),(0,k.jsx)(r.ZP,{item:!0,xs:12,md:9,lg:9,children:(0,k.jsx)(R,{heading:"Messages History",collapseItems:e.messages,colorOption:null===(n=e.messages)||void 0===n?void 0:n.colorOption,editItem:function(e){var n;G(e);var t=e.date,i=e.desc,a=e.rname,l=e.remail,o=e.rphone,s=e.signature,r=e.title,d=e.type,u=e._id,c=e.mediaDetails;W(!0),$(u),g(null===t||void 0===t?void 0:t.split("T")[0]),I(i),Ae(Re),Be(l),Ne(a),Ye(o),D(s),fe(r),N(d),C(!t),f("Attachment"===d?c:null===(n=c[0])||void 0===n?void 0:n.media)},loadingmsg:e.loadingmsg,handleFilter:function(){console.log("Call filter function")},refreshData:{value:an,callFunc:ln}})})]})]})}))},82363:function(e,n,t){var i=t(29439),a=t(47313),l=t(61474),o=t(42357),s=t(38693),r=t(57441),d=t(16423),u=t(91536),c=t(71535),h=t(96900),v=t(56972),f=t(71363),x=t(40229),m=t(8247),p=t(46417),g=function(e){var n=e.stream,t=(0,a.useRef)(null);return(0,a.useEffect)((function(){t.current&&n&&(t.current.srcObject=n)}),[n]),n?(0,p.jsx)("video",{ref:t,width:"100%",height:"100%",autoPlay:!0,controls:!0}):null};n.Z=function(e){var n=e.setRecVideo,t=e.recVideo,Z=(0,a.useState)(!0),j=(0,i.Z)(Z,2),S=j[0],C=j[1],b=(0,a.useState)(!1),y=(0,i.Z)(b,2),P=y[0],w=y[1],D=(0,a.useState)(!1),k=(0,i.Z)(D,2),R=k[0],A=k[1];return(0,p.jsx)(c.ZP,{item:!0,xs:12,sm:8,children:(0,p.jsx)(o.ReactMediaRecorder,{screen:R,video:!R,audio:S,onStop:function(e,t){console.log(t),function(e){var n=new FileReader;return n.readAsDataURL(e),new Promise((function(e){n.onloadend=function(){e(n.result)}}))}(t).then((function(e){console.log(e),n(e)}))},render:function(e){var n=e.status,i=e.startRecording,a=e.pauseRecording,o=e.stopRecording,c=e.clearBlobUrl,Z=e.mediaBlobUrl,j=e.previewStream;return(0,p.jsxs)(h.Z,{variant:"outlined",children:[(0,p.jsxs)(v.Z,{children:[(0,p.jsxs)(f.Z,{textAlign:"center",children:["Status : ",n]}),P&&j&&(0,p.jsx)(g,{stream:j}),!P&&(Z||t)&&(0,p.jsx)("video",{src:Z||t,controls:!0,autoPlay:!1,width:"100%",height:"100%"}),(0,p.jsxs)(x.Z,{display:"flex",justifyContent:"space-evenly",sx:{mt:2},children:[S?(0,p.jsx)(s.Z,{fontSize:"large",onClick:function(){return C(!S)}}):(0,p.jsx)(r.Z,{fontSize:"large",onClick:function(){return C(!S)}}),(0,p.jsx)(d.Z,{fontSize:"large",onClick:function(e){A(!0)},color:"".concat(R&&"primary")}),(0,p.jsx)(u.Z,{fontSize:"large",onClick:function(e){A(!1)},color:"".concat(!R&&"primary")})]})]}),(0,p.jsxs)(m.Z,{sx:{justifyContent:"center"},children:[(0,p.jsx)(l.ZP,{varient:"contained",label:P?"Pause":"paused"===n?"Resume":"Start",onClick:function(){P?a():i(),w(!P)}}),(0,p.jsx)(l.ZP,{varient:"outlined",label:"Stop",onClick:function(){o(),w(!1)}}),(0,p.jsx)(l.ZP,{varient:"outlined",label:"Clear",onClick:function(){c(),w(!1)}})]})]})}})})}},6306:function(e,n,t){var i=t(64836);n.Z=void 0;var a=i(t(45045)),l=t(46417),o=(0,a.default)((0,l.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");n.Z=o},85585:function(e,n,t){var i=t(46095),a=t(46417);n.Z=(0,i.Z)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}),"CloseOutlined")}}]);