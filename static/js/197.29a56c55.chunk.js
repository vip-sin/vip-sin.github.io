(self.webpackChunkvpn=self.webpackChunkvpn||[]).push([[197],{34269:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return U}});var a=t(1413),o=t(74165),r=t(15861),i=t(29439),l=t(47313),s=t(48737),u=t(61474),d=t(40229),c=t(94345),v=t(71535),p=t(89870),f=t(22449),h=t(80699),m=t(68847),x=t(96900),Z=t(56972),j=t(71363),g=t(31616),w=t(58470),C=t(54727),b=t(71207),D=t(35192),S=t(11610),L=t(18377),y=t(66135),k=t(45959),P=t(49205),A=t(82500),N=t(34940),E=t(62463),I=t(8586),M=t(39653),_=t(86282),O=t(46417),R=JSON.parse(sessionStorage.getItem("dropdowns")).dailySpendsLabels,z=function(e){var n=e.data,t=(0,l.useState)(""),o=(0,i.Z)(t,2),r=o[0],s=o[1],c=(0,l.useState)("other"),p=(0,i.Z)(c,2),f=p[0],h=p[1],m=(0,l.useState)(""),x=(0,i.Z)(m,2),Z=x[0],g=x[1],b=(0,l.useState)(""),D=(0,i.Z)(b,2),S=D[0],L=D[1],y=(0,l.useState)(""),k=(0,i.Z)(y,2),P=k[0],z=k[1],T=(0,l.useState)(""),F=(0,i.Z)(T,2),J=F[0],W=F[1],H=(0,l.useState)(""),U=(0,i.Z)(H,2),B=U[0],G=U[1],K=(0,l.useState)(!1),V=(0,i.Z)(K,2),$=V[0],q=V[1],Q=function(){W(""),G(""),s(""),h(""),g(""),L(""),z("")};(0,l.useEffect)((function(){if(n){var e=n.id,t=n.name,a=n.relation,o=n.address,r=n.date,i=n.primaryContact;W(e),G(t),s(a),h(null===n||void 0===n?void 0:n.relation1),L(o),g(r),z(i)}n&&!$||Q(),q(!1)}),[n]);var X=function(e){var n=e.target.name,t=e.target.value;switch(n){case"item":G(t);break;case"description":L(t);break;case"date":g(t);break;case"price":t>=0&&t<=999999999999999&&z(t);break;case"relation1":h(t)}},Y=e.handleSidebar,ee=e.data,ne=e.show;return(0,O.jsx)(A.Z,{anchor:"right",open:ne,onClose:function(){},onOpen:function(){},children:(0,O.jsxs)(d.Z,{sx:{mt:10,width:350,px:2},component:"form",children:[(0,O.jsxs)(v.ZP,{item:!0,sx:{display:"flex",justifyContent:"space-between",p:1},children:[(0,O.jsx)(j.Z,{children:null!==ee?"UPDATE SPEND DETAILS":"ADD NEW SPEND"}),(0,O.jsx)(I.Z,{size:20,onClick:function(){Y(!1,!0),Q()}})]}),(0,O.jsx)(N.Z,{}),(0,O.jsx)(M.Z,{name:"item",value:B,margin:"dense",placeholder:"Item *",onChange:X,id:"data-name"}),(0,O.jsx)(v.ZP,{item:!0,sx:{mt:1},children:(0,O.jsx)(u.gc,{id:"labelId",name:"label",value:(0,_.NA)(R,r),onChange:function(e,n){return function(e){var n=null===e||void 0===e?void 0:e.value;s(n),"Others"!==n&&h("")}(n)},options:R,renderInput:function(e){return(0,O.jsx)(M.Z,(0,a.Z)((0,a.Z)({},e),{},{placeholder:"Select Label *"}))}})}),"Others"===r&&(0,O.jsx)(M.Z,{margin:"dense",name:"relation1",value:f,placeholder:"Label Name",onChange:X,id:"data-name"}),(0,O.jsx)(M.Z,{type:"date",value:Z,name:"date",margin:"dense",placeholder:"Enter Date",id:"data-name",max:"9999-12-31",min:"1900-01-01",onChange:X}),(0,O.jsx)(M.Z,{type:"number",onKeyPress:function(e){return(0,C.ZP)(e)},value:P,margin:"dense",id:"data-price",name:"price",max:999999999999999,placeholder:"Enter spend amount *",onChange:X}),(0,O.jsx)(M.Z,{type:"textarea",value:S,margin:"dense",name:"description",placeholder:"Description",id:"data-name",onChange:X}),(0,O.jsxs)(E.Z,{spacing:3,direction:"row",sx:{mt:3,justifyContent:"end"},children:[(0,O.jsx)(u.ZP,{varient:"outlined",label:null!==ee?"Cancel":"Reset",onClick:function(){null!==ee&&Y(!1,!0),Q()}}),(0,O.jsx)(u.ZP,{varient:"contained",onClick:function(){return function(){if(e.isLoading)return(0,O.jsx)(w.A9,{handleClick:function(){},openSnack:!0,openSnackMsg:null!==n?"Updating still in process":"Adding Spend in process",severity:"warning"});var t={relation:null===r||void 0===r?void 0:r.trim(),relation1:null===f||void 0===f?void 0:f.trim(),date:null===Z||void 0===Z?void 0:Z.trim(),address:null===S||void 0===S?void 0:S.trim(),contact1:P,_id:null===J||void 0===J?void 0:J.trim(),name:null===B||void 0===B?void 0:B.trim()};null!==n?(t._id=n._id,t.usage=n.usage,e.updateData(t)):(q(!0),e.addData(t),Q())}()},disabled:function(){var t=!(null!==B&&void 0!==B&&B.length)||!(null!==r&&void 0!==r&&r.length)||"Others"===r&&!(null!==f&&void 0!==f&&f.length)||!P||!(null!==Z&&void 0!==Z&&Z.length),a=null!==e.data&&B===(null===n||void 0===n?void 0:n.name)&&r===(null===n||void 0===n?void 0:n.relation)&&f===(null===n||void 0===n?void 0:n.relation1)&&S===(null===n||void 0===n?void 0:n.address)&&Z===(null===n||void 0===n?void 0:n.date)&&P===(null===n||void 0===n?void 0:n.primaryContact);return t||a}(),label:null!==ee?"Update":"Add",isLoading:e.isLoading})]})]})})},T=JSON.parse(sessionStorage.getItem("dropdowns")).dailySpendsLabels,F=[{label:"Last 3 month",value:3},{label:"Last 6 month",value:6},{label:"Last 1 year",value:12},{label:"Last 3 years",value:36}],J=function(e){return(0,O.jsx)(b.Z,{size:15,onClick:function(){return e.currentData(e.row)}})},W=function(e){return(0,O.jsx)(D.Z,{size:15,onClick:function(){return e.setRow()}})},H=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.preventDefault();var a=s.P6.book_new(),o="Spenditure_Report.xlsx";if(t){var r=[];n[t].forEach((function(e){r.push({Month:e.seperator,Date:e.date,Label:e.label,Item:e.item,Amount:"\u20b9".concat(e.amount),Description:e.desc,"Created At":(0,C.p6)(e.updatedAt)})}));var i=s.P6.json_to_sheet(r),l=[{wch:14},{wch:10},{wch:25},{wch:20},{wch:7},{wch:25},{wch:10}];i["!cols"]=l,i.A1.s={font:{sz:24,bold:!0,color:{rgb:"FFAA00"}}},s.P6.book_append_sheet(a,i,t),o="Spediture_Report-".concat(t,".xlsx")}else Object.keys(n).forEach((function(e){var t=[];n[e].forEach((function(e){t.push({Month:e.seperator,Date:e.date,Label:e.label,Item:e.item,Amount:e.amount,Description:e.desc,"Created At":(0,C.p6)(e.updatedAt)})}));var o=s.P6.json_to_sheet(t);o["!cols"]=[{wch:14},{wch:10},{wch:25},{wch:20},{wch:7},{wch:25},{wch:10}],s.P6.book_append_sheet(a,o,e)}));(0,s.NC)(a,o)},U=(0,y.$j)((function(e){var n=e.reducer.dataList,t=n.expenseData,a=void 0===t?[]:t,o=n.allexpenseData,r=void 0===o?[]:o,i=n.spendLoading,l=void 0!==i&&i,s=JSON.parse(JSON.stringify(a));return s.map((function(e){var n,t=null===e||void 0===e||null===(n=e.date)||void 0===n?void 0:n.split("T");return e.date=null===t||void 0===t?void 0:t[0],e})),{allexpenseData:r,expenseData:s,spendLoading:l}}),(function(e){return{deleteData:function(n){return e(P.Id.endpoints.deleteData.initiate(n))},getExpenseData:function(n){return e(P.Id.endpoints.getData.initiate(n))},addExpenseData:function(n){return e(P.Id.endpoints.addData.initiate(n))},updateData:function(n){return e(P.Id.endpoints.updateData.initiate(n))}}}))((function(e){var n=(0,l.useState)([]),t=(0,i.Z)(n,2),s=t[0],b=t[1],D=(0,l.useState)(),y=(0,i.Z)(D,2),P=y[0],A=y[1],N=(0,l.useState)(!1),E=(0,i.Z)(N,2),I=E[0],M=E[1],R=(0,l.useState)(""),U=(0,i.Z)(R,2),B=U[0],G=U[1],K=(0,l.useState)(!1),V=(0,i.Z)(K,2),$=V[0],q=V[1],Q=(0,l.useState)(null),X=(0,i.Z)(Q,2),Y=X[0],ee=X[1],ne=(0,l.useState)(""),te=(0,i.Z)(ne,2),ae=te[0],oe=te[1],re=(0,l.useState)({}),ie=(0,i.Z)(re,2),le=ie[0],se=ie[1],ue=(0,l.useState)(!1),de=(0,i.Z)(ue,2),ce=de[0],ve=de[1],pe=[{label:"Edit",cell:function(e){return(0,O.jsx)(J,{row:e,currentData:we})}},{label:"Item",id:"item",cell:function(e){return e.item}},{label:"Description",id:"desc",cell:function(e){return e.desc}},{label:"Label",id:"label",cell:function(e){return(null===e||void 0===e?void 0:e.label1)||(null===e||void 0===e?void 0:e.label)}},{label:"Date",id:"date",cell:function(e){return(0,C.p6)(null===e||void 0===e?void 0:e.date)}},{label:"Amount",id:"amount",cell:function(e){return e.amount}},{label:"Delete",cell:function(e){return(0,O.jsx)(W,{row:e,setRow:function(){G(e),M(!0)}})}}],fe=e.spendLoading,he=e.expenseData,me=e.allexpenseData;(0,l.useEffect)((function(){e.getExpenseData()}),[]),(0,l.useEffect)((function(){he&&xe(he)}),[he]);var xe=function(e){e&&e.forEach((function(n,t){if(n.date){var a=new Date(n.date),o=new Intl.DateTimeFormat("en",{year:"numeric"}).format(a),r=new Intl.DateTimeFormat("en",{month:"long"}).format(a);e[t].seperator="".concat(r,", ").concat(o)}}));var n,t=(n="seperator",e.reduce((function(e,t){return e[t[n]]||(e[t[n]]=[]),e[t[n]].push(t),e}),{}));se(t)},Ze=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];q(e),!0===n&&(ee(null),oe(!0))},je=function(){var n=(0,r.Z)((0,o.Z)().mark((function n(t){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ve(!0),n.prev=1,n.next=4,e.addExpenseData(t);case 4:ve(!1),w.A9,Ze(!1,!0),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),ve(!1),w.A9;case 13:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}(),ge=function(){var n=(0,r.Z)((0,o.Z)().mark((function n(t){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ve(!0),n.prev=1,n.next=4,e.updateData(t);case 4:w.A9,Ze(!1,!0),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),w.A9;case 11:return n.prev=11,ve(!1),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,8,11,14]])})));return function(e){return n.apply(this,arguments)}}(),we=function(e){e.name=e.item,e.relation=e.label,e.relation1=e.label1,e.address=e.desc,e.primaryContact=e.amount,ee(e),Ze(!0)};return fe?(0,O.jsx)(k.Z,{}):(0,O.jsxs)(d.Z,{children:[(0,O.jsx)(g.Z,{handleConfirm:function(){e.deleteData(B),M(!1)},isOpen:I,closeModal:function(){return M(!1)}}),(0,O.jsx)(z,{show:$,data:Y,updateData:ge,addData:je,isLoading:ce,handleSidebar:Ze,addNew:ae}),(0,O.jsx)(c.Z,{sx:{pl:{sm:2},pr:{xs:1,sm:1}},children:(0,O.jsxs)(v.ZP,{container:!0,justifyContent:"space-between",spacing:.5,children:[(0,O.jsx)(v.ZP,{item:!0,xs:5,children:(0,O.jsx)(p.Z,{variant:"outlined",onClick:function(){return Ze(!0,!0)},children:"Add Item"})}),(0,O.jsx)(v.ZP,{item:!0,xs:5,children:(0,O.jsx)(f.Z,{onChange:function(e){return function(e){var n=e.target.value;if(n.length){var t=(he.length?he:null!==me&&void 0!==me?me:[]).filter((function(e){var t,a,o,r,i=e.desc,l=e.item,s=e.amount,u=e.label;return o=(null===i||void 0===i?void 0:i.toLowerCase().startsWith(n.toLowerCase()))||(null===l||void 0===l?void 0:l.toLowerCase().startsWith(n.toLowerCase()))||(null===(t=toString(s))||void 0===t?void 0:t.toLowerCase().startsWith(n.toLowerCase()))||(null===u||void 0===u?void 0:u.toLowerCase().includes(n.toLowerCase())),r=(null===i||void 0===i?void 0:i.toLowerCase().includes(n.toLowerCase()))||(null===l||void 0===l?void 0:l.toLowerCase().includes(n.toLowerCase()))||(null===(a=toString(s))||void 0===a?void 0:a.toLowerCase().includes(n.toLowerCase()))||(null===u||void 0===u?void 0:u.toLowerCase().includes(n.toLowerCase())),o||(!o&&r?r:null)}));xe(t)}else xe(me)}(e)},placeholder:"Search"})}),(0,O.jsx)(v.ZP,{item:!0,xs:2,children:(0,O.jsx)(h.Z,{title:"Download",children:(0,O.jsx)(m.Z,{onClick:function(e){return H(e,le)},children:(0,O.jsx)(S.Z,{})})})})]})}),(0,O.jsx)(x.Z,{sx:{m:1},children:(0,O.jsx)(Z.Z,{children:(0,O.jsxs)(v.ZP,{container:!0,spacing:3,children:[(0,O.jsx)(v.ZP,{item:!0,xs:12,sm:4,children:(0,O.jsx)(u.gc,{isMulti:!0,id:"data-category",name:"label",value:null===s||void 0===s?void 0:s.map((function(e){var n=T.filter((function(n){return n.value===e.value}));return{value:n[0].value,label:n[0].label}})),onChange:function(e,n){return function(e){var n=[];(null===e||void 0===e?void 0:e.length)&&e.forEach((function(e){n.push(e)})),console.log(n),b(n)}(n)},options:T,renderInput:function(e){return(0,O.jsx)(w.nv,(0,a.Z)((0,a.Z)({},e),{},{placeholder:"Filter by label"}))}})}),(0,O.jsx)(v.ZP,{item:!0,xs:12,sm:4,children:(0,O.jsx)(u.gc,{id:"dateID",name:"date",onChange:function(e,n){return A(null===n||void 0===n?void 0:n.value)},options:F,value:(0,_.NA)(F,P),renderInput:function(e){return(0,O.jsx)(w.nv,(0,a.Z)((0,a.Z)({},e),{},{placeholder:"Date range filter",onChange:function(e){return A(null===e||void 0===e?void 0:e.value)}}))}})}),(0,O.jsx)(v.ZP,{item:!0,xs:12,sm:4,children:(0,O.jsx)(p.Z,{variant:"outlined",onClick:function(n){e.getData({labels:s.map((function(e){return e.value})).join(","),year:P})},children:"Apply"})})]})})}),Object.keys(le).map((function(e,n){var t,a=null===(t=le[e])||void 0===t?void 0:t.map((function(e){return Number(e.amount)})).reduce((function(e,n){return e+n}));return(0,O.jsx)(x.Z,{sx:{m:1},children:(0,O.jsxs)(Z.Z,{children:[(0,O.jsxs)(v.ZP,{container:!0,spacing:1,sx:{display:"flex",justifyContent:"space-around"},children:[(0,O.jsxs)(j.Z,{children:["Total Spends :",a]}),(0,O.jsx)(j.Z,{children:e}),(0,O.jsx)(L.Z,{onClick:function(n){return H(n,le,e)}})]}),(0,O.jsx)(w.Gn,{columns:pe,rows:le[e]})]})},n+1)}))]})}))},18377:function(e,n,t){"use strict";var a=t(46095),o=t(46417);n.Z=(0,a.Z)((0,o.jsx)("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download")},56972:function(e,n,t){"use strict";var a=t(87462),o=t(63366),r=t(47313),i=t(83061),l=t(21921),s=t(64164),u=t(11236),d=t(65269),c=t(46417),v=["className","component"],p=(0,s.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,n){return n.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),f=r.forwardRef((function(e,n){var t=(0,u.Z)({props:e,name:"MuiCardContent"}),r=t.className,s=t.component,f=void 0===s?"div":s,h=(0,o.Z)(t,v),m=(0,a.Z)({},t,{component:f}),x=function(e){var n=e.classes;return(0,l.Z)({root:["root"]},d.N,n)}(m);return(0,c.jsx)(p,(0,a.Z)({as:f,className:(0,i.default)(x.root,r),ownerState:m,ref:n},h))}));n.Z=f},65269:function(e,n,t){"use strict";t.d(n,{N:function(){return o}});var a=t(32298);function o(e){return(0,a.Z)("MuiCardContent",e)}var r=(0,t(77430).Z)("MuiCardContent",["root"]);n.Z=r},96900:function(e,n,t){"use strict";var a=t(87462),o=t(63366),r=t(47313),i=t(83061),l=t(21921),s=t(64164),u=t(11236),d=t(54295),c=t(74604),v=t(46417),p=["className","raised"],f=(0,s.ZP)(d.Z,{name:"MuiCard",slot:"Root",overridesResolver:function(e,n){return n.root}})((function(){return{overflow:"hidden"}})),h=r.forwardRef((function(e,n){var t=(0,u.Z)({props:e,name:"MuiCard"}),r=t.className,s=t.raised,d=void 0!==s&&s,h=(0,o.Z)(t,p),m=(0,a.Z)({},t,{raised:d}),x=function(e){var n=e.classes;return(0,l.Z)({root:["root"]},c.y,n)}(m);return(0,v.jsx)(f,(0,a.Z)({className:(0,i.default)(x.root,r),elevation:d?8:void 0,ref:n,ownerState:m},h))}));n.Z=h},74604:function(e,n,t){"use strict";t.d(n,{y:function(){return o}});var a=t(32298);function o(e){return(0,a.Z)("MuiCard",e)}var r=(0,t(77430).Z)("MuiCard",["root"]);n.Z=r},20067:function(){}}]);