"use strict";(self.webpackChunkvpn=self.webpackChunkvpn||[]).push([[991],{1087:function(e,n,t){t.d(n,{Z:function(){return a}});t(47313);var i=t(33505),r=t(36186),s=t(39338),l=t(6306),o=t(46417);function a(e){var n=e.collapseID,t=(e.setcollapseID,e.collapseItem),a=e.formatme,c=e.toggleCollapse;return(0,o.jsxs)(i.Z,{sx:{my:.9},expanded:n===t.id,onChange:function(){return c(t.id)},children:[(0,o.jsx)(s.Z,{expandIcon:(0,o.jsx)(l.Z,{}),children:a(t.title)}),(0,o.jsx)(r.Z,{children:t.content})]})}},18825:function(e,n,t){t.d(n,{z:function(){return a}});var i=t(19641),r=t(9506),s=t(56605),l=(t(47313),t(94843)),o=t(46417),a=function(e){return(0,o.jsxs)(i.ZP,{container:!0,sx:{px:2.5,py:1},children:[(0,o.jsx)(i.ZP,{item:!0,xs:6,children:(0,o.jsx)(l.ll,{title:e.heading})}),(0,o.jsx)(i.ZP,{item:!0,xs:6,children:(0,o.jsx)(r.Z,{display:"flex",justifyContent:"flex-end",children:(0,o.jsx)(s.Z,{onChange:function(n){return e.search(n.target.value)},placeholder:"Search"})})})]})}},47578:function(e,n,t){t.d(n,{r:function(){return Z}});var i=t(1413),r=t(93433),s=t(29439),l=t(47313),o=t(30712),a=t(13760),c=t(80614),d=t(44610),u=t(47605),h=t(71003),x=t(35898),v=t(20938),f=t(46417),Z=function(e){var n=(0,l.useState)(e.file?e.file:[]),t=(0,s.Z)(n,2),Z=t[0],p=t[1],m=(0,c.uI)({maxFiles:e.notMulti?1:5,multiple:!e.notMulti,onDrop:function(n){if(1===e.notMulti)e.setfilesOndrop(n),p(n.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})));else{if((Z.length?Z.filter((function(e){var t;return(null===e||void 0===e?void 0:e.name)===(null===(t=n[0])||void 0===t?void 0:t.name)})):[]).length)return(0,f.jsx)(v.A9,{handleClick:function(){},openSnack:!0,openSnackMsg:"File already added"});e.setfilesOndrop([].concat((0,r.Z)(Z),(0,r.Z)(n))),p([].concat((0,r.Z)(Z),(0,r.Z)(n)))}}}),j=m.getInputProps,g=m.open,S=null===Z||void 0===Z?void 0:Z.map((function(n){return(0,f.jsx)(d.Z,{sx:{m:1},label:(0,f.jsxs)(u.Z,{children:["".concat(n.name.length>15?"".concat(n.name.slice(0,10),"..."):n.name),(0,f.jsx)(o.Z,{size:15,sx:{margin:"-6px 6px"},onClick:function(t){t.stopPropagation(),function(n){1===(null===Z||void 0===Z?void 0:Z.length)&&e.setfilesParent([]),e.isMulti&&(p(Z.filter((function(e){return e!==n}))),e.setfilesParent(Z.filter((function(e){return e!==n}))))}(n)}})]},n.name),variant:"outlined"},n.name)}));return(0,l.useEffect)((function(){return function(){Z.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[Z]),(0,l.useEffect)((function(){e.resetDropzone&&p([])}),[e.resetDropzone]),(0,f.jsxs)(h.Z,{variant:"outlined",fullWidth:!0,sx:{display:"inline-block",my:1},children:[(0,f.jsxs)(x.Z,{onClick:g,children:[(0,f.jsx)(v.nv,(0,i.Z)({},j())),(S.length<=0||e.isMulti)&&(0,f.jsxs)(u.Z,{children:[e.buttonText," ",(0,f.jsx)(a.Z,{sx:{margin:"-6px 6px"}})]})]}),(0,f.jsx)("div",{children:S.length>0&&(0,f.jsx)("aside",{style:{display:"flex"},children:S})})]})}},25240:function(e,n,t){var i=t(29439),r=t(42357),s=t(47313),l=t(19641),o=t(57775),a=t(51057),c=t(47605),d=t(29917),u=t(61474),h=t(46417);n.Z=function(e){var n=(0,s.useState)("00"),t=(0,i.Z)(n,2),x=t[0],v=t[1],f=(0,s.useState)("00"),Z=(0,i.Z)(f,2),p=Z[0],m=Z[1],j=(0,s.useState)(!1),g=(0,i.Z)(j,2),S=g[0],P=g[1],y=(0,s.useState)(0),C=(0,i.Z)(y,2),b=C[0],M=C[1];(0,s.useEffect)((function(){var e;return S&&(e=setInterval((function(){var e=b%60,n=Math.floor(b/60),t=1===String(e).length?"0".concat(e):e,i=1===String(n).length?"0".concat(n):n;v(t),m(i),M((function(e){return e+1}))}),650)),function(){return clearInterval(e)}}),[S,b]);var A=(0,r.useReactMediaRecorder)({video:!1,audio:!0,echoCancellation:!0,onStop:function(n,t){console.log(t),function(e){var n=new FileReader;return n.readAsDataURL(e),new Promise((function(e){n.onloadend=function(){e(n.result)}}))}(t).then((function(n){e.setRecVideo(n)}))}}),D=A.status,w=A.startRecording,_=A.stopRecording,R=A.pauseRecording,k=A.clearBlobUrl,O=A.mediaBlobUrl;return(0,h.jsx)(l.ZP,{item:!0,xs:12,sm:8,children:(0,h.jsxs)(o.Z,{variant:"outlined",children:[(0,h.jsxs)(a.Z,{children:[(0,h.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",padding:"5px"},borderRadius:"50px",padding:"15px",marginBottom:1,children:[(0,h.jsxs)(c.Z,{color:"text.secondary",children:[" ","Recording Status : ",D]}),(0,h.jsxs)(c.Z,{color:"text.secondary",children:[p," : ",x]})]}),(O||e.recVideo)&&(0,h.jsx)("audio",{style:{width:"100%"},src:O||e.recVideo,controls:!0})]}),(0,h.jsxs)(d.Z,{sx:{justifyContent:"center"},children:[(0,h.jsx)(u.ZP,{varient:"contained",label:S?"Pause":"paused"===D?"Resume":"Start",onClick:function(){S?R():w(),P(!S)}}),(0,h.jsx)(u.ZP,{varient:"outlined",label:"Stop",onClick:function(){_(),P(!1)}}),(0,h.jsx)(u.ZP,{varient:"outlined",label:"Reset",onClick:function(){P(!1),M(0),v("00"),m("00"),k(),P(!1)}})]})]})})}},76846:function(e,n,t){t.r(n),t.d(n,{default:function(){return Y}});var i=t(29439),r=t(47313),s=t(9506),l=t(19641),o=t(36936),a=t(81800),c=t(47605),d=t(94469),u=t(33604),h=t(69625),x=t(98668),v=t(87124),f=t(57775),Z=t(19536),p=t(51057),m=t(31881),j=t.n(m),g=t(39500),S=t(20938),P=t(54727),y=t(1087),C=t(18825),b=t(46417),M=function(e){var n=(0,r.useState)(!1),t=(0,i.Z)(n,2),o=t[0],a=t[1],m=(0,r.useState)(""),M=(0,i.Z)(m,2),A=M[0],D=M[1],w=(0,r.useState)(""),_=(0,i.Z)(w,2),R=_[0],k=_[1],O=(0,r.useState)(!1),L=(0,i.Z)(O,2),I=L[0],N=L[1],T=(0,r.useState)(),E=(0,i.Z)(T,2),U=E[0],V=E[1],F=(0,r.useState)(!1),G=(0,i.Z)(F,2),z=G[0],B=G[1],q=(0,r.useState)([]),W=(0,i.Z)(q,2),Q=W[0],H=W[1],J=(0,r.useState)(""),K=(0,i.Z)(J,2),Y=K[0],$=K[1],X=(0,r.useState)(),ee=(0,i.Z)(X,2),ne=ee[0],te=ee[1],ie=function(){a(!o)},re=function(e){D(A!==e?e:"")},se=function(n){var t;return null!==(t=e.colorOption)&&void 0!==t&&t[n]?e.colorOption[n]:n},le=function(n){var t,i,r="";return(null===n||void 0===n||null===(t=n.nominees)||void 0===t?void 0:t.length)&&n.nominees.forEach((function(e,t){t===n.nominees.length-1?r+=null===e||void 0===e?void 0:e.name:r="".concat(r+(null===e||void 0===e?void 0:e.name),", ")})),(0,b.jsxs)(l.ZP,{container:!0,columnSpacing:1,rowSpacing:1,children:[(0,b.jsx)(l.ZP,{item:!0,display:"flex",sm:4,xs:12,children:(0,b.jsxs)(l.ZP,{container:!0,children:[(0,b.jsx)(l.ZP,{item:!0,xs:4,children:(0,b.jsx)(c.Z,{borderRadius:1,textAlign:"center",height:"max-cotent",bgcolor:"#3f3fcb",color:"white",padding:.1,sx:{cursor:"pointer"},onClick:function(){return e.editItem(n)},children:"EDIT"})}),(0,b.jsx)(l.ZP,{item:!0,xs:4,children:(0,b.jsx)(c.Z,{borderRadius:1,textAlign:"center",height:"max-cotent",bgcolor:"#e53a29",color:"white",padding:.1,sx:{mx:1,cursor:"pointer"},onClick:function(){$(n._id),k(!0)},children:"DELETE"})})]})}),(0,b.jsx)(l.ZP,{item:!0,sm:4,xs:12,children:(0,b.jsxs)(l.ZP,{container:!0,children:[(0,b.jsx)(l.ZP,{item:!0,xs:5,children:(0,b.jsx)(c.Z,{children:"Type"})}),(0,b.jsx)(l.ZP,{item:!0,xs:7,children:(0,b.jsxs)(c.Z,{children:[": ",n.type]})})]})}),(0,b.jsx)(l.ZP,{item:!0,sm:4,xs:12,children:(0,b.jsxs)(l.ZP,{container:!0,children:[(0,b.jsx)(l.ZP,{item:!0,xs:5,children:(0,b.jsx)(c.Z,{children:"Description"})}),(0,b.jsx)(l.ZP,{item:!0,xs:7,children:(0,b.jsxs)(c.Z,{children:[": ",n.desc]})})]})}),(0,b.jsx)(l.ZP,{item:!0,sm:4,xs:12,children:(0,b.jsxs)(l.ZP,{container:!0,children:[(0,b.jsx)(l.ZP,{item:!0,xs:5,children:(0,b.jsx)(c.Z,{children:"Date"})}),(0,b.jsx)(l.ZP,{item:!0,xs:7,children:(0,b.jsxs)(c.Z,{children:[": ",null!==n&&void 0!==n&&n.date?(0,P.p6)(null===n||void 0===n||null===(i=n.date)||void 0===i?void 0:i.split("T")[0]):"After Death"]})})]})}),(0,b.jsx)(l.ZP,{item:!0,sm:4,xs:12,children:(0,b.jsxs)(l.ZP,{container:!0,children:[(0,b.jsx)(l.ZP,{item:!0,xs:5,children:(0,b.jsx)(c.Z,{children:"Receiver Name"})}),(0,b.jsx)(l.ZP,{item:!0,xs:7,children:(0,b.jsxs)(c.Z,{children:[": ",n.rname]})})]})}),(0,b.jsx)(l.ZP,{item:!0,sm:4,xs:12,children:(0,b.jsxs)(l.ZP,{container:!0,children:[(0,b.jsx)(l.ZP,{item:!0,xs:5,children:(0,b.jsx)(c.Z,{children:"Receiver Email"})}),(0,b.jsx)(l.ZP,{item:!0,xs:7,children:(0,b.jsxs)(c.Z,{children:[": ",n.remail]})})]})}),(0,b.jsx)(l.ZP,{item:!0,sm:4,xs:12,children:(0,b.jsxs)(l.ZP,{container:!0,children:[(0,b.jsx)(l.ZP,{item:!0,xs:5,children:(0,b.jsx)(c.Z,{children:"Receiver Phone"})}),(0,b.jsx)(l.ZP,{item:!0,xs:7,children:(0,b.jsxs)(c.Z,{children:[": ",n.rphone]})})]})}),(0,b.jsx)(l.ZP,{item:!0,sm:4,xs:12,children:(0,b.jsxs)(l.ZP,{container:!0,children:[(0,b.jsx)(l.ZP,{item:!0,xs:5,children:(0,b.jsx)(c.Z,{children:"Status"})}),(0,b.jsx)(l.ZP,{item:!0,xs:7,children:(0,b.jsxs)(c.Z,{children:[":",0===n.status?(0,b.jsx)(b.Fragment,{children:" Pending"}):1===n.status?(0,b.jsx)(b.Fragment,{children:" Delivered"}):(0,b.jsxs)(b.Fragment,{children:[" Failed : ",n.failReason]})]})})]})}),(0,b.jsx)(l.ZP,{item:!0,sm:4,xs:12,children:("Video"===n.type||"Voice"===n.type)&&(0,b.jsx)(c.Z,{sx:{color:"#20756d",cursor:"pointer"},onClick:function(){return function(e,n){N(!0),B("Video"===n),ie();var t=sessionStorage.getItem("authtoken");j().get("/backendapi/sender/msg/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){var n;if(e.data&&null!==(n=e.data[0])&&void 0!==n&&n.media){for(var t,i,r=null===(t=e.data[0])||void 0===t||null===(i=t.media)||void 0===i?void 0:i.split("base64,"),s=r[0].substring(5,r[0].length-1),l=atob(r[1]),o=new Array(l.length),a=0;a<l.length;a++)o[a]=l.charCodeAt(a);var c=new Uint8Array(o),d=new Blob([c],{type:s}),u=URL.createObjectURL(d);V(u),N(!1)}}))}(n.msg,n.type)},children:"Video"===n.type?"Play Video":"Play Audio"})})]})},oe=(null===ne||void 0===ne?void 0:ne.length)>0?Q:e.collapseItems;return(0,b.jsxs)(s.Z,{children:[(0,b.jsxs)(d.Z,{open:o,onClose:ie,centered:!0,children:[(0,b.jsx)(u.Z,{children:"Message"}),(0,b.jsx)(h.Z,{children:I?(0,b.jsx)(x.Z,{}):(0,b.jsx)(v.Z,{component:z?"video":"audio",controls:!0,src:U,autoPlay:!0,sx:{minWidth:"250px"}})})]}),e.loadingmsg&&null===e.collapseItems?(0,b.jsx)(x.Z,{}):(0,b.jsxs)(f.Z,{children:[(0,b.jsx)(C.z,{heading:e.heading,search:function(n){te(n);var t=e.collapseItems.filter((function(e){var t=e.desc.toLowerCase().startsWith(n.toLowerCase())||e.type.toLowerCase().startsWith(n.toLowerCase())||e.title.toLowerCase().startsWith(n.toLowerCase()),i=e.desc.toLowerCase().includes(n.toLowerCase())||e.type.toLowerCase().includes(n.toLowerCase())||e.title.toLowerCase().includes(n.toLowerCase());return!(!t&&!i)}));H(t)}}),(0,b.jsx)(g.Z,{handleConfirm:function(){var n;n=Y,j().delete("/backendapi/sender/deletebyid/".concat(n),{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}).then((function(e){e&&S.A9})).catch(),k(!1),e.refreshData.callFunc(!e.refreshData.value)},isOpen:R,closeModal:function(){return k(!1)}}),(0,b.jsx)(Z.Z,{}),(0,b.jsx)(p.Z,{children:(null===oe||void 0===oe?void 0:oe.length)>0?oe.map((function(e){return(0,b.jsx)(r.Fragment,{children:(0,b.jsx)(y.Z,{collapseID:A,setcollapseID:D,collapseItem:{content:le(e),title:null===e||void 0===e?void 0:e.title,id:e._id},formatme:se,toggleCollapse:re})},e._id)})):(0,b.jsx)("span",{children:"No Messages Found"})})]})]})},A=t(29748),D=t(1413),w=t(49969),_=t(69173),R=t(35898),k=t(82363),O=t(25240),L=t(61474),I=t(47578),N=t(79428),T=t(52156),E=t(48182),U=[{value:"Attachment",label:"Attachment"},{value:"Text",label:"Text"},{value:"Voice",label:"Voice"},{value:"Video",label:"Video"}],V=function(e){var n=e.nomineeOption,t=e.oldMsg,s=e.handleSidebar,o=(0,r.useState)([]),a=(0,i.Z)(o,2),c=a[0],d=a[1],u=(0,r.useState)(""),h=(0,i.Z)(u,2),x=h[0],v=h[1],Z=(0,r.useState)(""),m=(0,i.Z)(Z,2),j=m[0],g=m[1],y=(0,r.useState)(""),C=(0,i.Z)(y,2),M=C[0],A=C[1],V=(0,r.useState)(""),F=(0,i.Z)(V,2),G=F[0],z=F[1],B=(0,r.useState)(null),q=(0,i.Z)(B,2),W=q[0],Q=q[1],H=(0,r.useState)([]),J=(0,i.Z)(H,2),K=J[0],Y=J[1],$=(0,r.useState)(""),X=(0,i.Z)($,2),ee=X[0],ne=X[1],te=(0,r.useState)(""),ie=(0,i.Z)(te,2),re=ie[0],se=ie[1],le=(0,r.useState)(!1),oe=(0,i.Z)(le,2),ae=oe[0],ce=oe[1],de=(0,r.useState)(""),ue=(0,i.Z)(de,2),he=ue[0],xe=ue[1],ve=(0,r.useState)(!1),fe=(0,i.Z)(ve,2),Ze=fe[0],pe=fe[1],me=(0,r.useState)(!1),je=(0,i.Z)(me,2),ge=je[0],Se=je[1],Pe=(0,r.useState)(!1),ye=(0,i.Z)(Pe,2),Ce=ye[0],be=ye[1],Me=(0,r.useState)(""),Ae=(0,i.Z)(Me,2),De=Ae[0],we=Ae[1],_e=(0,r.useState)(""),Re=(0,i.Z)(_e,2),ke=Re[0],Oe=Re[1],Le=(0,r.useState)(""),Ie=(0,i.Z)(Le,2),Ne=Ie[0],Te=Ie[1],Ee=(0,r.useState)(!1),Ue=(0,i.Z)(Ee,2),Ve=Ue[0],Fe=Ue[1];(0,r.useEffect)((function(){if(null!==t&&void 0!==t&&t._id){var e,n=t.date,i=t.desc,r=t.rname,s=t.remail,l=t.rphone,o=t.signature,a=t.title,u=t.type,h=t._id,x=t.mediaDetails;Q(h),se(null===n||void 0===n?void 0:n.split("T")[0]),A(i),d(c),Oe(s),we(r),Te(l),g(o),v(a),z(u),ce(!n),ne("Attachment"===u?x:null===(e=x[0])||void 0===e?void 0:e.media)}}),[t]);var Ge=function(){we(""),Te(""),Oe(""),v(""),z(""),A(""),se(""),ce(!1),g(""),d([]),xe(""),ne(""),Y("")};return(0,r.useEffect)((function(){if(null!==he&&void 0!==he&&he.length){var e,t,i,r=n.filter((function(e){return(null===e||void 0===e?void 0:e.label)===he}));if(null!==r&&void 0!==r&&r.length)we(null===r||void 0===r||null===(e=r[0])||void 0===e?void 0:e.label),Oe(null===r||void 0===r||null===(t=r[0])||void 0===t?void 0:t.email),Te(null===r||void 0===r||null===(i=r[0])||void 0===i?void 0:i.primaryContact)}}),[he]),(0,b.jsx)(f.Z,{children:(0,b.jsxs)(p.Z,{children:[(0,b.jsx)(S.ll,{title:(0,b.jsxs)(l.ZP,{container:!0,flexDirection:"row",justifyContent:"space-between",children:[(0,b.jsx)(l.ZP,{item:!0,children:null!==t&&void 0!==t&&t._id?"Edit Message":"Schedule Message"}),(0,b.jsx)(l.ZP,{item:!0,children:G&&(0,b.jsx)(_.Z,{label:"Deliver after my death",control:(0,b.jsx)(w.Z,{checked:ae,onChange:function(){return!ae&&se(""),void ce(!ae)}})})})]})}),(0,b.jsxs)(l.ZP,{container:!0,rowSpacing:.01,spacing:1,justifyContent:"center",children:[(0,b.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(L.gc,{name:"color",options:U,isDisabled:null===t||void 0===t?void 0:t._id,onChange:function(e,n){return z(null===n||void 0===n?void 0:n.value)},value:(0,N.NA)(U,G),renderInput:function(e){return(0,b.jsx)(T.Z,(0,D.Z)((0,D.Z)({},e),{},{placeholder:null!==t&&void 0!==t&&t._id?G:"Message Type *"}))}})}),(0,b.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(E.Z,{options:n,value:he,onChange:function(e,t){"Add Nominee"!==t?t&&!n.includes(t)&&xe(t):s()},onInputChange:function(e,n){"Add Nominee"!==n?xe(n):s()},renderInput:function(e){return(0,b.jsx)(T.Z,(0,D.Z)((0,D.Z)({},e),{},{placeholder:"Reciever"}))}})}),G&&(0,b.jsxs)(r.Fragment,{children:[(0,b.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(T.Z,{type:"email",id:"remail",error:Ze,placeholder:"Receiver Email *",value:ke,onChange:function(e){return function(e){var n=String(e).toLowerCase().match(/^([A-Za-z0-9_\-.])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,})$/);Oe(e),pe(!n)}(e.target.value)}})}),(0,b.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(T.Z,{type:"tel",id:"phone",maxLength:10,error:ge,placeholder:"Receiver Phone *",value:Ne,onChange:function(e){e.preventDefault();var n=e.target.value,t=P.Yd.test(n);Te(n),Se(!t)},onKeyPress:function(e){return(0,P.ZP)(e)}})}),(0,b.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(T.Z,{id:"title",placeholder:"Subject *",value:x,onChange:function(e){return v(e.target.value)}})}),(0,b.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(T.v,{value:ae?null:re,id:"exampleDate",label:"Delivery Date",disabled:!!ae,onChange:function(e){return function(e){var n=new Date(e)>new Date||""===e;se(e),be(!n)}(e)},shouldDisableDate:function(e){return!(e>new Date)}})}),"Voice"===G&&(0,b.jsx)(O.Z,(0,D.Z)({},e)),"Video"===G&&(0,b.jsx)(k.Z,{setRecVideo:ne,recVideo:ee}),(0,b.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(T.Z,{type:"textarea",placeholder:"Description",rows:"3",id:"description",value:M,onChange:function(e){return A(e.target.value)}})}),(0,b.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(T.Z,{type:"textarea",placeholder:"Signature",className:"input-label placeholder ",rows:"1",id:"signature",value:j,onChange:function(e){return g(e.target.value)}})}),(0,b.jsx)(l.ZP,{item:!0,xs:12,sm:12,children:"Attachment"===G&&(0,b.jsx)(I.r,{notMulti:1,setfilesOndrop:function(e){Fe(!1),Y(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))},resetDropzone:Ve,file:ee})})]})]}),(0,b.jsxs)(R.Z,{direction:"row",spacing:3,sx:{mt:3},justifyContent:"end",children:[(0,b.jsx)(L.ZP,{varient:"outlined",label:null!==t&&void 0!==t&&t._id?"Cancel":"Reset",onClick:function(){return Ge()}}),(0,b.jsx)(L.ZP,{varient:"contained",label:null!==t&&void 0!==t&&t._id?"Update":"Add",onClick:function(n){return function(n){var i;n.preventDefault(),!(Ze||ge||!ae&&Ce||null===De||void 0===De)&&De.length&&null!==Ne&&void 0!==Ne&&Ne.length&&null!==ke&&void 0!==ke&&ke.length&&null!==G&&void 0!==G&&G.length&&null!==x&&void 0!==x&&x.length&&(ae||re)&&(re!==(null===t||void 0===t||null===(i=t.date)||void 0===i?void 0:i.split("T")[0])||M!==(null===t||void 0===t?void 0:t.desc)||De!==(null===t||void 0===t?void 0:t.rname)||ke!==(null===t||void 0===t?void 0:t.remail)||Ne!==(null===t||void 0===t?void 0:t.rphone)||j!==(null===t||void 0===t?void 0:t.signature)||x!==(null===t||void 0===t?void 0:t.title))&&(null!==t&&void 0!==t&&t._id?e.editMessage({_id:W,desc:M,type:G,title:x,date:re,signature:j,rname:De,remail:ke,rphone:Ne,msg:("Voice"===G||"Video"===G||"Attachment"===G)&&ee||K.length&&K||""}):e.scheduleNewMessage({desc:M,type:G,title:x,date:re,signature:j,rname:De,remail:ke,rphone:Ne,msg:("Voice"===G||"Video"===G||"Attachment"===G)&&ee||K.length&&K||""}),Ge())}(n)}})]})]})})},F=t(45987),G=t(74165),z=t(15861),B=t(80571),q=["id"],W=JSON.parse(sessionStorage.getItem("logInUserData")),Q=B.g.injectEndpoints({endpoints:function(e){return{getScheduled:e.query({query:function(e){return"/backendapi/sender/getlist/".concat(W._id)},providesTags:["Postman"],onQueryStarted:function(e,n){return(0,z.Z)((0,G.Z)().mark((function e(){var t,i,r,s;return(0,G.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.dispatch,i=n.queryFulfilled,t({type:"LOADING_POSTMAN_MSG",data:!0}),e.prev=2,e.next=5,i;case 5:null!==(r=e.sent)&&void 0!==r&&r.data&&t({type:"GET_POSTMAN_MSG",data:r.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t({type:"ERR_POSTMAN_MSG",data:null!==(s=null===e.t0||void 0===e.t0?void 0:e.t0.length)&&void 0!==s?s:""});case 12:return e.prev=12,t({type:"POSTMAN_MSG_LOADING",data:!1}),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})))()}}),scheduleNew:e.mutation({query:function(e){return{url:"/backendapi/sender/schedulenew",method:"POST",body:(0,D.Z)((0,D.Z)({},e),{},{user:W._id})}},invalidatesTags:["Postman"],onQueryStarted:function(e,n){return(0,z.Z)((0,G.Z)().mark((function e(){var t,i,r;return(0,G.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.dispatch,i=n.queryFulfilled,t({type:"ADD_MSG_POSTMAN_LOADING",data:!0}),e.prev=2,e.next=5,i.then((function(e){t(Q.endpoints.getScheduledMessages.initiate()),t({type:"ADD_MSG_POSTMAN_SUCCESS"})}));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),console.log("scheduleNewMessage error",e.t0),t({type:"ADD_MSG_POSTMAN_FAILED",data:null!==(r=null===e.t0||void 0===e.t0?void 0:e.t0.length)&&void 0!==r?r:""});case 11:return e.prev=11,t({type:"ADD_MSG_POSTMAN_LOADING",data:!0}),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,7,11,14]])})))()}}),editMessage:e.mutation({query:function(e){return{url:"/backendapi/sender/update",method:"POST",body:{obj:e,user:W._id}}},invalidatesTags:["Postman"],onQueryStarted:function(e,n){return(0,z.Z)((0,G.Z)().mark((function t(){var i,r,s;return(0,G.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.id,(0,F.Z)(e,q),i=n.dispatch,r=n.queryFulfilled,i({type:"UPDATE_MSG_POSTMAN_LOADING",data:!0}),t.prev=3,t.next=6,r.then((function(e){i({type:"UPDATE_MSG_POSTMAN_SUCCESS"}),i(Q.endpoints.getScheduledMessages.initiate())}));case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(3),i({type:"UPDATE_MSG_POSTMAN_FAILED",data:null!==(s=null===t.t0||void 0===t.t0?void 0:t.t0.length)&&void 0!==s?s:""}),console.log("scheduleNewMessage update",t.t0);case 12:return t.prev=12,i({type:"UPDATE_MSG_POSTMAN_LOADING",data:!0}),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[3,8,12,15]])})))()}})}}}),H=Q.useGetScheduledQuery,J=Q.useEditMessageMutation,K=Q.useScheduleNewMutation,Y=function(e){var n=H(),t=n.data,c=n.isFetching,d=J(),u=(0,i.Z)(d,1)[0],h=K(),x=(0,i.Z)(h,1)[0],v=(0,o.mB)().data,f=(0,r.useState)(null),Z=(0,i.Z)(f,2),p=Z[0],m=Z[1],j=(0,r.useState)(!1),g=(0,i.Z)(j,2),S=g[0],P=g[1],y=(0,r.useState)([]),C=(0,i.Z)(y,2),D=C[0],w=C[1],_=(0,r.useState)(!1),R=(0,i.Z)(_,2),k=R[0],O=R[1];(0,r.useEffect)((function(){if(null!==v&&void 0!==v&&v.length){var e=[{value:"Add Nominee",label:"Add Nominee"}];v.forEach((function(n){var t={value:n._id,primaryContact:n.primaryContact,email:n.email,label:"".concat(n.name," - ").concat(n.relation)};e.push(t)})),w(e)}}),[v]);return(0,b.jsxs)(s.Z,{children:[S&&(0,b.jsx)(A.Z,{handleSidebar:function(){return P(!1)}}),(0,b.jsxs)(l.ZP,{container:!0,spacing:1,sx:{p:2},children:[(0,b.jsx)(l.ZP,{item:!0,xs:12,md:9,lg:9,children:(0,b.jsx)(V,{oldMsg:p,nomineeOption:D,handleSidebar:function(){return P(!0)},nomineesList:v,editMessage:u,scheduleNewMessage:x})}),(0,b.jsx)(a.Z,{}),(0,b.jsx)(l.ZP,{item:!0,xs:12,md:9,lg:9,children:(0,b.jsx)(M,{heading:"Messages History",collapseItems:t,colorOption:null===t||void 0===t?void 0:t.colorOption,editItem:function(e){m(e)},loadingmsg:c,handleFilter:function(){console.log("Call filter function")},refreshData:{value:k,callFunc:O}})})]})]})}},82363:function(e,n,t){var i=t(29439),r=t(47313),s=t(61474),l=t(42357),o=t(38693),a=t(57441),c=t(16423),d=t(91536),u=t(19641),h=t(57775),x=t(51057),v=t(47605),f=t(9506),Z=t(29917),p=t(46417),m=function(e){var n=e.stream,t=(0,r.useRef)(null);return(0,r.useEffect)((function(){t.current&&n&&(t.current.srcObject=n)}),[n]),n?(0,p.jsx)("video",{ref:t,width:"100%",height:"100%",autoPlay:!0,controls:!0}):null};n.Z=function(e){var n=e.setRecVideo,t=e.recVideo,j=(0,r.useState)(!0),g=(0,i.Z)(j,2),S=g[0],P=g[1],y=(0,r.useState)(!1),C=(0,i.Z)(y,2),b=C[0],M=C[1],A=(0,r.useState)(!1),D=(0,i.Z)(A,2),w=D[0],_=D[1];return(0,p.jsx)(u.ZP,{item:!0,xs:12,sm:8,children:(0,p.jsx)(l.ReactMediaRecorder,{screen:w,video:!w,audio:S,onStop:function(e,t){console.log(t),function(e){var n=new FileReader;return n.readAsDataURL(e),new Promise((function(e){n.onloadend=function(){e(n.result)}}))}(t).then((function(e){console.log(e),n(e)}))},render:function(e){var n=e.status,i=e.startRecording,r=e.pauseRecording,l=e.stopRecording,u=e.clearBlobUrl,j=e.mediaBlobUrl,g=e.previewStream;return(0,p.jsxs)(h.Z,{variant:"outlined",children:[(0,p.jsxs)(x.Z,{children:[(0,p.jsxs)(v.Z,{textAlign:"center",children:["Status : ",n]}),b&&g&&(0,p.jsx)(m,{stream:g}),!b&&(j||t)&&(0,p.jsx)("video",{src:j||t,controls:!0,autoPlay:!1,width:"100%",height:"100%"}),(0,p.jsxs)(f.Z,{display:"flex",justifyContent:"space-evenly",sx:{mt:2},children:[S?(0,p.jsx)(o.Z,{fontSize:"large",onClick:function(){return P(!S)}}):(0,p.jsx)(a.Z,{fontSize:"large",onClick:function(){return P(!S)}}),(0,p.jsx)(c.Z,{fontSize:"large",onClick:function(e){_(!0)},color:"".concat(w&&"primary")}),(0,p.jsx)(d.Z,{fontSize:"large",onClick:function(e){_(!1)},color:"".concat(!w&&"primary")})]})]}),(0,p.jsxs)(Z.Z,{sx:{justifyContent:"center"},children:[(0,p.jsx)(s.ZP,{varient:"contained",label:b?"Pause":"paused"===n?"Resume":"Start",onClick:function(){b?r():i(),M(!b)}}),(0,p.jsx)(s.ZP,{varient:"outlined",label:"Stop",onClick:function(){l(),M(!1)}}),(0,p.jsx)(s.ZP,{varient:"outlined",label:"Clear",onClick:function(){u(),M(!1)}})]})]})}})})}},6306:function(e,n,t){var i=t(64836);n.Z=void 0;var r=i(t(45045)),s=t(46417),l=(0,r.default)((0,s.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");n.Z=l},85585:function(e,n,t){var i=t(54750),r=t(46417);n.Z=(0,i.Z)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}),"CloseOutlined")}}]);