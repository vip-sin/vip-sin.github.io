"use strict";(self.webpackChunkvpn=self.webpackChunkvpn||[]).push([[934],{51427:function(e,t,n){n.d(t,{EL:function(){return Z},IZ:function(){return m},Id:function(){return L},Jj:function(){return x},Pe:function(){return h},VA:function(){return k},Yu:function(){return f},ZT:function(){return y},cm:function(){return A},is:function(){return v},qi:function(){return p}});var a=n(37762),i=n(74165),r=n(15861),o=n(31881),s=n.n(o),c=n(63861),l=n(97729),u=n(46417),d=JSON.parse(sessionStorage.getItem("logInUserData")),p=function(e){var t=e.user,n=e.token;return function(){var e=(0,r.Z)((0,i.Z)().mark((function e(a){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"GET_ALL_DOCS_LOADING",data:!0}),s().get("/backendapi/documents/".concat(null===t||void 0===t?void 0:t._id),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){a({type:"GET_ALL_DOCS_LOADING",data:!1});for(var t=e.data,n=0;n<t.length;n+=1)t[n].desc=(0,l.Y)(t[n].desc),t[n].id=n+1,t[n].expiry=(0,l.Y)(t[n].expiry),t[n].alias=(0,l.Y)(t[n].alias);a({type:"GET_ALL_DOCS",resp:t})})).catch((function(e){a({type:"GET_ALL_DOCS_ERROR",err:"Error getting docs"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=function(e){return function(){var t=(0,r.Z)((0,i.Z)().mark((function t(n){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"GET_ALL_DATA_LOADING",data:!0}),t.next=3,s().get("/backendapi/nominee/list/".concat(d._id),{params:e,headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}).then((function(t){if(n({type:"GET_ALL_DATA_LOADING",data:!1}),null!==t&&void 0!==t&&t.data){var i,r=(0,a.Z)(t.data);try{for(r.s();!(i=r.n()).done;){var o=i.value;o.nomineeId=(null===o||void 0===o?void 0:o.nomineeId)&&(0,l.Y)(o.nomineeId,!0),o.name=(null===o||void 0===o?void 0:o.name)&&(0,l.Y)(o.name,!0),o.relation=(null===o||void 0===o?void 0:o.relation)&&(0,l.Y)(o.relation,!0),o.relation1=(null===o||void 0===o?void 0:o.relation1)&&(0,l.Y)(o.relation1,!0),o.email=(null===o||void 0===o?void 0:o.email)&&(0,l.Y)(o.email,!0),o.primaryContact=(null===o||void 0===o?void 0:o.primaryContact)&&(0,l.Y)(o.primaryContact,!0),o.secondaryContact=(null===o||void 0===o?void 0:o.secondaryContact)&&(0,l.Y)(o.secondaryContact,!0),o.address=(null===o||void 0===o?void 0:o.address)&&(0,l.Y)(o.address,!0)}}catch(s){r.e(s)}finally{r.f()}n({type:"GET_DATA",data:t.data,totalPages:t.length,params:e})}})).catch((function(e){n({type:"GET_ALL_DATA_LOADING",data:!1})}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(){return function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_USER_ALL_DATA_LOADING",data:!0}),e.next=3,s().post("/backendapi/users/get",{id:d._id},{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}).then((function(e){if(t({type:"GET_USER_ALL_DATA_LOADING",data:!1}),null!==e&&void 0!==e&&e.data){var n=e.data[0];t({type:"GET_USER_ALL_DATA",data:n})}})).catch((function(e){t({type:"GET_USER_ALL_DATA_LOADING",data:!1})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(){return function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"GET_ALL_ASSET_DATA_LOADING",data:!0}),s().get("/backendapi/user/assets/".concat(null===d||void 0===d?void 0:d._id),{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}).then((function(e){t({type:"GET_ALL_ASSET_DATA_LOADING",data:!1});var n=JSON.parse((0,l.Y)(e.data[0]));t({type:"GET_ALL_ASSET_DATA",data:n})})).catch((function(e){t({type:"ERROR_ALL_ASSET_DATA",data:e})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(){return function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"GET_ALL_LIABILITY_DATA_LOADING",data:!0}),s().get("/backendapi/user/liabilities/".concat(null===d||void 0===d?void 0:d._id),{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}).then((function(e){t({type:"GET_ALL_LIABILITY_DATA_LOADING",data:!1});var n=JSON.parse((0,l.Y)(e.data[0]));t({type:"GET_ALL_LIABILITY_DATA",data:n})})).catch((function(e){t({type:"ERROR_ALL_LIABILITY_DATA",data:e})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=function(e,t){return function(){var n=(0,r.Z)((0,i.Z)().mark((function n(a){var r,o,c,l;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:"GET_SPEND_DATA_LOADING",data:!0}),null!==t&&void 0!==t&&t.year&&(r=new Date,o=g(r),c=Number(t.year?t.year:3),r.setMonth(r.getMonth()-c),r.setDate(1),l=g(r),e.dateRangeStart=l,e.dateRangeEnd=o),null!==t&&void 0!==t&&t.labels&&(e.labels=t.labels),n.next=5,s().get("/backendapi/spend/list/".concat(d._id),{params:e,headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}).then((function(t){a({type:"GET_SPEND_DATA_LOADING",data:!1}),a({type:"GET_DATA",data:null===t||void 0===t?void 0:t.data,totalPages:t.length,params:e})})).catch((function(e){a({type:"GET_SPEND_DATA_LOADING",data:!1})}));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},g=function(e){var t="".concat(e.getMonth()+1);1===t.length&&(t="0".concat(t));var n="".concat(e.getDate());return 1===n.length&&(n="0".concat(n)),[e.getFullYear(),t,n].join("-")},A=function(e){return function(t){return t({type:"FILTER_DATA",value:e})}},x=function(e){return function(t){s().post("/backendapi/spend/delete",e,{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}).then((function(n){t({type:"DELETE_DATA",obj:e})}))}},L=function(e){var t={userId:d._id,name:(0,l.G)(e.name,!0),relation:(0,l.G)(e.relation,!0),relation1:(0,l.G)(e.relation1,!0),email:(0,l.G)(e.email,!0),primaryContact:(0,l.G)(e.contact1,!0),secondaryContact:(0,l.G)(e.contact2,!0),address:(0,l.G)(e.address,!0),secrets:e.secrets};return function(){var e=(0,r.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().post("/backendapi/nominee/add",t,{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}).then((function(e){e.data&&(c.A9,"Success"===e.data||e.data,e.data),n(f())}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=function(e){var t={_id:e._id,usage:e.usage?e.usage:"Unused",userId:d._id,name:(0,l.G)(e.name,!0),relation:(0,l.G)(e.relation,!0),relation1:(0,l.G)(e.relation1,!0),email:(0,l.G)(e.email,!0),primaryContact:(0,l.G)(e.contact1,!0),secondaryContact:(0,l.G)(e.contact2,!0),address:(0,l.G)(e.address,!0),secrets:e.secrets};return function(){var e=(0,r.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().post("/backendapi/nominee/update",t,{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}).then((function(e){return(0,u.jsx)(c.A9,{handleClick:function(){},openSnack:!0,openSnackMsg:"Nominee Updated Successfully"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Z=function(e){return function(){var t=(0,r.Z)((0,i.Z)().mark((function t(n){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s().post("/backendapi/update/secrets",{secrets:e,_id:d._id},{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}).then((function(e){return(0,u.jsx)(c.A9,{handleClick:function(){},openSnack:!0,openSnackMsg:"Secret Updated Successfully"})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},32934:function(e,t,n){n.r(t),n.d(t,{default:function(){return J}});var a=n(1413),i=n(93433),r=n(74165),o=n(15861),s=n(29439),c=n(47313),l=n(95162),u=n(64162),d=n.n(u),p=n(49461),f=n.n(p),v=n(40229),h=n(7081),m=n(5448),y=n(71535),g=n(88356),A=n(96900),x=n(56972),L=n(62463),k=n(89870),Z=n(39653),b=n(96327),S=n(39995),_=n(62457),D=n(31881),j=n.n(D),I=n(66135),T=n(63861),w=n(86240),E=n(51427),G=n(61474),N=n(35192),C=n(71363),O=n(71207),P=n(54727),B=n(46417),F=function(e,t,n,a,i,r,o){var s=[];(null===o||void 0===o?void 0:o.length)&&o.forEach((function(r,o){if(r.id){var c,l="";(null===r||void 0===r||null===(c=r.nominees)||void 0===c?void 0:c.length)&&r.nominees.forEach((function(t,n){var a=e.data.filter((function(e){return e._id===t.id}));a.length&&(n===r.nominees.length-1?l+=a[0].name:l="".concat(l+a[0].name,", "))}));var u=(0,B.jsx)("div",{children:(0,B.jsxs)(y.ZP,{container:!0,spacing:2,children:[r.liabilityDetails.map((function(e,n){if(""!==e.val){var a,i=e.val;if("File"===e.type){var r=e.val.split("#~#");i=(0,B.jsx)("u",{children:(0,B.jsx)("span",{style:{color:"blue"},onClick:function(){t(r[2])},children:r[0]})})}return(0,B.jsx)(y.ZP,{item:!0,sm:5,xs:12,children:(0,B.jsxs)(C.Z,{children:[(0,B.jsxs)("span",{className:"font-weight-bold upper-text ".concat(w.LP?"upper-text-dark":"upper-text"),children:[e.key&&(null===(a=e.key.split("*"))||void 0===a?void 0:a[0])," :"]})," ",(0,B.jsx)("span",{className:"".concat(w.LP?"lower-text-dark":"lower-text"),children:"Date"===e.type?(0,P.p6)(i):i})]})},n+e.key)}return""})),(0,B.jsx)(y.ZP,{item:!0,sm:5,sx:12,children:(0,B.jsxs)(C.Z,{children:[(0,B.jsx)("span",{className:"font-weight-bold upper-text ".concat(w.LP?"upper-text-dark":"upper-text"),children:"Nominees :"})," ",(0,B.jsx)("span",{className:"".concat(w.LP?"lower-text-dark":"lower-text"),children:l})]})}),(0,B.jsx)(y.ZP,{item:!0,sm:2,sx:12,children:(0,B.jsxs)(C.Z,{children:[(0,B.jsx)("b",{children:(0,B.jsx)(O.Z,{className:"cursor-pointer mr-1",size:window.screen.width<500?13:20,onClick:function(){n(r)}})}),(0,B.jsx)("b",{children:(0,B.jsx)(N.Z,{className:"cursor-pointer",size:window.screen.width<500?13:20,onClick:function(){a(r.id),i(!0)}})})]})})]})}),d={id:o+1,title:r.liabilityType,content:u};s.push(d)}})),r(null===s||void 0===s?void 0:s.reverse())},z=n(97729),R=n(10226),Y=n(50850),U=n(23317),M=n(36936),J=(0,I.$j)((function(e){var t,n,a,i,r;return{dataList:e.reducer.dataList,liabilityListFromAPI:null!==(t=null===(n=e.reducer.dataList)||void 0===n?void 0:n.liabilityListFromAPI)&&void 0!==t?t:[],messages:null===(a=e.reducer)||void 0===a||null===(i=a.customizer)||void 0===i||null===(r=i.language)||void 0===r?void 0:r.Liability,listLoading:e.reducer.dataList.totalRecordsLoading}}),{getData:E.Yu,addData:E.Id,callLiabilityAPI:E.IZ})((function(e){var t,n,u,p=(0,I.I0)(),D=e.messages,E=e.thumbView,C=e.getData,O=e.parsedFilter,J=e.callLiabilityAPI,V=e.liabilityListFromAPI,W=JSON.parse(sessionStorage.getItem("dropdowns")).liabilityOption,q=JSON.parse(sessionStorage.getItem("logInUserData")),Q=Object.keys(W).map((function(e){var t,n;return{value:e,label:null!==(t=null===D||void 0===D||null===(n=D.colorOption)||void 0===n?void 0:n[e])&&void 0!==t?t:e,color:"#00B8D9",isFixed:!0}})),$=(0,c.createRef)(),H=(0,c.useState)(!1),K=(0,s.Z)(H,2),X=K[0],ee=K[1],te=(0,c.useState)(!1),ne=(0,s.Z)(te,2),ae=ne[0],ie=ne[1],re=(0,c.useState)(null),oe=(0,s.Z)(re,2),se=oe[0],ce=oe[1],le=(0,c.useState)(""),ue=(0,s.Z)(le,2),de=ue[0],pe=ue[1],fe=(0,c.useState)(""),ve=(0,s.Z)(fe,2),he=ve[0],me=ve[1],ye=(0,c.useState)(!0),ge=(0,s.Z)(ye,2),Ae=ge[0],xe=ge[1],Le=(0,c.useState)([]),ke=(0,s.Z)(Le,2),Ze=ke[0],be=ke[1],Se=(0,c.useState)(""),_e=(0,s.Z)(Se,2),De=_e[0],je=_e[1],Ie=(0,c.useState)(!1),Te=(0,s.Z)(Ie,2),we=Te[0],Ee=Te[1],Ge=(0,c.useState)(!1),Ne=(0,s.Z)(Ge,2),Ce=Ne[0],Oe=Ne[1],Pe=(0,c.useState)(null),Be=(0,s.Z)(Pe,2),Fe=Be[0],ze=Be[1],Re=(0,c.useState)(!1),Ye=(0,s.Z)(Re,2),Ue=Ye[0],Me=Ye[1],Je=(0,c.useState)(!1),Ve=(0,s.Z)(Je,2),We=Ve[0],qe=Ve[1],Qe=(0,c.useState)(!1),$e=(0,s.Z)(Qe,2),He=$e[0],Ke=$e[1],Xe=(0,c.useState)([]),et=(0,s.Z)(Xe,2),tt=et[0],nt=et[1],at=(0,c.useState)(!1),it=(0,s.Z)(at,2),rt=it[0],ot=it[1],st=(0,c.useState)(),ct=(0,s.Z)(st,2),lt=ct[0],ut=ct[1],dt=(0,c.useState)([]),pt=(0,s.Z)(dt,2),ft=pt[0],vt=pt[1],ht=(0,c.useState)(""),mt=(0,s.Z)(ht,2),yt=mt[0],gt=mt[1],At=(0,c.useState)(!1),xt=(0,s.Z)(At,2),Lt=xt[0],kt=xt[1],Zt=(0,c.useState)(""),bt=(0,s.Z)(Zt,2),St=bt[0],_t=bt[1],Dt=(0,c.useState)(!0),jt=(0,s.Z)(Dt,2),It=jt[0],Tt=jt[1],wt=(0,c.useState)(!1),Et=(0,s.Z)(wt,2),Gt=Et[0],Nt=Et[1],Ct=(0,c.useState)(),Ot=(0,s.Z)(Ct,2),Pt=Ot[0],Bt=Ot[1],Ft=(0,c.useState)([{value:"Add Nominee",label:"Add Nominee",color:"#00B8D9",isFixed:!1}]),zt=(0,s.Z)(Ft,2),Rt=zt[0],Yt=zt[1];(0,c.useEffect)((function(){if(e.dataList.data.length){var t=[{value:"Add Nominee",label:"Add Nominee",color:"#00B8D9",isFixed:!1}];e.dataList.data.forEach((function(e){var n={value:e._id,label:"".concat(e.name," - ").concat(e.relation),color:"#00B8D9",isFixed:!1};t.push(n)})),Yt(t)}}),[e.dataList]),(0,c.useEffect)((function(){V&&F(e.dataList,Vt,an,ce,ee,be,V)}),[V]),(0,c.useEffect)((function(){!e.listLoading&&p(M.SD.endpoints.getData.initiate()),p(U.sk.endpoints.getLiabilityData.initiate())}),[]);var Ut=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ee(e),!0===t&&(ze(null),Oe(!0))},Mt=function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Me(!0),t.prev=1,t.next=4,e.addData(n);case 4:Me(!1),Ut(!1,!0),t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(1),Me(!1),t.abrupt("return",(0,B.jsx)(T.A9,{handleClick:function(){},openSnack:!0,openSnackMsg:"Add Nominee Failed! Please contact admin",severity:"error"}));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),Jt=sessionStorage.getItem("authtoken"),Vt=function(e){Ke(!0),qe(!0);var t=sessionStorage.getItem("authtoken");j().get("/backendapi/sender/msg/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){var t,n=null===(t=e.data[0])||void 0===t?void 0:t.media,a=d().decompressFromUTF16(n),i=(0,z.Y)(a);if(!i)return Ke(!He),(0,B.jsx)(T.A9,{handleClick:function(){},openSnack:!0,openSnackMsg:"Something went wrong",severity:"warning"});for(var r,o=atob(null===i||void 0===i?void 0:i.split("base64,")[1]),s=new Array(o.length),c=0;c<o.length;c++)s[c]=o.charCodeAt(c);var l=new Uint8Array(s),u=new Blob([l],{type:null===(r=e.data[0])||void 0===r?void 0:r.type}),p=URL.createObjectURL(u);Bt(p),qe(!1)}))},Wt=function(){ot(!rt)},qt=function(e,t,n){var a;"File"===t.type&&ut(null===(a=n.target)||void 0===a?void 0:a.files[0]);var i=ft,r=i.findIndex((function(e){return e.key===t.key}));e.length<50&&(i[r].val=e,vt(i),function(){var e=!1;ft.forEach((function(t){t.mandatory&&!t.val.trim()&&(e=!0)})),Tt(e)}(),ie(!ae))},Qt=function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))},$t=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,a,i,o,s,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],(a={}).user=null===q||void 0===q?void 0:q._id,a.type="Liability",a.alias=(0,z.G)(t.name),e.next=7,Qt(t);case 7:return i=e.sent,o=(0,z.G)(i),s=d().compressToUTF16(o),n.push({media:s,name:t.name,type:t.type,user:null===q||void 0===q?void 0:q._id}),a.attachment=n,e.next=14,j().post("/backendapi/documents/add",a,{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}});case 14:return c=e.sent,e.abrupt("return",c);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ht=function(t){Nt(!0),t.preventDefault(),yt&&!lt&&ft.forEach((function(e){"Attachments"===e.key&&(e.val="")}));var n={liabilityType:De,liabilityDetails:(0,w.OQ)(ft),nominees:tt,id:St},a=V.findIndex((function(e){return e.id===St}));a>=0&&(V.splice(a,1),V.push(n),j().post("/backendapi/adddetails",{_id:null===q||void 0===q?void 0:q._id,liabilities:(0,z.G)(JSON.stringify(V)),nominees:tt},{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}).then((function(t){var n;return yt&&(n=yt,j().delete("/backendapi/document/deletebyid/".concat(n),{headers:{Authorization:"Bearer ".concat(Jt)}}).then((function(e){return(0,B.jsx)(T.A9,{handleClick:function(){},openSnack:!0,openSnackMsg:yt&&lt?"Attachment Replaced Successfully":"Attachment removed Successfully"})})).catch((function(e){console.log("err",e)})).finally((function(){tn(),nn(),Tt(!0)}))),p(M.SD.endpoints.getData.initiate(e.parsedFilter)),p(U.sk.endpoints.getLiabilityData.initiate()),Nt(!1),(0,B.jsx)(T.A9,{handleClick:function(){},openSnack:!0,openSnackMsg:"Updated successfully!"})})).catch((function(){Nt(!1)})),tn(),nn(),Tt(!0))},Kt=function(e){Nt(!0),e.preventDefault(),kt(!1);var t=ft.findIndex((function(e){return"File"===e.type}));t>=0&&lt?""!==ft[t].val?$t(lt).then((function(n){ft[t].val="".concat((0,z.Y)(n.data.alias),"#~#").concat(n.data._id,"#~#").concat(n.data.attachment[0]),vt(ft),Ht(e)})).catch((function(e){var t,n;Nt(!1),(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)&&(T.A9,null===e||void 0===e||null===(n=e.response)||void 0===n||n.data)})):Ht(e):Ht(e)},Xt=function(){var t={liabilityType:De,liabilityDetails:(0,w.OQ)(ft),nominees:tt,id:(0,l.Z)()};return tt.forEach((function(e){e.objectid=t.id})),V.push(t),j().post("/backendapi/adddetails",{_id:null===q||void 0===q?void 0:q._id,liabilities:(0,z.G)(JSON.stringify(V)),nominees:tt},{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}).then((function(t){p(M.SD.endpoints.getData.initiate(e.parsedFilter)),p(U.sk.endpoints.getLiabilityData.initiate()),Nt(!1)})).catch((function(){Nt(!1)})),tn(),nn(),Tt(!0),(0,B.jsx)(T.A9,{handleClick:function(){},openSnack:!0,openSnackMsg:"Liability addedd successfully!"})},en=function(e){Nt(!0),e.preventDefault();var t=ft.findIndex((function(e){return"File"===e.type}));t>=0?""!==ft[t].val?$t(lt).then((function(e){ft[t].val="".concat((0,z.Y)(e.data.alias),"#~#").concat(e.data._id,"#~#").concat(e.data.attachment[0]),vt(ft),Xt()})).catch((function(e){var t,n;Nt(!1),(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)&&(T.A9,null===e||void 0===e||null===(n=e.response)||void 0===n||n.data)})):Xt():Xt()},tn=function(){V&&F(e.dataList,Vt,an,ce,ee,be,V),je(""),gt(""),ut(""),vt([]),nt([]),Lt&&Tt(!0)},nn=function(){pe(""),me(""),$.current&&$.current.select.clearValue()},an=function(e){var t=e.liabilityDetails,n=e.liabilityType,a=e.nominees;je(n),kt(!0),_t(e.id),vt(t),nt((0,i.Z)(a))};return(0,B.jsxs)(v.Z,{children:[(0,B.jsx)(f(),{children:(0,B.jsxs)(h.Z,{isOpen:He,toggle:function(){Ke(!He)},centered:!0,size:"lg",children:[(0,B.jsx)(m.Z,{toggle:function(){Ke(!He)},cssModule:{"modal-title":"w-100 text-center"},children:(0,B.jsx)(y.ZP,{container:!0,spacing:2,children:(0,B.jsx)(y.ZP,{style:{color:"var(--warning)",fontSize:"1.45rem",fontWeight:"bold",letterSpacing:"1px"},children:"Preview Liabiity Attachment"})})}),(0,B.jsxs)(g.Z,{className:"justify-content-center",children:[We&&(0,B.jsx)(T.$j,{}),!We&&(0,B.jsx)("div",{children:(0,B.jsx)("iframe",{style:{height:"400px",width:"100%"},className:"myiframe",title:"Aaq",src:"".concat(Pt,"#zoom=200")})})]})]})}),(0,B.jsx)(b.Z,{modalMessage:"Are you sure you want to delete this record?",handleConfirm:function(){!function(e){var t=JSON.parse(JSON.stringify(V)),n=t.findIndex((function(t){return t.id===e})),a=[];if(console.log(n,"id"),n>=0){var i=t[n].liabilityDetails.filter((function(e){return"File"===e.type}));console.log(i),i.forEach((function(e){var t=e.val.split("#~#");null!==t&&void 0!==t&&t[1]&&(console.log("liability delete",t),j().delete("/backendapi/document/deletebyid/".concat(t[1]),{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("authtoken"))}}))})),t[n].nominees.forEach((function(e){e.objectid=t[n].id,a.push(e)})),t.splice(n,1),p(U.sk.endpoints.addLiabilityData.initiate({_id:null===q||void 0===q?void 0:q._id,liabilities:(0,z.G)(JSON.stringify(t)),nominees:tt,deletednominee:a})),tn(),nn(),Tt(!0),T.A9}}(se),ee(!1)},isOpen:X,closeModal:function(){return ee(!1)}}),(0,B.jsx)(R.Z,{show:we,data:Fe,updateData:e.updateData,addData:Mt,isLoading:Ue,handleSidebar:Ut,thumbView:E,getData:C,dataParams:O,addNew:Ce}),(0,B.jsxs)(y.ZP,{container:!0,spacing:2,sx:{p:.5},children:[(0,B.jsx)(y.ZP,{item:!0,xs:12,sm:8,children:(0,B.jsxs)(A.Z,{children:[(0,B.jsx)(T.ll,{title:(null!==(t=null===D||void 0===D?void 0:D.subHeading)&&void 0!==t?t:Lt)?"Edit Liability Details":"Add New Liability"}),(0,B.jsxs)(x.Z,{children:[(0,B.jsxs)(y.ZP,{container:!0,spacing:1,children:[(0,B.jsx)(y.ZP,{item:!0,xs:12,sm:6,children:(0,B.jsx)(G.gc,{name:"liability",isDisabled:Lt,options:Q,id:"liabilityID",onChange:function(e,t){return function(e){var t;Tt(!0),(0,w.L9)(),pe(""),me(""),nt([]),ut(""),je(null!==(t=null===e||void 0===e?void 0:e.value)&&void 0!==t?t:void 0),vt(e?W[e.value]:{})}(t)},value:(0,w.NA)(Q,De),renderInput:function(e){var t;return(0,B.jsx)(Z.Z,(0,a.Z)((0,a.Z)({},e),{},{placeholder:null!==(t=null===D||void 0===D?void 0:D.liabilityOptionText)&&void 0!==t?t:"Liability Type"}))}})}),(0,B.jsx)(y.ZP,{item:!0,xs:12,sm:6,children:(0,B.jsx)(G.gc,{isMulti:!0,id:"nominee",name:"nominee",options:Rt,value:tt.map((function(e){var t=Rt.filter((function(t){return t.value===e.id}));return{value:t[0].value,label:t[0].label}})),onChange:function(e,t){return function(e){Lt&&Tt(!1);var t=[];(null===e||void 0===e?void 0:e.length)&&e.forEach((function(e){"Add Nominee"===e.value?Ee(!0):t.push({id:e.value,name:e.label})})),nt([].concat(t))}(t)},renderInput:function(e){var t;return(0,B.jsx)(Z.Z,(0,a.Z)((0,a.Z)({},e),{},{placeholder:null!==(t=null===D||void 0===D?void 0:D.nomineeOption)&&void 0!==t?t:"Nominee(s)"}))}})}),Object.keys(W).includes(De)&&ft.map((function(e,t){return(0,B.jsx)(y.ZP,{item:!0,xs:12,sm:6,children:"Attachments"!==e.key?(0,B.jsxs)(B.Fragment,{children:[e.deletable&&(0,B.jsx)(N.Z,{style:{position:"absolute",right:"-5px",top:"-7px"},className:"primary",size:15,onClick:function(){return function(e){Lt&&Tt(!1);var t=ft.filter((function(t){return e.key!==t.key}));vt(t)}(e)}}),(0,B.jsx)(Z.Z,{margin:"normal",size:"small",fullWidth:!0,type:e.type,onKeyPress:function(t){"number"===e.type.toLowerCase()&&((0,P.ZP)(t),function(e){var t=(null===e||void 0===e?void 0:e.keyCode)||(null===e||void 0===e?void 0:e.which),n=document.getElementById("liabSubmit");13===t&&(!n||n.disabled||Gt||(Lt?Kt(e):en(e)))}(t))},name:e.key,id:e.id,rows:"1",className:"input-label placeholder ",placeholder:e.key,max:"9999-12-31",min:"1900-01-01",value:"File"!==e.type?e.val:null,onChange:function(t){qt(t.target?t.target.value:t.value,e,t)}})]}):Lt&&!yt&&e.val.split("#~#")[1]?(0,B.jsxs)("div",{className:"form-control",children:[(0,B.jsx)(N.Z,{style:{position:"absolute",right:"-5px",top:"-7px"},className:"primary",size:15,onClick:function(){gt(e.val.split("#~#")[1])}}),(0,B.jsx)("span",{style:{color:"blue"},onClick:function(){Vt(e.val.split("#~#")[2])},children:e.val.split("#~#")[0]})]}):(0,B.jsx)(Z.Z,{margin:"normal",size:"small",fullWidth:!0,type:e.type,value:null,id:"fileAtt",onChange:function(t){qt(t.target?t.target.value:t.value,e,t)}})},t)}))]}),(0,B.jsxs)(L.Z,{direction:"row",spacing:3,sx:{mt:3},justifyContent:"end",children:[De&&(0,B.jsx)(k.Z,{onClick:Wt,children:"Add Custom Field"}),(0,B.jsx)(G.ZP,{varient:"outlined",label:Lt?"Cancel":null!==(n=null===D||void 0===D?void 0:D.resetButton)&&void 0!==n?n:"Reset",onClick:function(e){kt(!1),tn()}}),(0,B.jsx)(G.ZP,{varient:"contained",id:"assetSubmit",spinload:Gt,label:Lt?"Update":null!==(u=null===D||void 0===D?void 0:D.submitButton)&&void 0!==u?u:"Add",disabled:!yt&&(0===tt.length||!De||It||Gt),onClick:function(e){Lt?Kt(e):en(e)}})]})]})]})}),(0,B.jsx)(S.Z,{}),(0,B.jsx)(y.ZP,{item:!0,xs:12,children:(0,B.jsx)(_.ZP,{heading:null!==D&&void 0!==D&&D.textList?D.textList:"Liabilities List",isLoading:e.listLoading,collapseItems:Ze,show:function(){xe(!Ae),J()},assetShow:Ae})})]}),(0,B.jsx)(Y.Id,{modal:rt,fname:de,ftype:he,loading:We,addfield:function(){if(""!==De){var e=ft,t=e.length,n="";if(e.findIndex((function(e){return e.key===de}))>=0)return(0,B.jsx)(T.A9,{handleClick:function(){},openSnack:!0,openSnackMsg:"Field Already Exist! Please add new field",severity:"error"});"Attachments"===ft[t-1].key?(n=e[t-1],e[t-1]={key:de,val:"",type:he,deletable:!0},e.push(n),vt(e),pe(""),me("")):(e.push({key:de,val:"",type:he,deletable:!0}),vt(e),pe(""),me("")),Wt()}},messages:D,setfname:pe,setftype:me,assetType:De,toggleModal:Wt,selectCustomRef:$,clearCustomField:nn})]})}))}}]);